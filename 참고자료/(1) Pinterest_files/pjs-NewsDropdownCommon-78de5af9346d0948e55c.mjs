(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([["NewsDropdownCommon"],{CKhc:function(e,t,n){n.d(t,"a",(function(){return g}));var i=n("q1tI"),r=n.n(i),a=n("TSYQ"),o=n.n(a),s=n("Ye/N"),l=n("DzJC"),c=n.n(l),d=n("n6mq"),u=n("N84b");function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const h={UP:"up",DOWN:"down"},p=100;class g extends i.Component{constructor(...e){super(...e),m(this,"handleScroll",c()(()=>{if(this.props.listResource.isFetching)return;const{scrollThreshold:e}=this.props;Object(u.c)(this._container)-Object(u.d)(this._container)-Object(u.a)(this._container)<e&&this.fetchMore()},p)),m(this,"addEventListeners",e=>{const{useWindow:t}=this.props;t&&(e=window),this.removeEventListeners(),e&&(t||e.addEventListener("wheel",this.preventScroll),e.addEventListener("scroll",this.handleScroll)),this._container=e}),m(this,"preventScroll",e=>{const t=e.deltaY<0?h.UP:h.DOWN,n=this._container.scrollHeight-this._container.scrollTop-this._container.clientHeight==0,i=0===this._container.scrollTop;(t===h.DOWN&&n||t===h.UP&&i)&&e.preventDefault()})}UNSAFE_componentWillReceiveProps(e){const{onDataFetched:t}=e,n=e.listResource.data;n&&t(n.length)}componentWillUnmount(){this.removeEventListeners()}removeEventListeners(){const{useWindow:e}=this.props;this._container&&(e||this._container.removeEventListener("wheel",this.preventScroll),this._container.removeEventListener("scroll",this.handleScroll))}fetchMore(){this.props.listResource.isFetching||(this.props.listResource.isAtEnd?this._container.removeEventListener("scroll",this.handleScroll):this.props.listResource.fetchMore())}render(){const{className:e,renderEmptyState:t,renderItem:n}=this.props,i=this.props.listResource.data;return!this.props.listResource.isFetching&&i&&0===i.length?t():r.a.createElement("div",{className:o()(e,"listContainer"),ref:this.addEventListeners},i?r.a.createElement("ul",{className:"scrollableList"},i.map((e,t)=>n(e,t))):null,this.props.listResource.isAtEnd?null:r.a.createElement("div",{className:"loadingItem"},r.a.createElement(d.G,{accessibilityLabel:s.a._("Loading items"),show:this.props.listResource.isFetching})))}}m(g,"defaultProps",{onDataFetched:()=>{},scrollThreshold:400,useWindow:!1})},CRIG:function(e,t,n){n.d(t,"a",(function(){return a}));var i=n("q1tI"),r=n("n6mq");function a({image:e,width:t,height:n}){return e?i.createElement(r.u,{wash:!0,width:t,height:n},i.createElement(r.p,{alt:"",color:"#EFEFEF",fit:"cover",naturalHeight:e.height||1,naturalWidth:e.width||1,src:e.url||""})):i.createElement(r.c,{color:"lightGray",width:t,height:n})}},EWQr:function(e,t,n){var i=n("q1tI"),r=n("CRIG");function a({customCover:e,height:t,imgUrl:n,imgPos:r,width:a}){const o={height:t,width:a},s=t/a;let l="center center";if(e&&r){let e=1;e=r.height/r.width>s?a/r.width:t/r.height,l=`-${r.x*e}px -${r.y*e}px`}const c={backgroundImage:`url(${n})`,backgroundPosition:l,backgroundRepeat:"no-repeat",backgroundSize:"cover",minHeight:"100%",backgroundColor:"#EFEFEF"};return i.createElement("div",{style:o},i.createElement("div",{className:"relative",style:c},i.createElement("div",{className:"imageWash absolute"})))}var o=n("n6mq");n.d(t,"a",(function(){return c}));const s=2,l=e=>{let t=0;if(0===e.length)return t;for(let n=0;n<e.length;n+=1)t=(t<<5)-t+e.charCodeAt(n),t&=t;return Math.abs(t)};function c({boardThumbs:e=[],coverPin:t,cover:n,height:c=200,numCols:d=3,width:u=300}){const m=n?Math.floor(d/2):d,h=e.slice(0,2*m).map(e=>e.url||"").sort().join(""),p=l(h)%m;return i.createElement(o.u,{rounding:2,width:u,height:c},i.createElement(o.g,{columns:d,cover:!!n,gutter:s,height:c,layoutKey:p,renderImage:({index:t,width:o,height:s})=>0===t&&n?i.createElement(a,{customCover:n.isCustom,height:s,imgUrl:n.url,imgPos:n.position||{width:0,height:0,x:0,y:0},width:o}):i.createElement(r.a,{height:s,image:e[n?t-1:t],width:o}),width:u}))}},JWao:function(e,t,n){var i=n("q1tI"),r=n.n(i),a=n("Ye/N");n("17x9");const o=["orange","green","purple","watermelon","pine","navy","eggplant","olive","maroon"];function s(e){return o[e.charCodeAt(0)%o.length]}var l=n("n6mq"),c=n("sUia");function d(e){const{user:t,search:n,storyType:i}=e;if(i===c.b.USER){const{full_name:e,image_large_url:n}=t;return r.a.createElement("div",{className:"attributionUserBorder",style:{height:c.a,width:c.a}},r.a.createElement(l.a,{name:e,src:n}))}return i===c.b.SEARCH?r.a.createElement("div",{className:"attributionSearchBorder"},r.a.createElement(l.c,{rounding:"pill",color:s(n)},r.a.createElement(l.c,{display:"flex",alignItems:"center",paddingX:2},r.a.createElement(l.c,{marginEnd:1},r.a.createElement(l.n,{accessibilityLabel:a.a._("search"),icon:"search",label:"search",color:"white"})),r.a.createElement(l.c,{maxWidth:150,paddingY:2},r.a.createElement(l.K,{truncate:!0,color:"white"},n))))):null}t.a=function(e){const{height:t,pins:n,pinWidth:i,search:a,storyType:o,user:s}=e;return r.a.createElement(l.c,{position:"relative"},r.a.createElement(l.u,{height:t,rounding:2,wash:!0},r.a.createElement(l.c,null,n.map((e,n)=>(function(e,t,n,i){return r.a.createElement("div",{key:t,className:"miniPinGridItem",style:{backgroundImage:`url(${e.url})`,height:n,width:i}})})(e,n,t,i)))),r.a.createElement("span",{className:"attributionWrapper"},r.a.createElement(d,{search:a,storyType:o,user:s})))}},"Jf+U":function(e,t,n){n.d(t,"a",(function(){return m}));var i=n("q1tI"),r=n("zwad"),a=n("joD6"),o=n("s+7V"),s=n("U4JR");function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const c=r.a.getQueryStringParams()&&r.a.getQueryStringParams().debug_impression_log,d={Article:{impressionType:"articleImpressions",idType:"articleIdStr",eventType:3829},Pin:{impressionType:"pinImpressions",idType:"pinIdStr",eventType:18},Board:{impressionType:"boardImpressions",idType:"boardIdStr",eventType:3700},Interest:{impressionType:"topicImpressions",idType:"topicIdStr",eventType:3703},Search:{impressionType:"searchImpressions",idType:"term",eventType:3803},User:{impressionType:"userImpressions",idType:"userIdStr",eventType:3704},News:{impressionType:"newsHubData",idType:"newsIdStr",eventType:4110},Story:{impressionType:"storyImpressions",idType:"storyIdStr",eventType:170},Guide:{impressionType:"guideImpressions",idType:"term",eventType:7573},ActivationCard:{impressionType:"activationCardImpressions",idType:"experienceIdStr",eventType:8547},HybridSearchHero:{impressionType:"hybridSearchHeroImpressions",idType:"hybridSearchHero",eventType:7308}},u=1e6;function m(e){const t=Object(o.a)(e);return Object(a.a)(class extends i.Component{constructor(...e){super(...e),l(this,"state",{impressionStarted:!1,impressionLogged:!1}),l(this,"currentNs",()=>Date.now()*u),l(this,"startTime",0),l(this,"debugPinImpressions",c&&"Pin"===this.props.impressionType&&this.props.viewer.isEmployee),l(this,"handleVisibilityChanged",e=>{const{componentType:t,contextLogData:n,impressionAuxFields:i,impressionType:r,loggingId:a,slotIndex:o,viewParameter:l,viewType:c,viewData:u}=this.props;if(e)this.startTime=this.currentNs(),this.debugPinImpressions&&(console.log(o+" started timer"),this.setState({impressionStarted:!0}));else{const e=d[r],m=e.idType,h=this.currentNs(),p={endTime:h,[m]:a,slotIndex:o,time:this.startTime,renderDuration:h-this.startTime,...i};Object(s.a)(e.eventType,{component:t,eventData:{[e.impressionType]:[p]},view:c,viewParameter:l,viewData:u,...n}),this.debugPinImpressions&&(console.log(o+" logged for "+(h-this.startTime)/1e9+"s"),this.setState({impressionStarted:!1,impressionLogged:!0}))}})}render(){return i.createElement(t,Object.assign({onVisibilityChanged:this.handleVisibilityChanged,debugImpressionStarted:this.debugPinImpressions?this.state.impressionStarted:void 0,debugImpressionLogged:this.debugPinImpressions?this.state.impressionLogged:void 0},this.props))}})}},Js8g:function(e,t,n){n.d(t,"a",(function(){return l}));var i=n("q1tI"),r=n.n(i),a=n("Ye/N"),o=(n("17x9"),n("vvax")),s=n("n6mq");function l({backgroundColor:e,followersCount:t,followersCountDisplay:n,image:i,name:l,width:c}){const d=a.a.ngettext("{{ count }} {{ label }}","{{ count }} {{ label }}",t||0,"indicate a number of followers","indicate a number of followers"),u=a.a.ngettext("follower","followers",t||0,"used in {{count}} {{followers}}","used in {{count}} {{followers}}");return r.a.createElement(s.c,null,r.a.createElement(s.u,{rounding:2},i?r.a.createElement(s.c,{position:"relative"},r.a.createElement(s.s,{width:c,height:c,contentAspectRatio:i.width/i.height},r.a.createElement(s.p,{alt:l,color:e,naturalHeight:1,naturalWidth:1,src:i.url})),r.a.createElement(s.c,{height:c,width:c,dangerouslySetInlineStyle:{__style:{backgroundImage:"linear-gradient(to bottom,\n                  rgba(181, 181, 181, .1) 0%,\n                  rgba(0, 0, 0, .2) 33%,\n                  rgba(0, 0, 0, .5) 66%,\n                  rgba(0, 0, 0, .7) 100%)"}},position:"absolute",top:!0})):r.a.createElement(s.c,{height:c,width:c,dangerouslySetInlineStyle:{__style:{backgroundColor:e}}}),r.a.createElement(s.c,{bottom:!0,left:!0,right:!0,position:"absolute",padding:3},r.a.createElement(s.K,{color:"white",overflow:"normal",weight:"bold"},l),t?r.a.createElement(s.c,null,Object(o.b)(d,{count:r.a.createElement(s.K,{color:"white",inline:!0,key:"followersCount",size:"md",weight:"bold"},n),label:r.a.createElement(s.K,{color:"white",inline:!0,key:"followersLabel",size:"md"},u)})):null)))}},"N/FO":function(e,t,n){const i="undefined"!=typeof window&&window.performance?()=>window.performance.now():()=>Date.now();t.a=({window:e,duration:t,run:n})=>{const r=i();let a=0,o=null;const s=()=>{const l=i()-r,c=l-a;if(t===1/0)n(0,l,c);else{const e=l/t;if(e>=1)return void n(1,l,c);n(e,l,c)}a=l,o=e.requestAnimationFrame(s)};return{start:()=>{o=e.requestAnimationFrame(s)},cancel:()=>{o&&(e.cancelAnimationFrame(o),o=null)}}}},N84b:function(e,t,n){n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return l})),n.d(t,"e",(function(){return c})),n.d(t,"c",(function(){return d})),n.d(t,"d",(function(){return u})),n.d(t,"f",(function(){return m}));var i=n("N/FO");const r={easingFunction:"ease-in-out",extendToEdgeDistanceX:0,extendToEdgeDistanceY:0,scrollSpeedPxPerMs:1.2,minScrollDuration:200},a={linear:e=>e,"ease-in":e=>e*e,"ease-out":e=>e*(2-e),"ease-in-out":e=>e<.5?2*e*e:(4-2*e)*e-1},o=({scrollPosition:e,containerSize:t,contentSize:n,intendedDistance:i,extendToEdgeDistance:r=0})=>{const a=n-t,o=a-e,s=-e;let l=i;return l=Math.min(l,o),l=Math.max(l,s),i>0&&a-(e+l)<=r?l=a-e:i<0&&e+l<=r&&(l=-e),l},s=(e,t,n,s={})=>{const l={...r,...s},{scrollLeft:c,scrollTop:d,scrollWidth:u,scrollHeight:m,clientWidth:h,clientHeight:p}=e,g=o({scrollPosition:c,containerSize:h,contentSize:u,intendedDistance:t,extendToEdgeDistance:l.extendToEdgeDistanceX}),w=o({scrollPosition:d,containerSize:p,contentSize:m,intendedDistance:n,extendToEdgeDistance:l.extendToEdgeDistanceY}),f=Math.abs(Math.floor(g/l.scrollSpeedPxPerMs)),y=Math.abs(Math.floor(w/l.scrollSpeedPxPerMs));let b=Math.max(f,y);l.minScrollDuration&&(b=Math.max(b,l.minScrollDuration));const E=a[l.easingFunction]||a["ease-in-out"];return Object(i.a)({window,duration:b,run:t=>{e.scrollLeft=c+g*E(t),e.scrollTop=d+w*E(t),1===t&&l.onAnimationComplete&&setTimeout(l.onAnimationComplete,0)}})};function l(e){return e===window?window.innerHeight:e.clientHeight}function c(){return void 0!==window.scrollY?window.scrollY:document.documentElement&&void 0!==document.documentElement.scrollTop?document.documentElement.scrollTop:0}function d(e){return e===window&&document.documentElement?document.documentElement.scrollHeight:e.scrollHeight}function u(e){return e===window?c():e.scrollTop}function m(){window&&window.scroll(0,0)}},SoMo:function(e,t,n){var i=n("q1tI"),r=n.n(i),a=n("n6mq"),o=n("TSYQ"),s=n.n(o),l=n("sUia");const c=136;function d(e){const{hasBrioCorners:t,idx:n,imageFit:i,imageSize:o,isFullWidth:d,item:h,itemHeight:p,itemWidth:g,numItemsShow:w,previewItemCount:f,showOverflowNumber:y=!0,unifiedCommentBorder:b=!1,variant:E}=e,{description:I,images:_,type:v}=h;if(v&&v!==l.b.PIN)return null;const T=_&&_[o],C=d?f-w:Math.min(f-w,99);return r.a.createElement("span",{className:s()("previewRowItem",{previewRowFullWidthItem:d,fourPixelMask:!d,..."default"===E?{hasLegoBrioCorners:!0}:{hasBrioCorners:t},unifiedCommentBorder:b}),key:n},r.a.createElement(a.s,{width:g||p||m,height:p||u,contentAspectRatio:1},T&&r.a.createElement(a.p,Object.assign({alt:I||""},i?{fit:"cover"}:{},{naturalHeight:c,naturalWidth:c,src:(T||{}).url}),n===w-1&&C>0&&y&&r.a.createElement(a.c,{flex:"grow",display:"flex",alignItems:"center",justifyContent:"center",dangerouslySetInlineStyle:{__style:{backgroundColor:"rgba(0, 0, 0, 0.2)",height:"100%"}}},r.a.createElement(a.K,{color:"white",size:d?"lg":"sm",weight:"bold"},"+"+C)))))}n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return m})),n.d(t,"c",(function(){return p}));const u=60,m=40,h=4;function p(e){const{hasBrioCorners:t=!1,imageFit:n,imageSize:i="136x136",isFullWidth:o,itemHeight:s,itemWidth:l,numItemsToShow:c,previewItemCount:u,previewItems:m=[],showEmptyCards:p,showImageRowStyles:g,showOverflowNumber:w,unifiedCommentBorder:f,variant:y}=e,b=c||h,E=p?b:Math.min(m.length,b),I=Array.from(new Array(E)),_=new Set;return r.a.createElement(a.c,g?{display:"flex",justifyContent:"center"}:{},I.map((e,a)=>{const c=m[a]||{},{image_signature:h}=c;return h&&_.has(h)?null:(_.add(h),r.a.createElement(d,{hasBrioCorners:t,idx:a,imageFit:n,imageSize:i,isFullWidth:o,item:c,itemHeight:s,itemWidth:l,key:a,numItemsShow:b,previewItemCount:u,showOverflowNumber:w,unifiedCommentBorder:f,variant:y}))}).filter(e=>e))}},fyOE:function(e,t,n){n.d(t,"a",(function(){return l}));var i=n("q1tI"),r=n.n(i),a=n("3gA6"),o=(n("17x9"),n("vvax")),s=n("n6mq");function l(e){const{applyMarkup:t=!0,applyLink:n=!1,text:i,textMapping:l={}}=e,c={};return l&&Object.keys(l).forEach(e=>{const i=l[e];c[e]=i.t.toString(),t&&(i.b&&(c[e]=r.a.createElement("strong",{key:e},c[e])),i.r&&(c[e]=r.a.createElement(s.K,{inline:!0,color:"red",key:e},c[e])),i.l&&n&&(c[e]=r.a.createElement(a.b,{key:e,to:i.l},c[e])))}),r.a.createElement("span",null,Object(o.a)(i,c))}},irWW:function(e,t,n){},jkGz:function(e,t,n){n.r(t);var i=n("q1tI"),r=n.n(i),a=(n("irWW"),n("h4v/")),o=n("Ye/N"),s=n("SoMo"),l=n("tlsX"),c=(n("17x9"),n("n6mq")),d=n("sUia");const u="136x136",m="100x";var h=class extends i.Component{getImageProps(e){switch(e.type){case d.b.PIN:return{alt:e.description,src:(e.images[u]||{}).url};case d.b.BOARD:return{alt:e.name,src:(e.image_thumbnail_urls||{})[m]};case d.b.USER:return{alt:e.full_name,src:e.image_large_url};default:return{}}}render(){const{headerIconImageUrl:e,headerIconObjects:t}=this.props;if(e)return r.a.createElement(c.c,{height:d.a,width:d.a},r.a.createElement(c.u,{width:d.a,height:d.a,rounding:"circle"},r.a.createElement(c.p,{alt:o.a._("Pinterest recommendation","label for notification with recommended content","label for notification with recommended content"),color:"#fff",naturalHeight:d.a,naturalWidth:d.a,src:e})));if(t&&t.length>0){const e=t[0];return r.a.createElement("div",null,e.type===d.b.USER?r.a.createElement(c.c,{height:d.a,width:d.a},r.a.createElement(c.a,{src:e.image_large_url,name:e.full_name})):r.a.createElement("div",{className:"fourPixelMask",style:{height:d.a,width:d.a}},r.a.createElement(c.p,Object.assign({color:"#fff",naturalHeight:d.a,naturalWidth:d.a},this.getImageProps(e)))))}return null}},p=n("EWQr");const g=146,w=4,f="170x",y=296;function b({board:{name:e,image_cover_url:t,images:n}}){const i=t?{url:t}:void 0,a=n?n[f]:[];return r.a.createElement(p.a,{boardThumbs:a,cover:i,height:g,numCols:w,width:y})}var E=n("Js8g");const I=146,_=296;function v(e){const{interests:t}=e;return r.a.createElement(c.c,{width:_,display:"flex",justifyContent:"between"},t.map((e,t)=>{const{backgroundColor:n,id:i,images:{"236x":a},name:o}=e;return r.a.createElement(E.a,{key:i,backgroundColor:n,image:a,name:o,width:I})}))}var T=n("JWao"),C=n("3gA6"),S=n("fyOE"),N=n("kmwA"),x=n("XCz/"),D=n("U4JR"),R=n("zwad"),O=n("rkcQ");const k=e=>R.a.removeQueryParams(e,["notification_ids"]),A=(e,t)=>{const i=t&&t[0]&&t[0].actor_id,r=R.a.getQueryStringParamsFromUrl(e);if(i&&r.notification_ids){return((e,t)=>{const i={notifications:JSON.stringify(t)};return n.e(138).then(n.bind(null,"FCI/")).then(({default:t})=>(new t).put(`/ads/v3/notifications_v2/${e}/`,i))})(i,JSON.parse(r.notification_ids).map(e=>({id:e,status:O.f.READ})))}return Promise.resolve()};function P(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const M={BASIC:0,TEXT:1,ROW_WITH_COUNT:2,GRID:3,MINI_PIN_GRID:4,CAROUSEL:5,LIST:6,TWO_ROW_WITH_COUNT:7,NO_ICON_TEXT:8,NO_ICON_ROW_WITH_COUNT:9,ROW_WITH_COUNT_2:10,MINI_PIN_GRID_2:11,MINI_BOARD_GRID:12,MINI_USER_GRID:13,MINI_SEARCH_GRID:14,MINI_INTEREST_GRID:15},H=2,L=4,W=146,U=73;class B extends i.Component{constructor(...e){super(...e),P(this,"handleClick",()=>{const{handleClick:e,id:t,type:n,overrideClickUrl:i,contentItems:r}=this.props;Object(D.a)(101,{objectId:t,view:107,viewParameter:3081,news_type:n}),this.isAdsUrl(i)&&A(i,r),e()}),P(this,"isAdsUrl",e=>{const{CANONICAL_ADS_URL:t}=N.a.settings;return e&&0===e.indexOf(t)})}get displayComponent(){const{contentItemCount:e,contentItems:t,contentText:n,displayMode:i}=this.props,a=t.filter(({content_object:e})=>e).map(({content_object:e})=>e);if(this.canBeSupportedByDisplayModes(i,[M.MINI_PIN_GRID_2])){const e=a.map(e=>e.images["136x136"]).slice(0,L);return r.a.createElement(T.a,{height:W,pins:e,pinWidth:U,storyType:d.b.PIN})}if(this.canBeSupportedByDisplayModes(i,[M.MINI_BOARD_GRID]))return r.a.createElement(b,{board:a[0]});if(this.canBeSupportedByDisplayModes(i,[M.MINI_USER_GRID])){const e=a[0];return r.a.createElement(T.a,{height:W,pins:e.recent_pin_images["200x"].slice(0,L),pinWidth:U,storyType:d.b.USER,user:e})}if(this.canBeSupportedByDisplayModes(i,[M.ROW_WITH_COUNT_2])){const t=a.map(e=>({images:e.images,image_signature:e.image_signature,type:e.type}));return r.a.createElement(s.c,{previewItemCount:e,previewItems:t,variant:"legacy"})}if(this.canBeSupportedByDisplayModes(i,[M.MINI_INTEREST_GRID]))return r.a.createElement(v,{interests:a.slice(0,H)});if(this.canBeSupportedByDisplayModes(i,[M.MINI_SEARCH_GRID])){const e=a[0].images.map(e=>({url:e})).slice(0,L);return r.a.createElement(T.a,{height:W,pins:e,pinWidth:U,search:a[0].term,storyType:d.b.SEARCH})}return this.canBeSupportedByDisplayModes(i,[M.BASIC])?null:this.canBeSupportedByDisplayModes(i,[M.TEXT])?r.a.createElement(c.c,{width:260},r.a.createElement(c.K,null,n)):void 0}canBeSupportedByDisplayModes(e,t){return t.some(t=>e&1<<t)}render(){const{headerIconImageUrl:e,headerIconObjects:t,headerText:n,id:i,lastUpdatedAt:a,overrideClickUrl:s,siteType:d,textMapping:u,unread:m,hasLgPadding:p}=this.props,{CANONICAL_MAIN_URL:g}=N.a.settings,w=s||"/news_hub/"+i,f=this.isAdsUrl(w)?k(w):Object(l.a)({currentSiteType:d,destinationSiteType:0,inputPath:w}),y=this.displayComponent,b=new Date,E=new Date(a);return b.getTime()-E.getTime()>864e5&&E.setHours(0,0,0,0),r.a.createElement(x.a,{activate:!1,name:"web_pro_mode_header"},({group:a})=>{const s=a.startsWith("enabled_full_width");return r.a.createElement(C.b,{className:`newsHubItem ${p?"newsHubItem--lgPadding":""}`,to:s&&!this.isAdsUrl(w)?g.concat(f):f,onClick:this.handleClick},r.a.createElement(c.c,{display:"flex"},r.a.createElement(h,{headerIconImageUrl:e,headerIconObjects:t,id:i}),r.a.createElement(c.c,null,r.a.createElement(c.c,{marginLeft:3},r.a.createElement(c.c,{display:"flex",alignItems:"center"},r.a.createElement(c.c,{marginRight:6},r.a.createElement(c.c,{width:p?"auto":260},r.a.createElement("span",{style:{display:"inline",marginRight:8}},r.a.createElement(c.K,{inline:!0},r.a.createElement(S.a,{text:n,textMapping:u}))),r.a.createElement(c.c,{display:"inlineBlock"},r.a.createElement(c.K,{inline:!0,size:"sm",color:"gray"},o.a.getHumanizedTimesince(E.getTime(),{isAbbreviated:!0}))))),m&&r.a.createElement(c.u,{height:8,rounding:"circle",width:8},r.a.createElement("div",{style:{backgroundColor:"#e60023",width:8,height:8}})))),!!y&&r.a.createElement(c.c,{marginTop:3,marginLeft:2},y))))})}}P(B,"defaultProps",{handleClick:()=>{}});var j=n("Jf+U"),F=Object(j.a)(B),q=n("qxKp"),z=n("eOdZ");class G extends i.Component{constructor(...e){var t,n,i;super(...e),i=()=>{z.a.create("NewsHubResource").callDelete({showError:!1}).then(e=>this.props.handleClick())},(n="handleButtonClick")in(t=this)?Object.defineProperty(t,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[n]=i}render(){return r.a.createElement("div",{className:"newsHubMarkReadButton"},r.a.createElement(c.c,{display:"flex",justifyContent:"center",alignItems:"center"},r.a.createElement(q.a,{accessibilityLabel:o.a._("Mark all as read","mark all the unread notifications as read","mark all the unread notifications as read"),rounding:"pill",onClick:this.handleButtonClick},r.a.createElement(c.K,{size:"md"},o.a._("Mark all as read","mark all the unread notifications as read","mark all the unread notifications as read")))))}}var K=n("CKhc"),Y=n("q8wg"),V=n("joD6"),$=n("fArA"),J=n("/5zs"),X=n("zLLH"),Q=n("pLLR");function Z(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class ee extends i.Component{constructor(e){super(e),Z(this,"onDataFetched",e=>{this.hasEarlier=!1}),Z(this,"handleItemClick",()=>{this.props.handleItemClick()}),Z(this,"handleMarkAllButtonClicked",()=>{this.props.newsHubResource.refreshData()}),Z(this,"renderItem",(e,t)=>{const n={impressionAuxFields:{newsType:e.news_type},impressionType:"News",loggingId:e.id,slotIndex:t,viewParameter:3081,viewType:107},i=this.getShouldShowFloatingPartnerHeader();return r.a.createElement("li",{className:`newsHubItemWrapper ${i?"newsHubItemWrapper--lgPadding":""}`,key:t},this.renderDate(e.last_updated_at,t),r.a.createElement(F,Object.assign({contentItemCount:e.content_item_count,contentItems:e.content_items,contentText:e.content_text,displayMode:e.encoded_display_mode,handleClick:this.handleItemClick,headerIconImageUrl:e.header_icon_image_url,headerIconObjects:e.header_icon_objects,headerText:e.header_text,id:e.id,lastUpdatedAt:e.last_updated_at,overrideClickUrl:e.override_click_url,subHeaderText:e.sub_header_text,siteType:this.props.siteType,textMapping:e.text_mapping,type:e.news_type,unread:e.unread,hasLgPadding:i},n)))}),Z(this,"renderEmptyState",()=>r.a.createElement(c.c,{height:400},r.a.createElement(c.c,{display:"flex",justifyContent:"center",color:"darkGray",rounding:"pill",paddingY:5,margin:5},r.a.createElement(c.h,{xs:10},r.a.createElement(c.K,{color:"white",weight:"bold"},o.a._("New! Discover ideas from your friends, followers and people who love your Pins!")))))),this.hasEarlier=!1}componentDidMount(){this.logPanelImpression()}logPanelImpression(){const e=a.a.getInstance(),t=e.getViewFromContext();Object(D.a)(13,{view:107,viewParameter:3081}),e.addViewToContext(t)}getShouldShowFloatingPartnerHeader(){const{requestContext:e,viewer:t}=this.props,n=new J.b(e,"web_pro_mode_header"),i=!(!t.partner||!t.partner.is_create&&!t.partner.is_linked_business);return(n.check("enabled_floating")||n.check("enabled_floating_employees"))&&i}renderDate(e,t){const n=new Date(e);let i;if(n.setHours(0,0,0,0),0===t)this.firstDay=n,i=o.a._("New","subtitle for new notifications in notification dropdown","subtitle for new notifications in notification dropdown");else{if(n.getTime()===this.firstDay.getTime()||this.hasEarlier)return null;i=o.a._("Earlier","subtitle for old notifications in notification dropdown","subtitle for old notifications in notification dropdown"),this.hasEarlier=!0}const a=this.getShouldShowFloatingPartnerHeader();return r.a.createElement("div",{className:"newsHubItemDate",style:{...a?{padding:"8px 48px"}:{}}},r.a.createElement(c.K,{color:"gray",weight:"bold"},i))}renderTitle(){const e=this.getShouldShowFloatingPartnerHeader();return r.a.createElement("div",{className:`newsHubTitle ${e?"newsHubTitle--lgPadding":""}`},r.a.createElement(c.K,{inline:!0,weight:"bold"},r.a.createElement("span",{className:"deprecatedTextSizeXL"},o.a._("Notifications","Title for news hub dropdown on the right upper corner in home page","Title for news hub dropdown on the right upper corner in home page"))),this.renderMarkReadButton())}renderMarkReadButton(){return r.a.createElement(x.a,{name:"news_hub_unread"},({anyEnabled:e})=>e?r.a.createElement(G,{handleClick:this.handleMarkAllButtonClicked}):null)}render(){return r.a.createElement(Y.a,{view:107,viewParameter:3081},r.a.createElement("div",null,this.renderTitle(),r.a.createElement(K.a,{className:"newsHubPanel",onDataFetched:this.onDataFetched,renderEmptyState:this.renderEmptyState,renderItem:this.renderItem,listResource:this.props.newsHubResource})))}}Z(ee,"defaultProps",{handleItemClick:()=>{}});var te=Object($.compose)(Q.e,V.a,Object(X.c)({name:"NewsHubResource",key:"newsHubResource",options:e=>({page_size:10})},{allowStale:!1}))(ee);n.d(t,"NewsDropdown",(function(){return ne}));const ne=({handleItemClick:e,requestContext:t,siteType:n})=>r.a.createElement("div",{className:"NewsConversationsDropdown"},r.a.createElement("div",{className:"content"},r.a.createElement(te,{handleItemClick:e,locale:t.locale,siteType:n})));t.default=Object(Q.e)(ne)},"s+7V":function(e,t,n){var i=n("q1tI"),r=n.n(i),a=n("i8i4"),o=n.n(a);function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const l=new Map;let c=null;const d=e=>{e.forEach(e=>{const t=l.get(e.target);t&&t(e)})},u=e=>{c.unobserve(e),l.delete(e)},m=(e,t="-64px 0px 0px 0px",n)=>{const i={root:document.querySelector("#mainContainer"),rootMargin:t,threshold:[0,.5,1]};c=c||new window.IntersectionObserver(d,i),l.set(e,n),c.observe(e)},h=e=>l.has(e);t.a=e=>{class t extends i.Component{constructor(...e){super(...e),s(this,"seen",!1),s(this,"flushTimeout",null),s(this,"enter",e=>{const t=e.intersectionRatio>0||e.isIntersecting;this.seen=t,this.seen&&this.props.onVisibilityChanged(!0)}),s(this,"leave",()=>{const e=this._node;e&&h(e)&&this.seen&&(this.props.onVisibilityChanged(!1),this.seen=!1)}),s(this,"observe",e=>{try{this._node=o.a.findDOMNode(this)}catch(i){return}if(!this._node)return;const{inAdsDesktopVideoExperiment:t}=this.props,n=this._node;m(n,e,e=>{if(!l.has(n))return;const i=t?e.intersectionRatio>=.5:e.intersectionRatio>0||e.isIntersecting,r=this.props.trackFullVisible?e.intersectionRatio>=1:i,a=this.props.trackFullVisible?0===e.intersectionRatio:!r;!this.seen&&r?this.enter(e):this.seen&&a&&this.leave()})})}componentDidMount(){const{rootMargin:e}=this.props;this.observe(e)}componentWillUnmount(){const e=this._node;e&&(this.leave(),u(e))}render(){return r.a.createElement(e,this.props)}}return s(t,"displayName",`WithVisibilityChanged(${e.displayName||e.name})`),t}},sUia:function(e,t,n){n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return a}));const i=40,r={BOARD:"board",BOARD_ACTIVITY:"boardactivity",BOARD_ACTIVITY_COMMENT:"boardactivitycomment",DID_IT:"userdiditdata",INTEREST:"interest",PIN:"pin",SEARCH:"news_hub_search",STORY:"story",USER:"user"},a=3},tlsX:function(e,t,n){n.d(t,"a",(function(){return l}));var i=n("kmwA");const{CANONICAL_MAIN_URL:r,CANONICAL_ADS_URL:a,CANONICAL_ANALYTICS_URL:o}=i.a.settings,s={0:r,3:a,4:o};function l({currentSiteType:e,destinationSiteType:t,inputPath:n}){const i=Object.keys(s).includes(String(e))&&Object.keys(s).includes(String(t)),r="/"===n[0]?n:`/${n}`;return i&&t!==e?`${s[t]}${r}`:r}}}]);
//# sourceMappingURL=pjs-NewsDropdownCommon-78de5af9346d0948e55c.mjs.map
