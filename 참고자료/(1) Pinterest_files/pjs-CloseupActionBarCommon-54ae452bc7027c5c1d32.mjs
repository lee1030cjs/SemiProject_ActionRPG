(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([["CloseupActionBarCommon","CarouselCommon"],{"/mzO":function(e,t,n){n.d(t,"a",(function(){return r}));var i=n("q1tI"),a=n("Ye/N"),o=n("n6mq");function r({commentsDisabled:e,onCommentChange:t,onPhotoChange:n,photosDisabled:r,isManagedView:s}){return i.createElement(o.c,null,i.createElement(o.j,null),i.createElement(o.c,{md:{display:"flex"},justifyContent:"between",paddingX:s?0:4,paddingY:s?6:3},!s&&i.createElement(o.c,{xs:{column:12},md:{column:3},paddingY:2},i.createElement(o.K,{size:"md"},a.a._("Comment and Photo Permissions"))),i.createElement(o.c,{xs:{column:12},md:{column:s?12:8}},i.createElement(o.c,{paddingY:1,display:"flex",alignItems:"center"},i.createElement(o.I,{onChange:t,id:"CommentSwitch",switched:!e}),i.createElement(o.c,{paddingX:2},i.createElement(o.q,{htmlFor:"CommentSwitch"},i.createElement(o.K,{size:"md"},a.a._("Allow people to comment","Label for toggling comments on a pin in pin edit form","Label for toggling comments on a pin in pin edit form"))))),i.createElement(o.c,{paddingY:1,alignItems:"center",display:"flex"},i.createElement(o.I,{onChange:n,id:"PhotoSwitch",switched:!r}),i.createElement(o.c,{paddingX:2},i.createElement(o.q,{htmlFor:"PhotoSwitch"},i.createElement(o.K,{size:"md"},a.a._("Allow people to upload photos","Label for toggling photos on a pin in pin edit form","Label for toggling photos on a pin in pin edit form"))))))))}},"3vRR":function(e,t,n){var i=n("q1tI"),a=n("n6mq");t.a=({children:e})=>i.createElement(a.c,{width:"100%",role:"list"},e)},"5S2N":function(e,t,n){var i=n("q1tI"),a=n.n(i),o=n("/MKj"),r=n("VJm5"),s=n("rSLd"),l=n("xOLo"),c=n("BkRI"),d=n.n(c),u=n("/mzO"),p=n("kwau"),h=n("JW66"),m=n("eOdZ"),g=n("5FNA"),f=n("Wer7");var b=n("Sihc"),E=n("Y+p1"),y=n.n(E),_=n("Ye/N"),S=n("TiQD"),w=n("GBVV"),C=n("4cpq"),I=n("CvCA"),v=n("nGHF"),x=n("n6mq");function R(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const k=Object(v.c)(class extends a.a.PureComponent{constructor(...e){super(...e),R(this,"state",{deleting:!1}),R(this,"unmounted",!1),R(this,"handleConfirm",()=>{if(this.state.deleting)return;const{onDeletePin:e}=this.props;this.setState({deleting:!0}),e().then(()=>this.handleDeleteDidComplete()).catch(e=>this.handleDeleteDidComplete(e))}),R(this,"handleDeleteDidComplete",e=>{const{toastManagerContext:t}=this.props;this.unmounted||this.setState({deleting:!1}),e||t.showToast(({onHide:e})=>a.a.createElement(I.a,{onHide:e,text:_.a._("Pin deleted!","User deleted their pin","User deleted their pin")}))})}componentWillUnmount(){this.unmounted=!0}render(){const{onDismiss:e}=this.props,{deleting:t}=this.state;return a.a.createElement(S.b,{heading:_.a._("Are you sure?","Confirm the user wants to delete the pin","Confirm the user wants to delete the pin"),accessibilityModalLabel:_.a._("Are you sure you want to delete this pin?","Accessible label to confirm the user wants to delete the pin","Accessible label to confirm the user wants to delete the pin"),size:"sm",onDismiss:e,footer:a.a.createElement(x.c,{display:"flex",justifyContent:"end",marginLeft:-1,marginRight:-1},a.a.createElement(x.c,{paddingX:1},a.a.createElement(x.d,{onClick:e,text:_.a._("Cancel")})),a.a.createElement(x.c,{paddingX:1},a.a.createElement(C.a,{id:"confirm-delete-pin"},a.a.createElement(w.b,{color:"red",onClick:this.handleConfirm,text:_.a._("Delete Pin"),submitting:t}))))},a.a.createElement(x.c,{padding:4},a.a.createElement(x.K,null,_.a._("Once you delete a Pin, you can't undo it!"))))}});k.displayName="DeletePinConfirmation";var T=k,D=n("V711");function P({board:e,canEdit:t,onBoardChange:n,onBoardCreate:i}){return a.a.createElement(x.c,{md:{display:"flex"},justifyContent:"between",paddingX:4,paddingY:3},a.a.createElement(x.c,{xs:{column:12},md:{column:3},paddingY:2},a.a.createElement(x.q,{htmlFor:"BoardPicker"},a.a.createElement(x.K,{size:"md"},_.a._("Board")))),t?a.a.createElement(x.c,{xs:{column:12},md:{column:8}},a.a.createElement(D.a,{id:"BoardPicker",board:e,onBoardChosen:n,onBoardCreate:i})):a.a.createElement(x.c,{xs:{column:12},md:{column:8},paddingY:2},a.a.createElement(x.K,{size:"md",weight:"bold"},e.name)))}var O=n("Q7uW");function j({canEdit:e,description:t,errorMessage:n,label:a,placeholder:o,onDescriptionChange:r}){return i.createElement(i.Fragment,null,i.createElement(x.j,null),i.createElement(x.c,{md:{display:"flex"},justifyContent:"between",paddingX:4,paddingY:3},i.createElement(x.c,{xs:{column:12},md:{column:3},paddingY:2},i.createElement(x.q,{htmlFor:"DescriptionField"},i.createElement(x.K,{size:"md"},a))),e?i.createElement(x.c,{xs:{column:12},md:{column:8}},i.createElement(x.c,null,i.createElement(x.L,{id:"DescriptionField",placeholder:o,value:t,onChange:r,hasError:(n||"").length>0})),!!n&&i.createElement(x.c,{justifyContent:"center"},i.createElement(O.a,{errorMessage:n,htmlFor:"pin-edit-description"}))):i.createElement(x.c,{xs:{column:12},md:{column:8},paddingY:2},i.createElement(x.K,{size:"md",weight:"bold"},t))))}var B=n("NXrh");function M({board:e,canEdit:t,currentSection:n,onSectionChange:a,onSectionCreate:o,sectionId:r,sectionName:s}){const l=e.id?B.b:B.a;return i.createElement(x.c,{md:{display:"flex"},justifyContent:"between",paddingX:4,paddingY:3},i.createElement(x.c,{xs:{column:12},md:{column:3},paddingY:3},i.createElement(x.q,{htmlFor:"SectionPicker"},i.createElement(x.K,{size:"md"},_.a._("Section","label for editing a Pin's board section","label for editing a Pin's board section")))),t?i.createElement(x.c,{xs:{column:12},md:{column:8}},i.createElement(l,{board:e,onSectionChange:a,selectedSectionId:r,selectedSectionName:s,onSectionCreate:o})):i.createElement(x.c,{xs:{column:12},md:{column:8},paddingY:2},i.createElement(x.K,{size:"md",weight:"bold"},n&&!(e||{}).is_collaborative?n.title:_.a._("No section","default dropdown option for selecting a board section on pin edit","default dropdown option for selecting a board section on pin edit"))))}var L=n("X9vl"),N=n("a9HN"),A=n("xdpg");const F=6;function U(e,t){const n={...Object(N.b)(e),id:String(t)};return i.createElement(L.a,{pinItem:n,index:t})}function z({storyPinData:e,canEdit:t,onClick:n}){const{pages:a}=e,o=a.length,r=o-F>1;return i.createElement(x.c,{md:{display:"flex"},justifyContent:"between",paddingX:4,paddingY:3},i.createElement(x.c,{xs:{column:12},md:{column:3},paddingY:2},i.createElement(x.K,{size:"md"},_.a._("Pages"))),i.createElement(x.c,{xs:{column:12},md:{column:8},display:"flex"},i.createElement(x.P,{onTouch:n,fullWidth:!1,rounding:2},i.createElement(x.c,{display:"flex"},a.slice(0,F).map((e,t)=>i.createElement(x.c,{marginRight:2,key:`story-pin-page-${e.id}`},U(e,t))),o>F&&i.createElement(x.c,{position:"relative"},U(a[F],F),r&&i.createElement(x.c,{position:"absolute",color:"transparentDarkGray",top:!0,column:12,height:"100%",rounding:2,display:"flex",alignItems:"center",justifyContent:"center"},i.createElement(x.K,{color:"white",weight:"bold"},Object(A.i)(_.a._("+{{ pageCount }}","+N count, indeicating there are N more pages in Story Pin","+N count, indeicating there are N more pages in Story Pin"),{pageCount:o-F}))))))))}function Y({canEdit:e,onTitleChange:t,title:n,errorMessage:a}){return i.createElement(i.Fragment,null,i.createElement(x.j,null),i.createElement(x.c,{md:{display:"flex"},justifyContent:"between",paddingX:4,paddingY:3},i.createElement(x.c,{xs:{column:12},md:{column:3},paddingY:2},i.createElement(x.q,{htmlFor:"TitleField"},i.createElement(x.K,{size:"md"},_.a._("Title","Label for editing title of pin","Label for editing title of pin")))),i.createElement(x.c,{xs:{column:12},md:{column:8}},e?i.createElement(i.Fragment,null,i.createElement(x.c,null,i.createElement(x.M,{hasError:(a||"").length>0,id:"TitleField",onChange:t,size:"lg",value:n})),!!a&&i.createElement(x.c,{justifyContent:"center"},i.createElement(O.a,{errorMessage:a,htmlFor:"pin-edit-title"}))):i.createElement(x.c,{xs:{column:12},md:{column:8},paddingY:2},i.createElement(x.K,{size:"md",weight:"bold"},n)))))}function H({onChangeWebsite:e,link:t,errorMessage:n}){return i.createElement(i.Fragment,null,i.createElement(x.j,null),i.createElement(x.c,{md:{display:"flex"},justifyContent:"between",paddingX:4,paddingY:3},i.createElement(x.c,{xs:{column:12},md:{column:3},paddingY:2},i.createElement(x.q,{htmlFor:"WebsiteField"},i.createElement(x.K,{size:"md"},_.a._("Website")))),i.createElement(x.c,{xs:{column:12},md:{column:8}},i.createElement(x.c,null,i.createElement(x.M,{hasError:(n||"").length>0,id:"WebsiteField",onChange:e,size:"lg",value:t})),!!n&&i.createElement(x.c,{justifyContent:"center"},i.createElement(O.a,{errorMessage:n,htmlFor:"pin-edit-website"})))))}var q=n("TN0d"),V=n("Wrea"),W=n("XCz/"),X=n("U4JR"),K=n("NjDU"),Q=n("dtw8"),G=n("zLLH"),$=n("fArA"),J=n("c50B"),Z=n("VqlB");function ee(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function te(e){return Boolean(e&&e.trim().length)}function ne(e,t){const n=te(e),i=te(t);return(n||i)&&e!==t}const ie=(e,t)=>({field_set_key:"detailed",id:e,preserve_component_state:t});t.a=Object($.compose)(Q.withRouter,Object(G.c)({key:"pinResource",name:"PinResource",options:e=>ie(e.pinId,!0)}),Object(o.connect)((function(e,t){const{advertiser:n,viewer:i}=e;return i.isAuth&&n&&n.owner_user_id!==i.id?{advertiser_id:n.id}:{}}),e=>({invalidatePinResource:t=>e(Object(f.f)("PinResource",ie(t,!0))),changeBoardPinCount:t=>e(Object(V.d)(t)),changeUserPinCount:t=>e(Object(K.b)(t)),completeResourceFetch:t=>e(Object(f.b)("PinResource",ie(t.id,!1),t)),pinMoved:Object($.bindActionCreators)(Z.b,e)})))(class extends i.Component{constructor(...e){super(...e),ee(this,"state",{board:this.props.pinResource.data&&this.props.pinResource.data.board||null,commentsDisabled:this.props.pinResource.data&&this.props.pinResource.data.comments_disabled||!1,description:this.props.pinResource.data&&this.props.pinResource.data.description.trim()||"",apiErrorMessage:null,link:this.props.pinResource.data&&this.props.pinResource.data.link||"",photosDisabled:this.props.pinResource.data&&this.props.pinResource.data.did_it_disabled||!1,sectionId:this.props.pinResource.data&&this.props.pinResource.data.section&&this.props.pinResource.data.section.id||null,sectionName:this.props.pinResource.data&&this.props.pinResource.data.section&&this.props.pinResource.data.section.title||null,showDeleteConfirmation:!1,carousel_data:this.props.pinResource.data&&this.props.pinResource.data.carousel_data||null,title:this.props.pinResource.data&&this.props.pinResource.data.title||"",userNote:this.props.pinResource.data&&this.props.pinResource.data.unified_user_note&&this.props.pinResource.data.unified_user_note.trim()||"",isProcessing:!1,currentIndex:void 0!==this.props.carouselSlotCurrentIndex?this.props.carouselSlotCurrentIndex:this.props.pinResource.data&&this.props.pinResource.data.carousel_data&&this.props.pinResource.data.carousel_data.index||0,shouldApplyTextToAll:!1,shouldDisableSave:!1,shouldShowCarouselSliders:!1,shouldShowValidationTitleError:!1,shouldShowValidationDescriptionError:!1,shouldShowValidationLinkFormatError:!1,shouldShowGenericUpdateError:!1}),ee(this,"onClickDeleteButton",()=>this.setState({showDeleteConfirmation:!0})),ee(this,"onHideConfirmation",()=>this.setState({showDeleteConfirmation:!1})),ee(this,"updateCarouselSlotIndex",()=>{const{carouselSlotCurrentIndex:e}=this.props;this.setState({currentIndex:void 0!==e?e:this.props.pinResource.data&&this.props.pinResource.data.carousel_data&&this.props.pinResource.data.carousel_data.index||0})}),ee(this,"handleBoardChange",e=>{const{board:{id:t}}=this.state;e.id!==t&&this.setState({board:e,sectionId:null,sectionName:null})}),ee(this,"createBoard",e=>{const{board:t}=this.state;if(!t.id&&t.name&&e){const{dispatch:n}=this.props;n(function(e,t){const n={name:e,privacy:h.a.BoardPrivacy.PUBLIC};return e=>m.a.create("BoardResource",n).callCreate().then(n=>{const i=n.resource_response.data;return e(t.username&&Object(f.f)("BoardsResource",Object(g.a)(t.username,!1))),i})}(t.name,e)).then(e=>{if(this._isMounted){const{sectionId:t,sectionName:n}=this.state;!t&&n?(this.setState({board:e}),this.createSection()):(this.handleBoardChange(e),this.handleSave())}})}}),ee(this,"handleBoardCreateClick",e=>{if(!e)return;const t={name:e,privacy:h.a.BoardPrivacy.PUBLIC};this.setState({board:t,sectionId:null,sectionName:null})}),ee(this,"createSection",()=>{const{board:e,sectionName:t}=this.state;if(!t)return;if(!e.id)return void this.createBoard();const n={boardId:e.id,name:t},{dispatch:i}=this.props;i(Object(b.a)(n)).then(e=>{this._isMounted&&(this.setState({sectionId:e&&e.id||null,sectionName:e&&e.title||null}),this.handleSave())}).catch(e=>{this.setState({shouldShowGenericUpdateError:!0,apiErrorMessage:e.message})})}),ee(this,"handleSectionCreateClick",e=>{if(0===e.length)return;const{board:t}=this.state;t&&this.setState({sectionId:null,sectionName:e})}),ee(this,"handleSectionChange",e=>this.setState({sectionId:e&&e.id||null,sectionName:e&&e.title||null,shouldShowGenericUpdateError:!1})),ee(this,"handleDeletePin",()=>{const{pinResource:{data:e},pinId:t,onDelete:n,onHide:i,changeBoardPinCount:a,changeUserPinCount:o,advertiser_id:r}=this.props,s={...r?{advertiser_id:r}:{},id:t};return m.a.create("PinResource",s).callDelete().then(()=>{if(this._isMounted){if(!e)return;const{board:{id:r},pinner:{id:s},section:l}=e;a({boardId:r,sectionId:l&&l.id||void 0,increment:-1}),o({userId:s,increment:-1}),q.a.instance.publish(r,"pinDeleted",t),q.a.instance.publish(s,"pinDeleted"),q.a.instance.publish(t,"pinDeleted"),i(),n&&n()}})}),ee(this,"sanitizeCarouselData",e=>{let{carousel_data:t}=this.state;if(e&&(t=e),t){const{carousel_slots:e}=t;if(e){const t={carousel_slots:[]};return e.forEach(e=>{const n={};n.description=e.details||"",n.title=e.title||"",n.link=e.link||"",t.carousel_slots.push(n)}),t}}return null}),ee(this,"triggerBoardAndSectionCreate",e=>()=>{const{board:t,sectionId:n,sectionName:i}=this.state;!t.id&&t.name?this.createBoard(e):!n&&i?this.createSection():this.handleSave()}),ee(this,"handleSave",()=>{this.setState({isProcessing:!0});const{advertiser_id:e,pinId:t,pinResource:{data:n},invalidatePinResource:i,completeResourceFetch:a,onHide:o}=this.props;if(!n)return;const{board:r,comments_disabled:s,did_it_disabled:l,title:c,description:d,link:u,section:p,carousel_data:h}=n,{carousel_data:g,shouldShowValidationLinkFormatError:f}=this.state;let b;if(g){const e=this.sanitizeCarouselData();e&&(b=JSON.stringify(e))}const{board:E,commentsDisabled:_,currentIndex:S,photosDisabled:w,title:C,description:I,sectionId:v,carousel_data:x}=this.state,R=E||r,k=f?u:this.state.link,T={board_id:R.id,board_section_id:v,carousel_data_json:b,description:I,disable_comments:_,disable_did_it:w,id:t,link:k,title:C,...e?{advertiser_id:e}:{}},D=p&&p.id||null,P=R.id,O=r.id,j=O!==P,B=(Boolean(D)||Boolean(v))&&D!==v,M=ne(c,C),L=ne(d,I),N=ne(u,k),A=Boolean(x)&&Boolean(h)&&!y()(x,h);j||B||M||L||N||A||(s!==_||l!==w)?m.a.create("PinResource",T).callUpdate().then(({resource_response:e})=>{if(this._isMounted){const{changeBoardPinCount:t,onSubmit:n,pinId:r,pinMoved:s,view:l,viewParameter:c}=this.props;(j||B)&&P&&O&&(s({selectedPinIds:[r],source:{boardId:O,sectionId:D},target:{boardId:P,sectionId:v}}),t({boardId:P,sectionId:v||void 0,increment:1}),t({boardId:O,sectionId:D||void 0,increment:-1})),n&&P&&R.url&&n({boardId:P,title:R.name,sectionId:v,url:R.url}),o(),i(r);const{data:u}=e;u.carousel_data&&(u.carousel_data.index=S),a(u);const p={};p.objectId=r,j&&(p.board_was_modified=!0),!j&&B&&(p.board_section_was_modified=!0),L&&(p.original_pin_description=d,p.edited_pin_description=I),A&&(p.original_carousel_data=JSON.stringify(this.sanitizeCarouselData(h)),p.edited_carousel_data=JSON.stringify(this.sanitizeCarouselData(x))),Object(X.a)(2,{component:208,view:l,viewParameter:c,...p})}}).catch(()=>{const{shouldShowValidationTitleError:e,shouldShowValidationDescriptionError:t,shouldShowValidationLinkFormatError:n}=this.state;this.setState({isProcessing:!1,shouldShowGenericUpdateError:!e&&!t&&!n})}):(o(),i(t)),this.setState({isProcessing:!1})}),ee(this,"handleTextChanges",(e,t)=>{const{carousel_data:n}=this.state;if(!n)return;const i=d()(n),{carousel_slots:a=[]}=i,{currentIndex:o,shouldApplyTextToAll:r,description:s,link:l,title:c}=this.state,u=this.valueIsValidForType(e,t);switch(r?a.forEach(n=>n[t]=e):a[o]&&(a[o][t]=e),t){case"details":const t=0===o?e:s;this.setState({description:t,carousel_data:i||null,shouldShowValidationDescriptionError:!u,shouldShowGenericUpdateError:!1});break;case"link":const n=0===o?e:l;this.setState({link:n,carousel_data:i||null,shouldShowValidationLinkFormatError:!u,shouldShowGenericUpdateError:!1});break;case"title":const a=0===o?e:c;this.setState({title:a,carousel_data:i||null,shouldShowValidationTitleError:!u,shouldShowGenericUpdateError:!1})}}),ee(this,"handleDescriptionChange",({value:e})=>{const t=this.valueIsValidForType(e,"description");this.setState({description:e,userNote:e,shouldShowValidationDescriptionError:!t,shouldShowGenericUpdateError:!1})}),ee(this,"handleCarouselDetailsChange",({value:e})=>{this.handleTextChanges(e,"details")}),ee(this,"handleTitleChange",({value:e})=>{const t=this.valueIsValidForType(e,"title");this.setState({title:e,shouldShowValidationTitleError:!t,shouldShowGenericUpdateError:!1})}),ee(this,"handleCarouselTitleChange",({value:e})=>{this.handleTextChanges(e,"title")}),ee(this,"valueIsValidForType",(e,t)=>{switch(t){case"details":case"description":return e.length<=500;case"link":return e.length>=0&&0===Object(J.p)([Object(J.o)({message:_.a._("Not a valid url.","Validation error for an improperly formated url","Validation error for an improperly formated url")})],e).length;case"title":return e.length<=100;default:return!0}}),ee(this,"handleWebsiteChange",({value:e})=>{const t=this.valueIsValidForType(e,"link");this.setState({link:e,shouldDisableSave:!t,shouldShowValidationLinkFormatError:!t,shouldShowGenericUpdateError:!1})}),ee(this,"handleCarouselWebsiteChange",({value:e})=>{this.handleTextChanges(e,"link")}),ee(this,"handleCommentChange",e=>this.setState({commentsDisabled:!e.value})),ee(this,"handlePhotoChange",e=>this.setState({photosDisabled:!e.value})),ee(this,"handleShouldApplyToAll",e=>{if(e){const{currentIndex:t,carousel_data:n}=this.state;if(!n)return;const i=d()(n),{carousel_slots:a}=i,{details:o,link:r,title:s}=a[t];a.forEach(e=>{e.details=o,e.title=s,e.link=r}),this.setState({carousel_data:i,shouldApplyTextToAll:e})}else this.setState({shouldApplyTextToAll:e})}),ee(this,"handleCarouselSlider",e=>{const{carousel_data:t}=this.state,n=t&&t.carousel_slots&&t.carousel_slots.length||1;e>=0&&e<n&&this.setState({currentIndex:e})}),ee(this,"handleClickStoryPinPages",()=>{const{pinResource:{data:e},router:t}=this.props;e&&t.push(`/story-pin-builder/${e.id}/edit`)}),ee(this,"handleMouseEnter",()=>{this.setState({shouldShowCarouselSliders:!0})}),ee(this,"handleMouseLeave",()=>{this.setState({shouldShowCarouselSliders:!1})})}componentDidMount(){this._isMounted=!0,this.updateCarouselSlotIndex()}UNSAFE_componentWillReceiveProps(e){const{pinResource:{data:t},carouselSlotCurrentIndex:n}=e;t&&this.setState({board:t.board,commentsDisabled:t.comments_disabled,description:t.description&&t.description.trim(),link:t.link,photosDisabled:t.did_it_disabled,sectionId:(t.section||{}).id,sectionName:(t.section||{}).title,title:t.title,userNote:t.unified_user_note,carousel_data:t.carousel_data,currentIndex:void 0!==n?n:t.carousel_data&&t.carousel_data.index||0,shouldApplyTextToAll:!1})}componentWillUnmount(){this._isMounted=!1}generateIndexIndicator(){const{currentIndex:e,carousel_data:t}=this.state,n=t&&t.carousel_slots&&t.carousel_slots.length||1;return n<2?"":a.a.createElement(x.c,{direction:"row",padding:2},a.a.createElement(x.q,{htmlFor:"CardsIndex"},a.a.createElement(x.K,{size:"md"},e+1,"/",n)))}render(){const{disableDelete:e,onHide:t,pinResource:n,pinId:i,useUnifiedDescription:o}=this.props,{apiErrorMessage:c,board:d,commentsDisabled:h,description:m,link:g,photosDisabled:f,sectionId:b,sectionName:E,showDeleteConfirmation:y,title:w,userNote:I,isProcessing:v,carousel_data:R,shouldApplyTextToAll:k,currentIndex:D,shouldDisableSave:B,shouldShowCarouselSliders:L,shouldShowValidationTitleError:N,shouldShowValidationDescriptionError:A,shouldShowValidationLinkFormatError:F,shouldShowGenericUpdateError:U}=this.state,q=n.data||{},V=R&&R.carousel_slots&&R.carousel_slots.length>0&&R.carousel_slots[D]||{},{details:X="",link:K="",title:Q=""}=V;if(y)return a.a.createElement(T,{onDeletePin:this.handleDeletePin,onDismiss:this.onHideConfirmation});const G=!(!q||!q.story_pin_data_id),$=R&&R.carousel_slots&&R.carousel_slots.length>1,J=$?_.a._("Title too long. Make sure all cards' titles have less than 100 characters","Title entered is too long while editing a carousel pin and/or one of its pins","Title entered is too long while editing a carousel pin and/or one of its pins"):_.a._("Title too long. Make sure title has less than 100 characters","Title entered is too long while editing a pin","Title entered is too long while editing a pin"),Z=$?_.a._("Description too long. Make sure all cards' descriptions have less than 500 characters","Description entered is too long while editing a carousel pin and/or one of its pins","Description entered is too long while editing a carousel pin and/or one of its pins"):_.a._("Description too long. Make sure description has less than 500 characters","Description entered is too long while editing a pin","Description entered is too long while editing a pin"),ee=$?_.a._("Note too long. Make sure all cards' notes have less than 500 characters","User note entered is too long while editing a carousel pin and/or one of its pins","User note entered is too long while editing a carousel pin and/or one of its pins"):_.a._("Note too long. Make sure note has less than 500 characters","User note entered is too long while editing a pin","User note entered is too long while editing a pin"),te=$?_.a._("Need to provide a valid URL. Make sure all cards' links are valid","Invalid URL/link provided while editing a carousel pin and/or one of its pins","Invalid URL/link provided while editing a carousel pin and/or one of its pins"):_.a._("Need to provide a valid URL. Make sure the link is valid","Invalid URL/link provided while editing a pin","Invalid URL/link provided while editing a pin"),ne=q&&(q.access||[]).includes("write")||this.props.canEdit,ie=e=>ne&&!q.is_repin&&!(q.aggregated_pin_data&&q.aggregated_pin_data.is_shop_the_look)&&!G&&($||!R)&&(q.native_creator&&q.native_creator.id===e.id||$&&q.pinner.id===e.id||q.link_domain&&q.link_domain.official_user&&q.link_domain.official_user.id===e.id||!!q.domain&&q.pinner&&q.pinner.domain_url&&q.pinner.domain_url.includes(q.domain)),ae=e=>o&&!ie(e),oe=e=>ae(e)?ee:Z,re=e=>$?X:ae(e)?I:m;return a.a.createElement(S.b,{heading:_.a._("Edit this Pin","Edit a previously saved pin","Edit a previously saved pin"),accessibilityModalLabel:_.a._("Edit your previously saved pin","Accessible label for edit previously saved pin modal","Accessible label for edit previously saved pin modal"),size:"lg",onDismiss:t,footer:a.a.createElement(x.c,{display:"flex",justifyContent:"between",marginLeft:-1,marginRight:-1},a.a.createElement(x.c,null,a.a.createElement(C.a,{id:"delete-pin-button"},a.a.createElement(x.d,{text:_.a._("Delete"),onClick:this.onClickDeleteButton,disabled:e}))),U&&a.a.createElement(x.c,{display:"flex",marginLeft:2,marginTop:2,justifyContent:"center"},a.a.createElement(O.a,{errorMessage:c||_.a._("Sorry! There was an error editing your Pin.","Toast for pin edit error","Toast for pin edit error"),htmlFor:"pin-edit-generic-error"})),a.a.createElement(p.a,null,e=>a.a.createElement(x.c,{display:"flex",justifyContent:"between",marginLeft:-2,marginRight:-2},a.a.createElement(x.c,{paddingX:2},a.a.createElement(x.d,{text:_.a._("Cancel"),onClick:t})),a.a.createElement(x.c,{paddingX:2,"data-test-id":"edit-pin-save"},a.a.createElement(x.d,{text:_.a._("Save"),color:"red",onClick:this.triggerBoardAndSectionCreate(e),disabled:B})))))},!n.isLoaded||v?a.a.createElement(x.c,{paddingX:12,paddingY:9},a.a.createElement(x.G,{accessibilityLabel:_.a._("loading","Accessible label for the edit pin loading icon","Accessible label for the edit pin loading icon"),show:!0})):a.a.createElement(p.a,null,e=>a.a.createElement(x.c,{md:{display:"flex"},justifyContent:"between",minHeight:350,paddingX:4},a.a.createElement(x.c,{xs:{column:12},md:{column:9}},a.a.createElement(P,{board:d||q.board,canEdit:ne,onBoardChange:this.handleBoardChange,onBoardCreate:this.handleBoardCreateClick}),a.a.createElement(M,{board:d||q.board,canEdit:ne,currentSection:q.section,onSectionChange:this.handleSectionChange,sectionId:b,sectionName:E,onSectionCreate:this.handleSectionCreateClick}),ae(e)?null:a.a.createElement(Y,{canEdit:ne,onTitleChange:$?this.handleCarouselTitleChange:this.handleTitleChange,title:$?Q:w,errorMessage:N?J:""}),o&&q.pinner.id!==e.id?null:a.a.createElement(j,{canEdit:ne,description:re(e)||"",errorMessage:A?oe(e):"",label:ae(e)?_.a._("Note","Label for editing user note","Label for editing user note"):_.a._("Description","Label for editing description","Label for editing description"),placeholder:ae(e)?_.a._("Write a note about this Pin...","Placeholder for editing user note","Placeholder for editing user note"):_.a._("Tell us about this Pin...","Placeholder for editing description","Placeholder for editing description"),onDescriptionChange:$?this.handleCarouselDetailsChange:this.handleDescriptionChange}),ie(e)&&a.a.createElement(H,{link:$?K:g,onChangeWebsite:$?this.handleCarouselWebsiteChange:this.handleWebsiteChange,errorMessage:F?te:""}),$&&a.a.createElement(x.c,{display:"flex",justifyContent:"end",paddingX:4,paddingY:3,alignItems:"end"},a.a.createElement(x.c,{paddingY:2},a.a.createElement(x.q,{htmlFor:"applyTextToAll"},a.a.createElement(x.K,null,_.a._("Apply text to all","Apply title, description, link to all cards","Apply title, description, link to all cards")))),a.a.createElement(x.c,{paddingX:2,paddingY:2},a.a.createElement(x.I,{onChange:e=>this.handleShouldApplyToAll(e.value),id:"applyTextToAll",switched:k}))),a.a.createElement(W.a,{name:"web_pin_builder_story_pin",activate:!0},({anyEnabled:t})=>{const{native_creator:n}=q,i=n&&n.id===e.id;return G&&t&&i&&!!q.story_pin_data&&a.a.createElement(x.c,null,a.a.createElement(z,{storyPinData:q.story_pin_data,canEdit:ne,onClick:this.handleClickStoryPinPages}))}),q.can_delete_did_it_and_comments&&a.a.createElement(u.a,{commentsDisabled:h,onCommentChange:this.handleCommentChange,onPhotoChange:this.handlePhotoChange,photosDisabled:f})),a.a.createElement(x.c,{paddingX:4,paddingY:3,justifyContent:"center",direction:"column"},$?this.generateIndexIndicator():"",a.a.createElement(x.u,{width:236},a.a.createElement(x.c,{onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave},a.a.createElement(x.u,{rounding:2,wash:!0},$&&L&&a.a.createElement(x.c,{width:"100%",height:"100%",display:"inlineBlock",position:"absolute",dangerouslySetInlineStyle:{__style:{zIndex:10,background:"rgba(0, 0, 0, 0.3)"}}},a.a.createElement(l.default,{handleCarouselSwipe:this.handleCarouselSlider,carouselIndex:D,carouselData:R,pinId:i,isEditMode:!0})),$?a.a.createElement(r.a,{carouselIndex:D,isCloseup:!1,carouselData:R,pinId:i,isEditMode:!0}):a.a.createElement(x.p,{alt:m,color:"#efefef",naturalHeight:q.images["474x"].height,src:q.images["474x"].url,naturalWidth:q.images["474x"].width})),$&&a.a.createElement(s.default,{carouselIndex:D,carouselData:R,pinId:i,handleCarouselSwipe:this.handleCarouselSlider,isEditMode:!0,variant:"legacy"})))))))}})},"8mez":function(e,t,n){function i(e,t,n){return{type:"PIN_BUILDER_ADD_PIN_DRAFT",payload:{pinDraftId:e,pinDraft:t,options:n}}}n.d(t,"a",(function(){return i}))},LeWa:function(e,t,n){n.d(t,"c",(function(){return o})),n.d(t,"b",(function(){return r}));n("q1tI");var i=n("QkVN"),a=n.n(i);const o={text:"",srcUrl:"",canonicalUrl:"",imageSignature:"",imageUrl:"",isFetching:!1},r={blockIds:[],canvasJson:null,description:"",descriptionError:null,layout:null,linkBlock:o,linkError:null,media:null,selectedBlockId:null,signals:{},title:"",titleError:null};t.a=(e=r,t)=>{switch(t.type){case"PIN_DRAFT_ADD_STORY_PIN_ITEM":case"STORY_PIN_ITEM_UPDATE_DATA":{const{pinItem:n}=t.payload;return{...e,...n}}case"STORY_PIN_ITEM_SET_DESCRIPTION":{const{description:n}=t.payload;return{...e,description:n}}case"STORY_PIN_ITEM_SET_DESCRIPTION_ERROR":{const{descriptionError:n}=t.payload;return{...e,descriptionError:n}}case"STORY_PIN_ITEM_UPDATE_LINK_BLOCK":{const{linkBlock:n}=t.payload;return{...e,linkBlock:{...e.linkBlock,...n}}}case"STORY_PIN_ITEM_SET_LINK_ERROR":{const{linkError:n}=t.payload;return{...e,linkError:n}}case"STORY_PIN_ITEM_SET_MEDIA":{const{media:n}=t.payload;return{...e,media:n,canvasJson:null}}case"STORY_PIN_ITEM_UPDATE_MEDIA":{const{media:n}=t.payload;return{...e,media:e.media?a()({},e.media,n):null}}case"STORY_PIN_ITEM_SET_TITLE":{const{title:n}=t.payload;return{...e,title:n}}case"STORY_PIN_ITEM_SET_TITLE_ERROR":{const{titleError:n}=t.payload;return{...e,titleError:n}}case"STORY_PIN_ITEM_SET_EDITED_IMAGE":{const{editedMedia:n,canvasJson:i}=t.payload;return{...e,media:n,canvasJson:i}}case"STORY_PIN_ITEM_SET_SELECTED_BLOCK_ID":{const{blockId:n}=t.payload;return{...e,selectedBlockId:n}}case"STORY_PIN_ITEM_ADD_BLOCK":{const{blockId:n}=t.payload,{blockIds:i}=e;return{...e,blockIds:[...i,n]}}case"STORY_PIN_ITEM_REMOVE_BLOCK":{const{blockId:n}=t.payload,{blockIds:i}=e;return{...e,blockIds:[...i.filter(e=>e!==n)]}}default:return e}}},MfYO:function(e,t,n){n.d(t,"b",(function(){return i})),n.d(t,"e",(function(){return a})),n.d(t,"c",(function(){return o})),n.d(t,"d",(function(){return r})),n.d(t,"f",(function(){return s})),n.d(t,"l",(function(){return l})),n.d(t,"g",(function(){return c})),n.d(t,"h",(function(){return d})),n.d(t,"k",(function(){return u})),n.d(t,"j",(function(){return p})),n.d(t,"i",(function(){return h})),n.d(t,"a",(function(){return m}));const i=20,a=375,o=a-40,r=665,s=72,l=40,c=10,d=28,u=l+2*c,p=s/4,h=840,m=`${a}px 128px`},NXrh:function(e,t,n){n.d(t,"a",(function(){return E}));var i=n("q1tI"),a=n.n(i),o=n("/MKj"),r=n("Sihc"),s=n("Ye/N"),l=n("rrvb"),c=n("fArA"),d=n("0BOE"),u=n("jdx6"),p=n("qyR9"),h=n("zLLH"),m=n("n6mq");function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const f="NO_SECTION_VALUE";function b({section:e,hovered:t,searchQuery:n}){return a.a.createElement(m.c,null,a.a.createElement(m.c,{color:t?"lightGray":"white",display:"flex",padding:2,rounding:2},a.a.createElement(m.c,{flex:"grow"},a.a.createElement(m.K,{weight:"bold"},Object(u.b)(n,e.title)))),e.id===f&&a.a.createElement(m.j,null))}const E=class extends i.Component{constructor(...e){super(...e),g(this,"state",{searchQuery:""}),g(this,"getPickerSections",()=>{const{searchQuery:e}=this.state,{sectionsResource:t,mergingFromSectionId:n}=this.props;let i=t&&t.data||[];return i=n?i.filter(e=>e.id!==n):[{id:f,title:s.a._("No section","default dropdown option for selecting a board section on pin edit","default dropdown option for selecting a board section on pin edit")},...i],e.length>=p.a&&(i=Object(d.a)(i,e,"title")),[{items:i}]}),g(this,"createBtnDisabled",()=>{const{sectionsResource:e}=this.props,{searchQuery:t}=this.state;return!(!e||!e.data)&&e.data.some(e=>e.title.toLowerCase()===t.toLocaleLowerCase())}),g(this,"handleSectionCreate",()=>{const{board:e,onSectionChange:t,sectionsResource:n,dispatch:i,onSectionCreate:a}=this.props,{searchQuery:o}=this.state;a?a(o):i&&e.id&&i(Object(r.a)({boardId:e.id,name:o})).then(e=>{n&&n.refreshData(),this.setState({searchQuery:""}),t(e)})}),g(this,"handleSectionSelected",e=>{const{onSectionChange:t}=this.props;e.id===f?(t(null),this.setState({searchQuery:""})):(t(e),this.setState({searchQuery:""}))}),g(this,"handleSearchQueryUpdate",e=>{this.setState({searchQuery:e})}),g(this,"renderRow",({item:e,hovered:t})=>{const{searchQuery:n}=this.state;return a.a.createElement(b,{section:e,hovered:t,searchQuery:n})})}componentDidUpdate(e){const t=e.selectedSectionId,{selectedSectionId:n}=this.props;if(n!==t){const{sectionsResource:e}=this.props;e&&e.refreshData()}}render(){const{sectionsResource:e,selectedSectionId:t,mergingFromSectionId:n,selectedSectionName:i}=this.props,{searchQuery:o}=this.state;let r=n?s.a._("Pick a section","default dropdown option for selecting a board section to merge to","default dropdown option for selecting a board section to merge to"):s.a._("No section","default dropdown option for selecting a board section on pin edit","default dropdown option for selecting a board section on pin edit");if(t){let n;e&&e.data&&(n=e.data.find(e=>e.id===t)),r=n&&n.title||r}else i&&(r=i);return a.a.createElement(m.c,null,a.a.createElement(m.G,{accessibilityLabel:s.a._("loading section picker","accessibility text for loading spinner","accessibility text for loading spinner"),show:!!e&&!e.isLoaded}),(!e||e&&e.isLoaded)&&a.a.createElement(l.a,{dropdownValue:r,onCreate:n?null:this.handleSectionCreate,onSearchQueryUpdate:this.handleSearchQueryUpdate,onSelect:this.handleSectionSelected,renderRow:this.renderRow,searchQuery:o,sections:this.getPickerSections(),createBtnDisabled:this.createBtnDisabled()}))}};t.b=Object(c.compose)(Object(o.connect)(),Object(h.c)({name:"BoardSectionsRepinResource",key:"sectionsResource",options:e=>({board_id:e.board.id})},{allowStale:!1}))(E)},Pus6:function(e,t,n){var i=n("q1tI"),a=n("R6wO"),o=n("3gA6"),r=n("n6mq");t.a=({bold:e,description:t,descriptionColor:n,external:s,hasDividerAfter:l,icon:c,onClick:d,text:u,url:p})=>{const h=i.createElement(r.c,{role:"listitem",overflow:"hidden"},i.createElement(a.a,{bold:e,description:t,descriptionColor:n,icon:c,text:u}));return i.createElement(r.c,null,p?i.createElement(o.b,{to:p,external:s,onClick:d},h):i.createElement(r.P,{onTouch:d,fullWidth:!1},h),l&&i.createElement(r.j,null))}},Q7uW:function(e,t,n){n.d(t,"a",(function(){return o}));var i=n("q1tI"),a=n("n6mq");function o(e){const{htmlFor:t,errorMessage:n}=e;return i.createElement(a.q,{htmlFor:t},i.createElement(a.c,{marginTop:1},i.createElement(a.K,{color:"red",size:"md"},n)))}},V711:function(e,t,n){var i=n("q1tI"),a=n.n(i),o=n("/MKj"),r=n("8cMa"),s=n("kwau"),l=n("JW66"),c=n("Ye/N"),d=n("rrvb"),u=n("zLLH"),p=n("0BOE"),h=n("jdx6"),m=n("Wer7"),g=n("qyR9"),f=n("n6mq"),b=n("fArA"),E=n("oN2T");function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _({board:e,hovered:t,searchQuery:n}){const i=e.privacy===l.a.BoardPrivacy.SECRET;return a.a.createElement(f.c,{color:t?"lightGray":"white",display:"flex",padding:2,rounding:2},a.a.createElement(f.c,{flex:"grow"},a.a.createElement(f.K,{weight:"bold"},Object(h.b)(n,e.name))),a.a.createElement(f.c,{display:"flex",flex:"none",direction:"row"},i&&a.a.createElement(r.a,{type:"secret"}),e.is_collaborative&&a.a.createElement(r.a,{type:"group"})))}t.a=Object(b.compose)(Object(o.connect)((function(e){const{advertiser:t,viewer:n}=e,i=n.isAuth&&t&&t.owner_user_id!==n.id;return{advertiser_id:i?t.id:null,username:i?t.owner_user_id:null}}),(function(e){return{invalidateBoardPickerBoardsResource:()=>{e(Object(m.f)("BoardPickerBoardsResource",{field_set_key:"board_picker"}))},createBoard:t=>e(Object(E.f)(t))}})),Object(u.c)({name:"BoardPickerBoardsResource",key:"boardResource",options:e=>({pin_id:e.pinId,field_set_key:"board_picker",onlyFetchBoards:!0,username:e.username,...e.advertiser_id&&e.username?{advertiser_id:e.advertiser_id,filter:"protected",username:e.username}:{}})},{allowStale:!1}))(class extends i.Component{constructor(e,t){super(e,t),y(this,"getSections",()=>{const{searchQuery:e}=this.state,{boardResource:{data:{all_boards:t}}}=this.props;return e.length>=g.a?[{items:Object(p.a)(t,e)}]:[{items:t}]}),y(this,"createBtnDisabled",()=>{const{boardResource:{data:{all_boards:e}}}=this.props,{searchQuery:t}=this.state;return e.some(e=>e.name.toLowerCase()===t.toLowerCase())}),y(this,"handleBoardCreate",e=>()=>{const{searchQuery:e}=this.state;if(!e)return;const{createBoard:t,invalidateBoardPickerBoardsResource:n,onBoardCreate:i}=this.props;n(),i?i(e):t({name:e,privacy:"public"}).then(e=>{const{onBoardChosen:t}=this.props;t(e)})}),y(this,"handleBoardSelected",e=>{this.props.onBoardChosen(e),this.setState({selectedBoard:e})}),y(this,"handleSearchQueryUpdate",e=>{this.setState({searchQuery:e})}),y(this,"renderRow",({item:e,hovered:t})=>{const{searchQuery:n}=this.state;return a.a.createElement(_,{board:e,hovered:t,searchQuery:n})}),this.state={searchQuery:"",selectedBoard:e.board}}render(){const{boardResource:e,board:t}=this.props,{searchQuery:n,selectedBoard:i}=this.state;let o=c.a._("Select a board","Label for selecting a board in Edit Pin Modal","Label for selecting a board in Edit Pin Modal");return t?o=t.name:i&&(o=i.name),a.a.createElement(f.c,null,a.a.createElement(f.G,{accessibilityLabel:c.a._("loading board picker","accessibility text for loading spinner","accessibility text for loading spinner"),show:!e.isLoaded}),e.data&&a.a.createElement(s.a,null,e=>a.a.createElement(d.a,{dropdownValue:o,onCreate:this.handleBoardCreate(e),onSearchQueryUpdate:this.handleSearchQueryUpdate,onSelect:this.handleBoardSelected,renderRow:this.renderRow,searchQuery:n,sections:this.getSections(),createBtnDisabled:this.createBtnDisabled()})))}})},X9vl:function(e,t,n){n.d(t,"a",(function(){return c}));var i=n("q1tI"),a=n("vgrb"),o=n("MfYO"),r=n("n6mq");const s={width:o.l,height:o.f},l={transition:Object(a.a)({property:"height",duration:"short",timingFunction:"easeOut"})};function c(e){const{index:t,pinItem:n}=e,{description:a,title:c}=n,d=0===t;return i.createElement(i.Fragment,null,i.createElement(r.c,{display:"flex",direction:"column",rounding:2,justifyContent:"center",width:o.l,height:o.f,overflow:"hidden",dangerouslySetInlineStyle:{__style:{backgroundColor:"black"}}},function(e){const{description:t,media:n,title:a}=e,{height:o,src:l,width:c,type:d}=n||{};if(!n)return null;if("localVideo"===d)return i.createElement(i.Fragment,null,i.createElement("video",{muted:!0,src:l,style:s},i.createElement("track",{kind:"captions"})));if(n&&"webVideo"===n.type){const{customCoverImg:e}=n||{};return i.createElement(r.p,{alt:a||t,color:"#FEFEFE",src:e&&e.src||"",naturalHeight:o,naturalWidth:c})}return i.createElement(r.p,{alt:a||t,color:"#FEFEFE",src:l,naturalHeight:o,naturalWidth:c})}(n)),i.createElement(r.c,{height:!c&&!a||d?0:o.j,color:"white",rounding:2,column:12,position:"absolute",bottom:!0,dangerouslySetInlineStyle:{__style:l}}))}},a9HN:function(e,t,n){n.d(t,"b",(function(){return u})),n.d(t,"a",(function(){return p}));var i=n("8mez"),a=n("qfnd"),o=n("xk4V"),r=n.n(o),s=n("q/rS"),l=n("LeWa");function c(e){if(e.image){const{height:t,url:n,width:i}=e.image.images["345x"];return{id:r()(),height:t,src:n,width:i,type:"webImage",signature:e.image_signature}}if(e.video&&e.video.video_list&&e.video.video_list.V_HLSV3_MOBILE){const{height:t,width:n,url:i,thumbnail:a}=e.video.video_list.V_HLSV3_MOBILE;return{id:r()(),width:n,height:t,src:i,customCoverImg:{src:a},type:"webVideo",signature:e.video_signature}}return null}function d(e){var t;if(!e||e.type!==s.a.LINK)return l.c;const{text:n="",src_url:i="",canonical_url:a="",normalized_url:o="",image:r,image_signature:c}=e;return{text:n,srcUrl:i,canonicalUrl:a,normalizedUrl:o,imageUrl:(null===(t=r.images.originals)||void 0===t?void 0:t.url)||r.images["345x"].url,imageSignature:c,isFetching:!1}}function u(e){const t=e.blocks.filter(e=>1===e.block_type)[0],n=e.blocks.filter(e=>0===e.block_type)[0],i=e.blocks.filter(e=>4===e.block_type)[0];return{...l.b,title:t&&t.text||"",description:n&&n.text||"",linkBlock:d(i),media:c(e)}}function p(e){return(t,n)=>{e&&e.story_pin_data&&t(function(e){return(t,n)=>{const{id:o,board:r,section:s,story_pin_data:l}=e,c={mode:"edit",selectedItem:{boardId:r.id,title:s?s.title:r.name,...s?{sectionId:s.id}:{}},type:"story",status:"saved",pinItemIds:[],pinItemIndex:0};t(Object(i.a)(o,c)),l&&l.pages.map(u).forEach((e,n)=>{t(Object(a.a)(o,n.toString(),e,{saveIndex:!0}))})}}(e))}}},dtqy:function(e,t,n){var i=n("q1tI"),a=n.n(i),o=n("/MKj"),r=n("qWlA"),s=n("5S2N"),l=n("fArA"),c=n("XCz/"),d=n("7jH2"),u=n("U4JR");function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.a=Object(l.compose)(Object(o.connect)(({pins:e},{pinId:t,carouselSlotCurrentIndex:n})=>{const{carousel_data:i}=e&&t&&e[t]||{},{index:a}=i||{};return void 0!==n?{carouselSlotCurrentIndex:a||n||0}:{}}),(function(e){return class extends i.PureComponent{constructor(...e){super(...e),p(this,"state",{showEditModal:!1}),p(this,"onHide",()=>{this.setState({showEditModal:!1}),(this.props.onToggleModal||d.A)(!1)}),p(this,"handlePinEditButtonClick",Object(r.a)(e=>{e&&e.stopPropagation();const{component:t,onToggleModal:n}=this.props;(n||d.A)(!0),Object(u.a)(101,{element:3,...t?{component:t}:{}}),this.setState({showEditModal:!0})}))}render(){const{pinId:t,onDelete:n,onSubmit:o,carouselSlotCurrentIndex:r}=this.props,{showEditModal:l}=this.state,d={...this.props,handlePinEditButtonClick:this.handlePinEditButtonClick};return a.a.createElement(i.Fragment,null,a.a.createElement(e,d),l&&a.a.createElement(c.a,{name:"web_unified_description_both"},({anyEnabled:e})=>a.a.createElement(c.a,{name:"web_unified_description_both_perf",activate:!1},({anyEnabled:i})=>a.a.createElement(s.a,{carouselSlotCurrentIndex:r,onDelete:n,onHide:this.onHide,onSubmit:o,pinId:t,useUnifiedDescription:e||i}))))}}}))},pzPq:function(e,t,n){var i=n("xdpg"),a=n("Ye/N");t.a=(e,t)=>{const n=e.link_domain,o=e.tracked_link||e.link||e.images&&e.images.orig&&e.images.orig.url,r=e.rich_metadata,s=e.domain;let l=e.pinner||e.origin_pinner;n&&(l=n.official_user||l);let c="",d="";const u=!(!(r&&r.recipe&&r.recipe.name&&r.recipe.categorized_ingredients)||r.recipe.from_aggregated_data);let p,h;r&&r.products&&r.products[0]&&(p=!!(r&&r.name&&r.offer_summary));const m=e.buyable_product,g=p||m,f=!(!r||!r.article),b=!(!r||!r.tutorial),E=!(!l||!l.username);let y=a.a._("Saved from ","Closeup pin annotation","Closeup pin annotation"),_=E?a.a._("Saved by"):a.a._("Saved from"),S=a.a._("Visit");r&&r.products&&r.products[0]&&r&&r.products[0].name&&r.products[0].offer_summary&&(y=a.a._("Product sold by ","pin annotation","pin annotation"),h=r.products[0].offer_summary),g?(_=a.a._("Sold by"),S=a.a._("Visit"),p&&(c=r.products[0].name)):b?(y=a.a._("Saved from ","pin annotation","pin annotation"),_=E?a.a._("Saved by"):a.a._("Saved from"),S=a.a._("Visit")):u?(y=a.a._("Recipe from ","pin annotation","pin annotation"),_=E?a.a._("Recipe by"):a.a._("Recipe from"),S=a.a._("Make it"),c=r.recipe.name,d=r.closeup_description):f&&(y=a.a._("Article from ","pin annotation","pin annotation"),_=E?a.a._("Article by"):a.a._("Article from"),S=a.a._("Read it"),c=r.title);const w=e.rich_summary;if(!h&&w){let e;w&&w.products&&w.products[0]&&(e=!!(w&&w.products[0].name&&w.products[0].offer_summary))&&(y=a.a._("Product sold by ","pin annotation","pin annotation"))}let C,I;E?(C="/"+l.username+"/",I=l.full_name):(C="/source/"+s,I=r&&r.site_name||s);const v=l&&(l.image_medium_url||l.image_small_url)||e.board&&e.board.image_thumbnail_url,x=i.c(a.a._("More from {{ subtitle }}"),{subtitle:I});return c=t?e.closeup_unified_title:c||e.title,d=t?e.closeup_unified_description:d&&d.trim()||e.closeup_description&&e.closeup_description.trim()||e.description&&e.description.trim(),{actionButtonText:S,image:v,link:C,pinLink:o,pin:e,pinCreditPrefix:y,prefixText:_,subtitle:I,title:x,pinTitle:c,pinDescription:d,pinCategory:e.category}}},qfnd:function(e,t,n){function i(e,t,n,i){return{type:"PIN_DRAFT_ADD_STORY_PIN_ITEM",payload:{pinDraftId:e,pinItemId:t,pinItem:n,options:i}}}n.d(t,"a",(function(){return i}))},qlIy:function(e,t,n){n.r(t);var i=n("q1tI"),a=n.n(i),o=n("Ye/N"),r=n("vepm"),s=n("4cpq"),l=n("dtqy");var c=Object(l.a)(({handlePinEditButtonClick:e})=>a.a.createElement(s.a,{id:"closeup-pin-edit-button"},a.a.createElement(r.a,{accessibilityLabel:o.a._("Edit","edit button on pin","edit button on pin"),onClick:t=>e&&e(t),icon:"edit"}))),d=n("ENn1"),u=n("pzPq"),p=n("/MKj"),h=n("E/VT"),m=n("7w6Q"),g=n("tkfL");const f=()=>m.a.increment("windows.download.blob.error"),b=(e,t,n)=>{const i=new window.Windows.Storage.Pickers.FileSavePicker;i.suggestedStartLocation=window.Windows.Storage.Pickers.PickerLocationId.picturesLibrary;const{extension:a,extensionName:r,name:s}=(e=>{const t=e.split("/"),n=t[t.length-1],i=n.split(".");if(i.length>1){const e=i.pop();return{extension:`.${e}`,extensionName:e.toUpperCase(),name:i.join()}}return{extension:".",extensionName:o.a._("Unknown","Label for file picker drop down when the file type is not known","Label for file picker drop down when the file type is not known"),name:n}})(t);i.suggestedFileName=n||s,i.fileTypeChoices.insert(r,[a]),i.pickSaveFileAsync().then(t=>{t&&(window.Windows.Storage.CachedFileManager.deferUpdates(t),t.openAsync(window.Windows.Storage.FileAccessMode.readWrite).then(t=>{const n=e.msDetachStream();window.Windows.Storage.Streams.RandomAccessStream.copyAsync(n,t).then(()=>{t.flushAsync().done(()=>{n.close(),t.close(),m.a.increment("windows.download.blob.success")},f)},f)},f))})};var E=({filename:e,imgSrc:t,category:n})=>{if(!t)return null;return i.createElement(g.b,{onClick:()=>{((e,t)=>{try{const n=new XMLHttpRequest;n.open("GET",e,!0),n.responseType="blob",n.onreadystatechange=()=>{if(4===n.readyState)if(200!==n.status)m.a.increment("windows.download.blob.nodownload",.1,{status:n.status});else{const i=n.response;b(i,e,t)}},n.send(null)}catch(n){m.a.increment("windows.download.blob.xhrexception",.1,{error:n})}})(t,e)},text:o.a._("Download image","Button to download Pin image","Button to download Pin image")})},y=n("lUXN"),_=n("hFNL"),S=n("LT60"),w=n("kmwA"),C=n("fArA"),I=n("eUcp"),v=n("U4JR"),x=n("pLLR"),R=n("n6mq"),k=n("+PUW");var T=Object(C.compose)(Object(p.connect)(k.c,k.b),x.e)((function({bestPinImgSrc:e,bgColor:t,hideDownload:n,hideEmbed:s,iconColor:l,iconSize:c,isFullAuth:d,onToggle:u,openLoginModal:p,pinCategory:m,pinDescription:f,pinId:b,pinImgSrc:C,pinTitle:x,reportPin:k,requestContext:T,usePortal:D}){const[P,O]=Object(i.useState)(!1),j=Object(i.useRef)(),B=()=>{O(!1)},M=w.a.settings.DEVELOPER_SITE_URL+"/tools/widget-builder/?type=pin&url="+encodeURIComponent(`${w.a.settings.CANONICAL_MAIN_URL}/pin/${b}/`),L=o.a._("More options","Accessible label for more options dropdown","Accessible label for more options dropdown");return a.a.createElement(R.c,{flex:"grow",alignItems:"center",display:"flex"},a.a.createElement(R.c,{ref:j},a.a.createElement(r.a,{accessibilityLabel:L,icon:"ellipsis",onClick:()=>{u&&u(),O(!P),(e=>{Object(v.a)(101,{element:e,component:4,view:3,viewParameter:139})})(981)}})),P&&(()=>{const t=a.a.createElement(R.c,{dangerouslySetInlineStyle:{__style:{zIndex:I.b}}},a.a.createElement(R.k,{anchor:j.current,idealDirection:"down",onDismiss:B,size:"xs"},a.a.createElement(g.a,null,!n&&"undefined"!=typeof window&&"windows"!==Object(_.b)(window)&&e&&a.a.createElement(h.a,{imgSrc:e||"",filename:x||f,category:m},e=>a.a.createElement(g.b,{onClick:e,text:o.a._("Download image","Button to download Pin image","Button to download Pin image")})),!n&&"undefined"!=typeof window&&"windows"===Object(_.b)(window)&&(e||C)&&a.a.createElement(y.a,{name:"web_eg_windows_download_image"},({anyEnabled:t})=>t&&a.a.createElement(E,{imgSrc:e||C||"",filename:x||f,category:m})),a.a.createElement(g.b,{onClick:d?k:p,text:o.a._("Report Pin","Label for report pin action","Label for report pin action")}),!s&&a.a.createElement(g.b,{external:!0,text:o.a._("Embed","Label for embed pin action","Label for embed pin action"),url:M}))));return D?a.a.createElement(S.a,null,a.a.createElement(R.r,null,t)):t})())})),D=n("YxyV"),P=n("7jH2");var O=e=>{const{pin:t,useUnifiedTitleDescription:n,viewParameter:i}=e,{pinTitle:o,pinDescription:r,pinCategory:s}=Object(u.a)(t,n),l=Object(P.p)({pin:t}),{video:c}=Object(P.y)(l)||{},p=!!c;let h;t.images&&(h=t.embed&&"gif"===t.embed.type?t.embed.src:t.images["736x"]&&t.images["736x"].url);const m=!!t.story_pin_data_id,g=Object(D.g)(t);return a.a.createElement(R.c,{"data-test-id":"pin-action-bar"},a.a.createElement(T,{bestPinImgSrc:g,bgColor:"transparent",hideDownload:p||m,iconColor:"gray",iconSize:"md",pinCategory:s,pinDescription:r,pinId:t.id,pinImgSrc:h,pinTitle:o,reportPin:Object(d.a)({pin:t,viewParameter:i,viewType:3}),usePortal:!1}))},j=n("c4Fo"),B=n("XCz/");const M=136;class L extends a.a.Component{constructor(...e){var t,n,i;super(...e),i={paused:!1,showPulsar:!1},(n="state")in(t=this)?Object.defineProperty(t,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[n]=i}componentDidMount(){this.mountPulsar(),this.props.onExperienceMount&&this.experience&&this.props.onExperienceMount(this.experience)}componentWillUnmount(){clearTimeout(this.timer)}mountPulsar(){if(!this.experience)return;const{display_data:e}=this.experience;e.has_pulsar&&this.setState({showPulsar:!0})}renderPulsar(){const{anchor:e}=this.props,{paused:t}=this.state;if(!e)return null;const n=e.getBoundingClientRect(),{height:i,width:o}=n,r=-(M/2+i/2),s=-(M/2-o/2);return a.a.createElement(R.c,{position:"absolute",dangerouslySetInlineStyle:{__style:{zIndex:1,marginTop:r,marginLeft:s,cursor:"pointer",pointerEvents:"none"}}},a.a.createElement(R.A,{paused:t}))}renderFlyout(e){const{anchor:t,flyoutSize:n,idealDirection:i,textOverflow:o}=this.props;return a.a.createElement(B.a,{name:"web_experience_tooltip_no_buttons_show_caret"},({anyEnabled:r})=>a.a.createElement(R.k,{anchor:t,color:"blue",idealDirection:i||"down",onDismiss:()=>{},shouldFocus:!1,size:n,showCaret:r},a.a.createElement(R.c,{column:12,padding:3},a.a.createElement(R.K,{color:"white",overflow:o,weight:"bold"},e))))}render(){const{experienceIds:e,placementId:t,shouldTimeoutDismiss:n}=this.props,{showPulsar:i}=this.state;return a.a.createElement(j.a,{experienceIds:e,placementId:t,type:8},e=>{const{complete:t,dismiss:o,display_data:r}=e;return this.experience=e,r.has_pulsar||r.has_tooltip?(n&&r.disappearTime&&r.disappearTime>0&&(this.timer=setTimeout(()=>(o(),null),r.disappearTime)),a.a.createElement(R.c,{dangerouslySetInlineStyle:{__style:{zIndex:10}}},i&&this.renderPulsar(),r.has_tooltip&&(!r.has_pulsar||this.state.paused)&&this.renderFlyout(r.text))):(t(),null)})}}var N=n("1Vso");const A=20,F={loaded:{opacity:1,transitionDuration:"0.20s",transitionTimingFunction:"cubic-bezier(0, 0, 0.58, 1)",transitionProperty:"transform, opacity",transform:"translate(0, 5px)",transformOrigin:"center"},fade:{opacity:.1,transitionDuration:"0.30s",transitionTimingFunction:"cubic-bezier(0, 0, 0.58, 1)",transitionProperty:"transform, opacity",transform:"translate(0, 5px)",transformOrigin:"center"}};function U({reactionLabel:e,handleHideConfirmation:t}){const[n,o]=Object(i.useState)("loaded"),r=Object(i.useRef)();return Object(i.useEffect)(()=>{r.current=requestAnimationFrame(()=>{setTimeout(()=>o("fade"),1e3),setTimeout(()=>t(),1300)})},[]),a.a.createElement(R.c,{position:"relative",display:"flex",alignItems:"center",justifyContent:"center"},a.a.createElement(R.c,{rounding:"pill",position:"absolute",color:"darkGray",ref:r,height:A,display:"flex",alignItems:"center",justifyContent:"center",paddingY:1,paddingX:2,dangerouslySetInlineStyle:{__style:{...F[n],whiteSpace:"nowrap"}}},a.a.createElement(R.K,{color:"white",size:"sm",weight:"bold",overflow:"normal"},e)))}var z=n("i8i4"),Y=n("eo+c");const H=300,q=80,V=-H/2,W=20,X=40,K=24,Q=-8,G=9,$={icon:{backgroundRepeat:"no-repeat",backgroundSize:"cover"},loading:{opacity:0,transitionDuration:"0.25s",transitionTimingFunction:"ease-out",transitionProperty:"transform, opacity",transform:"scaleX(1) scaleY(1) translateZ(0) translateY(25px)",transformOrigin:"bottom"},loaded:{opacity:1,transitionDuration:"0.2s",transitionTimingFunction:"ease-out",transitionProperty:"transform, opacity",transform:"scaleX(1) scaleY(1)",transformOrigin:"bottom"},clicked:{transition:"transform 0.2s ease-out",transform:`translateY(-30px) scaleX(${98/X}) scaleY(${98/X})`,transformOrigin:"bottom",position:"relative",zIndex:1},flying:{transition:"transform 0.2s ease-out",transformOrigin:"bottom"},label:{transition:"transform 0.2s ease-out",transform:`scale(${X/98})`,transformOrigin:"bottom",whiteSpace:"nowrap"},fading:{opacity:0,transition:"opacity 0.2s ease-out"}},J={boxShadow:"0 9px 26px rgba(0, 0, 0, 0.4)"};function Z({reactionButtonRect:e,handleReactionTrayClick:t}){const[n,o]=Object(i.useState)("loading"),[r,s]=Object(i.useState)(""),[l,c]=Object(i.useState)(),[d,u]=Object(i.useState)(!1),[p,h]=Object(i.useState)({}),[m]=Object(i.useState)(e),g=Object(i.useRef)(),f=Object(i.useRef)({});Object(i.useEffect)(()=>{"loading"===n&&(g.current=requestAnimationFrame(()=>o("loaded"))),(()=>{u(!0);const e={...p};Y.c.forEach(t=>{const n=Object(z.findDOMNode)(f.current[t]);f.current[t]&&n instanceof HTMLElement&&!e[t]&&(e[t]=n.getBoundingClientRect())}),Object.keys(e).length===Y.c.length&&h(e)})(),!l&&d&&(()=>{const e={...l};Y.c.forEach(t=>{const n=p[t],{left:i,top:a}=m,{left:o,top:r}=n,s=i-o+Q,l=a-r+G;e[t]={translateX:s,translateY:l}}),c(e)})()},[d,e]);const b=()=>{"clicked"===n&&r&&(o("flying"),setTimeout(()=>{t(r)},750))},E=Y.c.map((e,t)=>{const{staticAsset:i,animatedAsset:o,label:s,htmlStyle:c,animationStyle:d}=Object(Y.a)(e),u={transitionDelay:`${.08*t}s`,...$[n]},p={...r===e?$.clicked:$.loaded},h={...l&&r===e?{transform:`translateZ(0) translateX(${l[e].translateX}px) translateY(${l[e].translateY}px) scaleX(${K/X}) scaleY(${K/X}) `,...$[n]}:$.fading};let m={};return"loading"===n||"loaded"===n?m={...u}:"clicked"===n?m={...p}:"flying"===n&&(m={...h}),a.a.createElement(R.c,{display:"flex",alignSelf:"center",justifyContent:"between",key:t},a.a.createElement(R.c,{maxHeight:X,maxWidth:X,display:"flex",alignItems:"center",justifyContent:"center",position:"relative",dangerouslySetInlineStyle:{__style:{...m}},ref:t=>{f.current[e]=t}},r!==e&&a.a.createElement(R.c,{position:"absolute",top:!0,left:!0,bottom:!0,right:!0},a.a.createElement(R.c,{width:X,height:X,dangerouslySetInlineStyle:{__style:{backgroundImage:`url(${i})`,backgroundPosiiton:"center",backgroundRepeat:"no-repeat",backgroundSize:"cover"}}})),a.a.createElement(R.c,{display:"flex",alignItems:"center",justifyContent:"center",direction:"column",position:"relative"},a.a.createElement("style",{dangerouslySetInnerHTML:{__html:c}}),r===e&&"clicked"===n&&a.a.createElement(R.c,{rounding:"pill",color:"darkGray",height:W,dangerouslySetInlineStyle:{__style:$.label},display:"flex",alignItems:"center",justifyContent:"center",paddingY:1,paddingX:2},a.a.createElement(R.K,{color:"white",size:"sm",weight:"bold",overflow:"normal"},s)),a.a.createElement("div",{onClick:b,onKeyDown:b,role:"presentation"},a.a.createElement(R.c,{width:X,height:X,display:"flex",alignItems:"center",justifyContent:"center",dangerouslySetInlineStyle:{__style:{...$.icon,...r===e&&"clicked"===n?{animation:d}:{},backgroundImage:`url(${o})`}}})))))});return a.a.createElement(R.c,{position:"absolute",display:"flex",alignItems:"center",justifyContent:"center",dangerouslySetInlineStyle:{__style:{marginLeft:V}}},a.a.createElement(R.c,{display:"flex",alignItems:"center",justifyContent:"center",width:H,height:q,rounding:"pill",color:"flying"===n?"transparent":"white",dangerouslySetInlineStyle:{__style:{..."flying"!==n?J:{}}},onMouseMove:e=>{const{clientX:t}=e;if("flying"!==n){const e=(e=>{let t;return d&&Y.c.forEach(n=>{const i=p[n];if(i&&i.left&&i.right){const{left:a,right:o}=i;e>=a&&e<=o&&(t=n)}}),t||null})(t);e!==r&&s(e),o("clicked")}}},a.a.createElement(R.c,{display:"flex",alignItems:"center",justifyContent:"around",width:"100%",paddingX:5},E)))}var ee=n("eOdZ");function te(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const ne=24,ie=44,ae={base:{borderRadius:"50%"},hovered:{backgroundColor:"rgb(226, 226, 226)"},active:{backgroundColor:"rgb(218, 218, 218)"},focused:{boxShadow:"0 0 0 4px rgba(0, 132, 255, 0.5)",outline:0}};var oe=Object(p.connect)(null,e=>({pinUpdateReactionCount:(t,n,i)=>e(function(e,t,n){return{type:"PIN_UPDATE_REACTION_COUNT",payload:{id:e,increment:t,reactionType:n}}}(t,n,i))}))(class extends i.PureComponent{constructor(...e){super(...e),te(this,"state",{clickedReaction:0,isConfirmationShowing:!1,isReactionTrayShowing:!1,reactionButtonRect:null,useInitialReaction:!0}),te(this,"reactionButtonRef",a.a.createRef()),te(this,"onResize",()=>{this.setReactionButtonRect(),this.handleOffHover()}),te(this,"onScroll",()=>{this.setReactionButtonRect(),this.handleOffHover()}),te(this,"handleExperienceMount",e=>{e&&e.complete&&(501977===e.experience_id||501995===e.experience_id)&&(this.tooltipExperience=e)}),te(this,"handleReact",(e=7)=>{const{pinId:t,pinUpdateReactionCount:n}=this.props,i={pin_id:t,reaction_type:e};this.setState({clickedReaction:e,useInitialReaction:!1}),n(t,!0,e),ee.a.create("ReactionsResource",i).callUpdate()}),te(this,"handleUnreact",()=>{const{pinId:e}=this.props,t={pin_id:e};this.setState({clickedReaction:0,useInitialReaction:!1}),ee.a.create("ReactionsResource",t).callDelete()}),te(this,"setReactionButtonRect",()=>{if(this.reactionButtonRef.current&&this.reactionButtonRef.current instanceof HTMLElement){const e=this.reactionButtonRef.current.getBoundingClientRect();this.setState({reactionButtonRect:e})}}),te(this,"handleOnHover",()=>{this.setState(e=>({isReactionTrayShowing:!e.isReactionTrayShowing})),this.tooltipExperience&&this.tooltipExperience.complete()}),te(this,"handleOffHover",()=>{this.setState({isReactionTrayShowing:!1})}),te(this,"handleOneTapReactionClick",()=>{const{clickedReaction:e,useInitialReaction:t}=this.state,{pinId:n,pinUpdateReactionCount:i,reactionByMe:a}=this.props,o=t?a:e;o?(i(n,!1,o),this.handleUnreact()):this.handleOnHover(),Object(v.a)(101,{view:3,viewParameter:139,element:11354,objectId:n})}),te(this,"handleReactionTrayClick",e=>{this.handleReact(Object(Y.a)(e).type),this.handleShowConfirmation()}),te(this,"handleShowConfirmation",()=>{this.setState({isConfirmationShowing:!0})}),te(this,"handleHideConfirmation",()=>{this.setState({isConfirmationShowing:!1},this.handleOffHover)})}componentDidMount(){this.setReactionButtonRect(),window.addEventListener("mouseover",this.setReactionButtonRect)}componentWillUnmount(){window.removeEventListener("mouseover",this.setReactionButtonRect)}render(){const{isReactionTrayShowing:e,reactionButtonRect:t,isConfirmationShowing:n,clickedReaction:i,useInitialReaction:o}=this.state,{reactionByMe:r,showTooltip:s}=this.props,l=o?r:i,c=l?Y.b[l]:"default",{staticAsset:d,label:u}=Object(Y.a)(c);return a.a.createElement(R.c,{position:"relative"},a.a.createElement(N.a,{accessibilityLabel:"reaction",onClick:this.handleOneTapReactionClick,style:{display:"block",border:"none",padding:0,cursor:"pointer",background:"transparent",outline:"none",borderRadius:"50%"}},({active:t,hovered:n,focused:i})=>{let o={...ae.base};return t?o={...ae.base,...ae.active}:n?o={...ae.base,...ae.hovered}:i&&(o={...ae.base,...ae.focused}),a.a.createElement(R.c,{color:"transparent",rounding:"circle",dangerouslySetInlineStyle:{__style:o}},a.a.createElement(R.c,{display:"flex",justifyContent:"center",alignItems:"center",dangerouslySetInlineStyle:{__style:{minHeight:ie,minWidth:ie}}},(!e||!!l)&&a.a.createElement(R.c,{height:ne,width:ne,ref:this.reactionButtonRef,display:"flex",alignItems:"center",justifyContent:"center",dangerouslySetInlineStyle:{__style:{backgroundRepeat:"no-repeat",backgroundSize:"cover",backgroundPosiiton:"center",backgroundImage:`url(${d})`}}})))}),s&&!e&&!n&&o&&a.a.createElement(L,{experienceIds:[501977,501995],idealDirection:"down",placementId:12,anchor:this.reactionButtonRef.current,flyoutSize:"lg",onExperienceMount:this.handleExperienceMount}),e&&!!t&&!!t.left&&!!t.top&&a.a.createElement(R.c,{display:"flex",justifyContent:"center",alignItems:"center"},a.a.createElement(R.H,{top:0},a.a.createElement(Z,{reactionButtonRect:t,handleReactionTrayClick:this.handleReactionTrayClick}))),n&&!!l&&u&&a.a.createElement(U,{reactionLabel:u,handleHideConfirmation:this.handleHideConfirmation}))}}),re=n("rYoy"),se=n("zXAL"),le=n("/zJj"),ce=n("T5j3");function de(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"CloseupActionBar",(function(){return pe}));const ue=Object(i.lazy)(()=>n.e("SecondarySendButtonCommon").then(n.bind(null,"fepT")));class pe extends a.a.Component{constructor(e){super(e),de(this,"sendExperienceComplete",()=>{}),de(this,"handleExternalSend",()=>{this.sendExperienceComplete()}),de(this,"onSendExperienceMount",e=>{e&&e.complete&&500946===e.experience_id&&(this.sendExperienceComplete=e.complete)}),de(this,"promoteButtonRef",Object(i.createRef)()),this.sendButtonTooltipRef=a.a.createRef()}render(){const{editable:e,gridDescription:t,hideButtons:n,hidePromoteButton:i,imageSrc:o,inChangeTitlesExp:r,isFlyoutOpen:s,isOnSecretBoard:l,onEditSubmit:d,onFlyoutDismiss:u,onToggleFlyout:p,pin:h,promoteButton:m,saveButton:g,shareButtonRef:f,viewParameter:b}=this.props,E=l?null:a.a.createElement(re.a,null,a.a.createElement(R.c,null,a.a.createElement("div",{ref:this.sendButtonTooltipRef},a.a.createElement(ue,{buttonType:"icon",gridDescription:t,imageSrc:o,isFlyoutOpen:s,onExternalSend:this.handleExternalSend,onFlyoutDismiss:u,onToggleFlyout:p,pinId:h.id,sendType:"pin",shareButtonRef:f})),g&&!s&&a.a.createElement(L,{experienceIds:[500946],placementId:12,anchor:this.sendButtonTooltipRef.current,onExperienceMount:this.onSendExperienceMount}))),y=Object(ce.c)(h),_=a.a.createElement(R.c,{display:"flex",color:"white",justifyContent:n?"end":"between",rounding:2,maxWidth:le.d},!n&&a.a.createElement(R.c,{display:"flex"},e&&a.a.createElement(R.c,{marginEnd:1},a.a.createElement(c,{carouselSlotCurrentIndex:h&&h.carousel_data&&h.carousel_data.index,pinId:h.id,onSubmit:d,view:3,viewParameter:b})),a.a.createElement(O,{pin:h,useUnifiedTitleDescription:r,viewParameter:b})),a.a.createElement(R.c,{alignItems:"center",display:"flex"},E,y&&a.a.createElement(re.a,null,a.a.createElement(oe,{pinId:h.id,reactionByMe:h.reaction_by_me,showTooltip:!0})),!i&&m&&a.a.createElement(re.a,null,a.a.createElement(a.a.Fragment,null,a.a.createElement(R.c,{ref:this.promoteButtonRef},m),a.a.createElement(L,{experienceIds:[501121],idealDirection:"down",placementId:12,anchor:this.promoteButtonRef.current,flyoutSize:"lg"})))));return a.a.createElement(a.a.Fragment,null,a.a.createElement(R.c,{display:"flex",justifyContent:"between"},_,a.a.createElement(R.c,{marginStart:3},g)))}}t.default=Object(se.a)(pe)},rSLd:function(e,t,n){n.r(t),n.d(t,"CarouselEllipsis",(function(){return b}));var i=n("q1tI"),a=n.n(i),o=n("/MKj"),r=n("XSD5"),s=n("ZbwW"),l=n("0nTG"),c=n("/5zs"),d=n("U4JR"),u=n("pLLR"),p=n("n6mq"),h=n("fArA");function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const g=()=>{},f=(e,t,n,i,a,o,r,s,c,u)=>{if(!u){const{carousel_slots:u,id:p}=a;Object(d.a)(108,{...c,objectId:t,component:s,view:r,viewParameter:o,eventData:{pinCarouselSlotEventData:{carouselSlotId:u[n]&&Number(u[n].id),carouselDataId:Number(p),carouselSlotIndex:n,toCarouselSlotIndex:i}},...Object(l.a)(e)||{}})}};class b extends a.a.Component{constructor(...e){super(...e),m(this,"state",{isHovered:!1}),m(this,"handleMouseEnter",()=>{this.setState({isHovered:!0})}),m(this,"handleMouseLeave",()=>{this.setState({isHovered:!1})})}render(){const{carouselIndex:e,carouselData:t,changeCarouselSlotIndex:n,handleCarouselSwipe:i,isCloseup:o,pin:r,pinId:s,contextLogData:l,requestContext:d,viewParameter:u,viewType:h,componentType:m,isEditMode:b,closeupImageHovered:E=!1,variant:y}=this.props;if(!t)return null;const{isHovered:_}=this.state,{carousel_slots:S=[],index:w}=t,C=void 0!==e?e:w,I="default"===y,v=!o&&new c.c(d,"web_carousel_pip_improvements").enabled();d.experiments.flush();const x=v?10:I&&o||!o?8:16,R=o&&I||v?2:1,k={__style:{backgroundColor:_?"rgba(0, 0, 0, 0.05)":E?"rgba(0, 0, 0, 0)":"rgba(0, 0, 0, 0.7)"}},T=I?"white":"#555",D=I?"rgba(255, 255, 255, 0.5)":"lightGray",P=[];for(let c=0;c<S.length;c+=1){const e=c===C;P.push(a.a.createElement(p.c,{key:s+c,marginRight:c!==S.length-1?R:0},a.a.createElement(p.P,{fullWidth:!1,rounding:"circle",onTouch:({event:e})=>{b||void 0===n||(e.preventDefault(),e.stopPropagation(),n(String(s),c)),void 0!==i&&i(c),f(r,s,C,c,t,u,h,m,l,b)}},a.a.createElement(p.c,{"data-test-id":"ellipsis-size",height:x,width:x,dangerouslySetInlineStyle:{__style:{backgroundColor:e?T:D}},rounding:"circle"}))))}return a.a.createElement(p.c,Object.assign({"data-test-id":"carousel-ellipsis",display:"flex"},I&&o&&!v?{rounding:"pill",height:44,justifyContent:"center",alignItems:"center",paddingX:4,dangerouslySetInlineStyle:k}:{marginTop:1,marginLeft:b?2:-2,marginBottom:b?1:0,justifyContent:v?"center":"start",alignItems:v?"center":"stretch"},{onMouseEnter:I?this.handleMouseEnter:g,onMouseLeave:I?this.handleMouseLeave:g}),P)}}t.default=Object(h.compose)(Object(o.connect)(({pins:e},{carouselData:t,pinId:n})=>{const i=e[n];return{pin:i,carouselData:t||Object(s.a)(i)}},e=>({changeCarouselSlotIndex:(t,n)=>e(Object(r.a)(t,n))})),u.e)(b)},rrvb:function(e,t,n){var i=n("q1tI"),a=n("Ye/N"),o=n("9QW3"),r=n("NdQN"),s=n("Nlx5"),l=n("IBrh"),c=n("n6mq");function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.a=Object(s.a)(class extends i.Component{constructor(...e){super(...e),d(this,"state",{showFlyout:!1}),d(this,"setContainerRef",e=>{this.containerRef=e}),d(this,"handleCreate",()=>{this.hideFlyout();const{onCreate:e}=this.props;e&&e()}),d(this,"handleSelectItem",e=>{this.hideFlyout();const{onSelect:t,onCreate:n}=this.props;e?t(e):n&&n()}),d(this,"handleDropdownTouch",()=>{this.setState(e=>({showFlyout:!e.showFlyout}))}),d(this,"handleHideFlyout",e=>{this.containerRef&&e.target instanceof HTMLElement&&!this.containerRef.contains(e.target)&&this.hideFlyout()}),d(this,"hideFlyout",()=>{const{hoverHandlers:{onMouseLeave:e}}=this.props;e(),this.setState({showFlyout:!1})})}componentDidMount(){document.addEventListener("click",this.handleHideFlyout,{capture:!0})}componentWillUnmount(){document.removeEventListener("click",this.handleHideFlyout,{capture:!0})}render(){const{dropdownValue:e,fetchMore:t,hoverHandlers:{onMouseOver:n,onMouseLeave:s},isHovering:d,onCreate:u,onSearchQueryUpdate:p,renderRow:h,searchQuery:m,sections:g,createBtnDisabled:f}=this.props,{showFlyout:b}=this.state;this.indexManager=new o.a(g.map(e=>e.items)),this.indexManager.setSelectItem(this.handleSelectItem);const E=!m.trim()||!!f;return i.createElement("div",{ref:this.setContainerRef},i.createElement(c.P,{onMouseEnter:n,onMouseLeave:s,onTouch:this.handleDropdownTouch,fullWidth:!1,rounding:2},i.createElement(c.c,{alignItems:"center",color:d?"lightWash":"lightGray",direction:"row",display:"flex",flex:"grow",paddingX:4,paddingY:3,rounding:2},i.createElement(c.c,{display:"flex",flex:"grow"},i.createElement(c.K,{weight:"bold"},e)),i.createElement(c.n,{icon:"arrow-down",size:14,color:"darkGray",accessibilityLabel:""}))),b&&i.createElement(c.c,{position:"relative"},i.createElement(c.c,{rounding:2,color:"white",display:"flex",direction:"column",overflow:"hidden",position:"absolute",width:"100%",borderSize:"sm",dangerouslySetInlineStyle:{__style:{zIndex:1}}},i.createElement(c.c,null,i.createElement(c.c,{display:"flex",padding:2,marginLeft:-1,marginRight:-1},i.createElement(c.c,{display:"flex",flex:"grow",paddingX:1},i.createElement(r.a,{hideIcon:!0,indexManager:this.indexManager,onChange:p,value:m})),u&&i.createElement(c.c,{paddingX:1},i.createElement(c.d,{disabled:E,inline:!0,onClick:this.handleCreate,text:a.a._("Create","board or section dropdown create button","board or section dropdown create button")})))),i.createElement(l.a,{fetchMore:t,indexManager:this.indexManager,maxHeight:240,onSelectItem:this.handleSelectItem,renderItem:h,sections:g}))))}})},tkfL:function(e,t,n){var i=n("3vRR");n.d(t,"a",(function(){return i.a}));var a=n("Pus6");n.d(t,"b",(function(){return a.a}))},vgrb:function(e,t,n){n.d(t,"a",(function(){return o}));const i={instant:85,short:250,medium:420,semiLong:500,long:800},a={easeIn:"0.9, 0.025, 0.75, 0.625",easeOut:"0.25, 0.375, 0.1, 0.975",easeInOut:"0.66, 0.025, 0.33, 0.975",linear:"0.5, 0.5, 1.0, 1.0",spring:"1, 100, 17, 8"};function o({property:e,duration:t,timingFunction:n,delay:o}){const r=o?` ${o}ms`:"";return`${e} ${"number"==typeof t?`${t}ms`:`${i[t]}ms`} cubic-bezier(${a[n]})${r}`}},xOLo:function(e,t,n){n.r(t),n.d(t,"CarouselSliders",(function(){return g}));var i=n("q1tI"),a=n.n(i),o=n("/MKj"),r=n("XSD5"),s=n("ZbwW"),l=n("Ye/N"),c=n("0nTG"),d=n("U4JR"),u=n("n6mq");const p={slider:{cursor:"pointer",height:"100%",position:"relative",width:"10%",zIndex:"105",pointerEvents:"auto"}},h=(e,t,n,i,a,o,r,s,l,u)=>{if(!u||!a){const{carousel_slots:u,id:p}=a;Object(d.a)(108,{...l,objectId:t,component:s,view:r,viewParameter:o,eventData:{pinCarouselSlotEventData:{carouselSlotId:u[n]&&Number(u[n].id),carouselDataId:Number(p),carouselSlotIndex:n,toCarouselSlotIndex:i}},...Object(c.a)(e)||{}})}},m=(e,t,n,i,a,o)=>{o||void 0===i||(e.preventDefault(),e.stopPropagation(),i(t,n)),void 0!==a&&a(n)},g=({carouselIndex:e,carouselData:t,changeCarouselSlotIndex:n,handleCarouselSwipe:i,pin:o,pinId:r,contextLogData:s,viewParameter:c,viewType:d,componentType:g,isEditMode:f})=>{if(!t)return null;const{carousel_slots:b,index:E}=t,y=void 0!==e?e:E,_=Math.max(0,y-1),S=Math.min(b.length-1,y+1);return a.a.createElement(u.c,{display:"flex",justifyContent:"between",position:"absolute",left:!0,right:!0,bottom:!0,top:!0},a.a.createElement("div",{"data-test-id":"carousel-slider-left",role:"presentation",onClick:e=>{m(e,r,_,n,i,f),h(o,r,y,_,t,c,d,g,s,f)},onKeyUp:e=>{m(e,r,_,n,i,f),h(o,r,y,_,t,c,d,g,s,f)},style:p.slider},y>0&&a.a.createElement(u.c,{height:"100%",width:"100%",display:"flex",alignItems:"center",justifyContent:"center"},a.a.createElement(u.n,{color:"white",icon:"arrow-back",accessibilityLabel:l.a._("View Previous","Button to advance carousel to the previous image","Button to advance carousel to the previous image")}))),a.a.createElement("div",{"data-test-id":"carousel-slider-right",role:"presentation",onClick:e=>{m(e,r,S,n,i,f),h(o,r,y,S,t,c,d,g,s,f)},onKeyUp:e=>{m(e,r,S,n,i,f),h(o,r,y,S,t,c,d,g,s,f)},style:p.slider},y<b.length-1&&a.a.createElement(u.c,{height:"100%",width:"100%",display:"flex",alignItems:"center",justifyContent:"center"},a.a.createElement(u.n,{color:"white",icon:"arrow-forward",accessibilityLabel:l.a._("View Next","Button to advance carousel to the next image","Button to advance carousel to the next image")}))))};t.default=Object(o.connect)(({pins:e},{carouselData:t,pinId:n})=>{const i=e[n];return{pin:i,carouselData:t||Object(s.a)(i)}},e=>({changeCarouselSlotIndex:(t,n)=>e(Object(r.a)(t,n))}))(g)}}]);
//# sourceMappingURL=pjs-CloseupActionBarCommon-54ae452bc7027c5c1d32.mjs.map
