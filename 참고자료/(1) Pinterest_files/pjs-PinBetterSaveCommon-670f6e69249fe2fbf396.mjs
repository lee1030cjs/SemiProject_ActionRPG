(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([["PinBetterSaveCommon","CarouselCommon"],{"0zyx":function(e,t,n){n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return r}));var a=n("mVx/"),o=n.n(a);const i=({pathname:e})=>/^\/pin\/[\w-]+\/?$/.test(e),r=e=>{const t=o()(e,e=>!i(e));return t&&(({pathname:e})=>/^\/search\/pins\//.test(e))(t)?(({pathname:e,search:t})=>{const n=/^\/search\/pins\/(\?.*)$/.exec(e),a=(t||n&&n[1]||"").substr(1).split("&").map(e=>e.split("=")).find(e=>"q"===e[0]);return a?decodeURIComponent(a[1]):""})(t):""}},"1vym":function(e,t,n){},"6tKR":function(e,t,n){n.r(t);var a=n("IUnB"),o=n.n(a);const i={ready:function(e,t){o.a.ready(e,t)},load:function(e,t,n){i.ready(e,()=>{0===t.lastIndexOf("//",0)&&(t=window.location.protocol+t),o()(t,n)})},done:function(e){o.a.done(e)}};t.default=i},"7vSn":function(e,t,n){},"8BHY":function(e,t,n){var a=n("q1tI"),o=n.n(a);const i={backgroundColor:"rgba(0, 0, 0, .06)"},r={backgroundColor:"rgba(51, 51, 51, 1.0)"},s={backgroundColor:"rgba(255, 255, 255, 1.0)"},c={backgroundColor:"rgba(239, 239, 239, 1.0)"},l={backgroundColor:"rgba(142 ,142, 142, 1.0)"},d={backgroundColor:"rgba(230, 0, 35, 1.0)"};var u={transparent:{backgroundColor:"transparent"},transparentDarkGray:{backgroundColor:"rgba(51, 51, 51, .8)"},transparentHovered:i,transparentFocused:i,transparentActive:{backgroundColor:"rgba(0, 0, 0, .1)"},transparentDarkGrayHovered:r,transparentDarkGrayFocused:r,transparentDarkGrayActive:{backgroundColor:"rgba(51, 51, 51, 1.0)"},white:{backgroundColor:"rgba(255, 255, 255, .9)"},whiteHovered:s,whiteFocused:s,whiteActive:{backgroundColor:"rgba(255, 255, 255, 1.0)"},lightGray:{backgroundColor:"rgba(239, 239, 239, .9)"},lightGrayHovered:c,lightGrayFocused:c,lightGrayActive:{backgroundColor:"rgba(239, 239, 239, 1.0)"},gray:{color:"rgba(142 ,142, 142, .9)"},grayHovered:l,grayFocused:l,grayActive:{backgroundColor:"rgba(142 ,142, 142, 1.0)"},red:{backgroundColor:"rgba(230, 0, 35, .9)"},redActive:d,redFocused:d,redHovered:d},h=n("n6mq");const p={xs:24,sm:32,md:40,lg:48,xl:56},m={alignItems:"center",borderRadius:"50%",display:"flex",justifyContent:"center"},g={boxShadow:"0 0 0 4px rgba(0, 132, 255, .5)",outline:0},b={transparent:"gray",gray:"white",lightGray:"gray",white:"gray",transparentDarkGray:"white",red:"white"};function f(e){const{active:t=!1,bgColor:n="transparent",focused:a=!1,hovered:i=!1,icon:r,iconColor:s=b[n],size:c="md",title:l=""}=e,d=e.iconSize||p[c]/2,f={height:p[c],width:p[c]},v={...m,...u[n],...t?u[`${n}Active`]:{},...a?g:{},...a?u[`${n}Focused`]:{},...!i||a||t?{}:u[`${n}Active`]};return o.a.createElement("div",{style:{...f,...v}},o.a.createElement(h.c,{rounding:"circle"},o.a.createElement(h.n,{accessibilityLabel:"",color:s,icon:r,size:d,title:l})))}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",(function(){return y}));class y extends o.a.Component{constructor(...e){super(...e),v(this,"state",{active:!1,focused:!1,hovered:!1}),v(this,"handleBlur",()=>this.setState({focused:!1})),v(this,"handleFocus",()=>{this.setState({focused:!0})}),v(this,"handleMouseDown",()=>{this.setState({active:!0})}),v(this,"handleMouseEnter",()=>{this.setState({hovered:!0})}),v(this,"handleMouseLeave",()=>{this.setState({active:!1,hovered:!1})}),v(this,"handleMouseUp",()=>{this.setState({active:!1})})}render(){const{accessibilityExpanded:e,accessibilityHaspopup:t,accessibilityLabel:n,bgColor:a,disabled:i,icon:r,iconColor:s,iconSize:c,onClick:l,size:d,wrappingPogStyle:u}=this.props,{active:h,focused:p,hovered:m}=this.state;return o.a.createElement("button",{"aria-expanded":e,"aria-haspopup":t,"aria-label":n,className:"LegoGestalt_IconButton",disabled:i,onBlur:this.handleBlur,onClick:e=>l&&l({event:e}),onFocus:this.handleFocus,onMouseDown:this.handleMouseDown,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,onMouseUp:this.handleMouseUp,title:n,type:"button"},o.a.createElement("div",{style:{...u||{}}},o.a.createElement(f,{active:h,bgColor:a,focused:p,hovered:m,icon:r,iconColor:s,iconSize:c,size:d,title:n})))}}},AHhP:function(e,t){const n={},a=function(e,t){let n=!1;return function(...a){n||(n=!0,e.apply(this,a),t&&t())}},o=function(e,t){e.__listeners=t},i=function(e,t){return!e.__listeners&&t&&o(e,[]),e.__listeners},r=function(e,t){return!e.__handlers&&t&&(e.__handlers={}),e.__handlers},s=function e(t,n,a){let o,i,r=[];if("string"==typeof t)for(o=t.split(" "),i=0;i<o.length;i+=1)r.push({name:o[i],callback:n,originalCallback:n,context:a});else"object"==typeof t&&t&&Object.keys(t).forEach(o=>{r=r.concat(e(o,t[o],a||n))});return r},c=function(e,t,n,a){const o=s(e,t,n);for(let i=0;i<o.length;i+=1)a(o[i])},l=function(e,t){const n=r(e,!0);void 0===n[t.name]?n[t.name]=[t]:n[t.name].push(t)},d=function(e,t,n){const a=i(e,!0);for(let o=0;o<n.length;o+=1){const e=n[o];if(!e.callback)return;l(t,e),a.push({obj:t,event:e,originalCallback:e.originalCallback})}};n.on=function(e,t,n){return c(e,t,n,e=>{e.callback&&l(this,e)}),this},n.off=function(e,t,n){const a=r(this,!1);if(void 0===a)return this;const o=Object.keys(a);let i=s(e,t,n);0===i.length&&(i=[{name:null,callback:t,context:n}]);for(let r=0;r<i.length;r+=1){const e=i[r];let t;t=e.name?[e.name]:o;for(let n=0;n<t.length;n+=1){const o=t[n],i=a[o];if(void 0!==i){const t=[];for(let n=0;n<i.length;n+=1){const a=i[n];e.callback&&a.originalCallback!==e.callback&&a.callback!==e.callback?t.push(a):e.context&&a.context!==e.context&&t.push(a)}a[o]=t}}}return this},n.trigger=function(e,...t){const n=r(this,!1);if(void 0===n)return this;let a,o,i;const s=e.split(" ");for(a=0;a<s.length;a+=1){let e=[];const r=n.all,c=s[a],l=n[c];if(void 0!==l)for(o=0;o<l.length;o+=1)if("function"==typeof(i=l[o]).callback)e.push({fn:i.callback,context:i.context||this,args:t});else if(i.callback)throw new Error("Callbacks must be functions");if(void 0!==r)for(o=0;o<r.length;o+=1)if("function"==typeof(i=r[o]).callback)e.push({fn:i.callback,context:i.context||this,args:[c].concat(t)});else if(i.callback)throw new Error("Callbacks must be functions");for(o=0;o<e.length;o+=1)(i=e[o]).fn.apply(i.context,i.args);e=[]}return this},n.once=function(e,t,n){return c(e,t,n,e=>{"function"==typeof e.originalCallback&&(e.callback=a(e.originalCallback,()=>{this.off(e.name,e.callback,e.context)}),l(this,e))}),this},n.listenTo=function(e,t,n){return d(this,e,s(t,n,this)),this},n.listenToOnce=function(e,t,n){const o=s(t,n,this).map(t=>(t.originalCallback&&(t.callback=a(t.originalCallback,()=>{this.stopListening(e,t.name,t.originalCallback,t.context)})),t));return d(this,e,o),this},n.stopListening=function(e,t,n){const a=i(this,!1);let r,c,l;if(!a)return this;const d=[],u=void 0===t?void 0:s(t,n,this);for(c=0;c<a.length;c+=1)if((r=a[c]).obj!==e&&e)d.push(r);else if(t){let e=!1;for(l=0;l<u.length&&!1===e;l+=1){const t=u[l];r.event.name===t.name&&r.originalCallback===t.callback&&(e=!0)}e?r.obj.off(r.event.name,r.event.callback,r.event.context):d.push(r)}else r.obj.off(r.event.name,r.event.callback,r.event.context);return o(this,d),this},e.exports=n},EuRG:function(e,t,n){function a(e,t){return{type:"SEARCH_PIN_CLOSEUP_VIEWED",payload:{pinId:e,query:t}}}function o(e){return{type:"SEARCH_QUERY_STARTED",payload:{query:e}}}function i(e){return{type:"SEARCH_QUERY_INVALIDATED",payload:{query:e}}}n.d(t,"a",(function(){return a})),n.d(t,"c",(function(){return o})),n.d(t,"b",(function(){return i}))},Ev07:function(e,t,n){var a=n("m2Wt"),o=n("h4v/"),i=n("1inl"),r=n("UTsl"),s=n("LqyK"),c=n("4dcN"),l=n("Ye/N"),d=n("BlMG"),u=n("mBfy");const h={checkFbTimelinePermission:function(e){r.default.ensureInit((function(t){t.api("/me/permissions",t=>{const n=t.data;let a=!1;if(n){a=!!n.find(e=>"publish_actions"===e.permission&&"granted"===e.status)}a?e.success&&e.success():e.error&&e.error()})}),u.default)},fbConnectedAccountMatchesLoggedInAccount:function(e,t){if(!t)return!0;const n=e.getAuthResponse();return!n||t===n.userID},maybeRequestFbTimelinePermission:function(e,t){r.default.ensureInit(n=>{if(!h.fbConnectedAccountMatchesLoggedInAccount(n,t))return i.a.showError(l.a._("Oops! Your account is linked to a different Facebook account than the one you're logged into now.")),e.error&&e.error(),void(e.complete&&e.complete());h.checkFbTimelinePermission({success(){e.success&&e.success(),e.complete&&e.complete()},error(){h.fbLogin(e)}})},u.default)},fbLogin:function(e){r.default.ensureInit(t=>{t.login(t=>{t.authResponse?h.checkFbTimelinePermission(e):e.error&&e.error(),e.complete&&e.complete()},{scope:"publish_actions"})},u.default)},shareFb:function(e){const t=e.ga_category||"share_facebook";c.a.trackEvent(t,"click");const n=e.dialog_options||{};n.callback=function(){const t=a.a.fromEventType(1300);e.object_id&&t.setObjectIdStr(e.object_id),o.a.getInstance().addEvent(t)};const i=n.object_type;i&&Object(d.a)("facebook_share_dialog_open_"+i),s.default.open(n)},getLocaleString:function(e){let t=e;switch(t=t.replace(/-/g,"_")){case"de":t="de_DE";break;case"fr":t="fr_FR";break;case"it":t="it_IT";break;case"ja":t="ja_JP";break;case"nl":t="nl_NL";break;case"tr":t="tr_TR";break;case"en_AU":t="en_US";break;case"es_419":case"es_AR":t="es_LA"}return t}};t.a=h},FZoo:function(e,t,n){var a=n("MrPd"),o=n("4uTw"),i=n("wJg7"),r=n("GoyQ"),s=n("9Nap");e.exports=function(e,t,n,c){if(!r(e))return e;for(var l=-1,d=(t=o(t,e)).length,u=d-1,h=e;null!=h&&++l<d;){var p=s(t[l]),m=n;if(l!=u){var g=h[p];void 0===(m=c?c(g,p,h):void 0)&&(m=r(g)?g:i(t[l+1])?[]:{})}a(h,p,m),h=h[p]}return e}},FfPP:function(e,t,n){var a=n("idmN"),o=n("hgQt");e.exports=function(e,t){return e=Object(e),a(e,t,(function(t,n){return o(e,n)}))}},"G35+":function(e,t,n){var a=n("AHhP"),o=n.n(a),i=n("1inl"),r=n("fZ0m"),s=n("Ye/N"),c=n("kmwA"),l=n("BlMG");const d={scope:"profile email",client_id:c.a.settings.GPLUS_CLIENT_ID,app_package_name:c.a.settings.GPLUS_APP_PACKAGE_NAME,access_type:"offline",cookie_policy:"single_host_origin"},u=e=>(Object(l.a)("unauth_web.gapi_auth2_load.success"),e()),h=e=>{Object(l.a)(`unauth_web.init_google.sdk.${e}`)};var p=()=>new Promise((e,t)=>{h("start"),window.gapi.auth2?(h("exists"),window.gapi.auth2.init(d).then(()=>u(e))):(h("load"),window.gapi.load("auth2",{callback:()=>{h("load_success"),window.gapi.auth2.init(d).then(()=>u(e))},onerror:()=>{h("load_error"),t()},timeout:15e3,ontimeout:()=>{h("load_timeout"),t()}}))}),m=n("dwea"),g=n("mBfy");function b(){}let f;Object.assign(b.prototype,o.a),Object.assign(b.prototype,{connect(e,t){t=Object.assign({},{success(){},error(){},complete(){}},t),Object(l.e)(`auth_web.social_connect.${e}`),t.rerequest_facebook_email?(()=>Promise.resolve().then(n.bind(null,"UTsl")))().then(({default:e})=>{e.ensureInit(e=>{e.login(e=>{const n=e.authResponse;let a,o;n&&(a=(a=n.grantedScopes)?a.split(","):[],o=n.userID);const i=a.find(e=>"email"===e),r={id:o};"connected"===e.status&&i?t.success(r):t.error(r),t.complete()},{scope:"email",auth_type:"rerequest",return_scopes:!0})},g.default)}):"gplus"===e||"google"===e?r.a.get(e=>{p().then(()=>{e.auth2.getAuthInstance().grantOfflineAccess().then(e=>{t.success({one_time_code:e.code,redirect_uri:"postmessage"})}).catch(e=>{t.error(e)})})}):(()=>Promise.resolve().then(n.bind(null,"LqyK")))().then(({default:n})=>{const a=t.windowOptions||n.getWindowOptions(),o=window.open("/connect/"+e+"/","",a);if(!o)return i.a.showError(s.a._("You must enable popups!")),void t.error({network:e,alertedUpstream:!0});const r=m.a.setInterval(()=>{o.closed&&(clearInterval(r),this.handleComplete({network:e,error_message:"Window closed."}))},1e3);this.once("connect:"+e,e=>{clearInterval(r),e.error_message?t.error(e):t.success(e),t.complete()})})},complete(e){this.handleComplete(e)},handleComplete(e){const t="connect:"+e.network;if("facebook"===e.network){const t=e.id;t&&"string"!=typeof t&&(e.error_message="Facebook id must be of string type")}this.trigger(t,e)}}),Object.assign(b,{instance:()=>(f||(f=new b),f),FACEBOOK:"facebook",TWITTER:"twitter",GOOGLE:"google",YOUTUBE:"youtube",GPLUS:"gplus",MICROSOFT:"microsoft",ETSY:"etsy",DROPBOX:"dropbox"}),window.addEventListener("message",e=>{const t=window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"");e.origin===t&&"social-connect-complete"===e.data.type&&b.instance().complete(e.data)});t.a=b},"H/Lk":function(e,t,n){n.d(t,"a",(function(){return a}));const a=(e,t,n)=>({type:"MOST_RECENT_BOARD",payload:{id:e,name:t,url:n}})},IUnB:function(e,t){var n="undefined"==typeof window?null:window.document,a=n?n.getElementsByTagName("head")[0]:null,o=/^https?:\/\//,i={},r={},s={},c="",l={},d=!1,u="push",h="onreadystatechangeName";function p(e,t){for(var n=0,a=e.length;n<a;++n)if(!t(e[n]))return d;return!0}function m(e,t){return p(e,(function(e){return!t(e)})),d}function g(e,t,n){e=e[u]?e:[e];var a=t&&"function"==typeof t,d=a?t:n,h=a?e.join(""):t,f=e.length;function v(e){return e.call?e():i[e]}function y(){if(!--f){if(i[h]=1,d)d();for(var e in s)p(e.split("|"),v)&&!m(s[e],v)&&(s[e]=[])}}return setTimeout((function(){m(e,(function(e){return null===e?y():l[e]?(h&&(r[h]=1),2==l[e]&&y()):(l[e]=1,h&&(r[h]=1),void b(!o.test(e)&&c?c+e+".js":e,y))}))}),0),g}function b(e,t){var o=!1,i=function(e,t){o||("loaded"===e.readyState||"completed"===e.readyState?t():setTimeout((function(){i(e,t)}),100))},r=n.createElement("script"),s=r.onload=r.onerror=r[h]=function(){o||(o=!0,r.readyState&&!/^c|loade/.test(r.readyState)||(r.onload=r[h]=null,1,l[e]=2,t()))};i(r,s),r.async=1,r.src=e,a.insertBefore(r,a.firstChild)}n&&!n.readyState&&n.addEventListenerName&&(n.addEventListenerName("DOMContentLoaded",(function e(){n.removeEventListener("DOMContentLoaded",e,d),n.readyState="complete"}),d),n.readyState="loading"),g.get=b,g.order=function(e,t,n){!function a(){var o=e.shift();e.length?g(o,a):g(o,t,n)}()},g.path=function(e){c=e},g.ready=function(e,t,n){e=e[u]?e:[e];var a,o=[];return!m(e,(function(e){i[e]||o.push(e)}))&&p(e,(function(e){return i[e]}))?t():(a=e.join("|"),s[a]||(s[a]=[]),s[a][u](t),n&&n(o)),g},g.done=function(e){g([null],e)},e.exports=g},JZM8:function(e,t,n){var a=n("FfPP"),o=n("xs/l")((function(e,t){return null==e?{}:a(e,t)}));e.exports=o},LqyK:function(e,t,n){n.r(t);var a=n("+NLT"),o=n("UTsl"),i=n("JZM8"),r=n.n(i),s=n("eOdZ"),c=n("zwad"),l=n("mBfy");const d={open(e){const t=r()(e,d._validParams),n=d._getDialogType(e),a=d.generateFbRef(),i=e.object_type&&e.object_id&&"feed"===n;let u=c.a.absolutify(e.path);const h=c.a.getQueryStringParams();if(h.ptrf&&(u=c.a.appendQueryString(u,{ptrf:h.ptrf})),i&&(u=c.a.appendQueryString(u,{fb_ref:a})),t.method=n,"feed"===t.method){const n=d.getWindowOptions(e.width||580,e.height||400);let a="http://www.facebook.com/sharer/sharer.php?u="+u;t.picture&&(a+="&picture="+t.picture),t.name&&(a+="&title="+t.name),t.description&&(a+="&description="+t.description),t.caption&&(a+="&caption="+t.caption),window.open(encodeURI(a),"sharer",n)}else"send"===t.method?t.link=u:"share"===t.method&&(t.href=u),o.default.ensureInit(n=>{n.getLoginStatus(()=>{if("send"===t.method){n.ui(t);let a,o=10;const i=setInterval(()=>{!(a=function(){const e=Array.from(document.querySelectorAll(".fb_dialog_iframe iframe"));if(!e.length)return;if(1===e.length)return e[0];const t=e.splice(0,e.length-1);for(let n=0;n<t.length;n+=1)t[n].parentNode.removeChild(t[n]);return e[0]}())&&o||(clearInterval(i),a&&d.executeMessengerCallback(a,e.callback)),o-=1},1e3)}else"share"===t.method&&n.ui(t,t=>{if(i&&t&&!t.error_message){const t=s.a.create("LogFacebookFeedShare",{});t.options={object_type:e.object_type,object_id:e.object_id,fb_ref:a},t.callCreate({showError:!1})}e.callback&&e.callback(t)})})},l.default)},_validParams:["description","name","picture","to","href","caption","display"],_validOptions:["send","feed","share"],executeMessengerCallback(e,t){let n=10;const a=setInterval(()=>{"0px"!==e.style.width&&n||(clearInterval(a),e.style.width="575px"),n-=1},1e3);t&&t()},generateFbRef(){let e="";for(;e.length<20;)e+=Math.floor(65535*Math.random()).toString(16);return(l.default.id||a.a.instance.unauth_id)+":"+e},_getDialogType:e=>d._validOptions.includes(e.type)?e.type:"feed",getWindowOptions(e,t){const n=e||580,a=t||400,o=screen.width,i=screen.height;return"scrollbars=yes,resizable=yes,toolbar=no,location=yes,width="+n+",height="+a+",left="+Math.round((o-n)/2)+",top="+(i>a?Math.round((i-a)/2):0)}};t.default=d},P6kd:function(e,t,n){var a=n("q1tI"),o=n.n(a),i=n("Ye/N"),r=n("oRao"),s=n("eOdZ"),c=n("vxan"),l=n("vvax"),d=n("n6mq");function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const h=5,p=27,m=38,g=40,b=13;t.a=Object(c.a)(class extends o.a.Component{constructor(...e){super(...e),u(this,"state",{isOpen:this.props.editing,recommendations:[],selectedIndex:0,resourceLoaded:!1}),u(this,"onDismiss",()=>{this.setState({isOpen:!1})}),u(this,"mounted",!1),u(this,"addHashtag",e=>{this.props.addHashtag(e),this.setState({recommendations:[]})}),u(this,"handleKeyDown",e=>{e.keyCode===m?this.handlePrevHashtag(e):e.keyCode===g?this.handleNextHashtag(e):e.keyCode===p?this.handleClose(e):e.keyCode===b&&this.handleSubmit(e)}),u(this,"handlePrevHashtag",e=>{e.preventDefault(),this.state.selectedIndex>0&&this.setState(e=>({selectedIndex:e.selectedIndex-1}))}),u(this,"handleNextHashtag",e=>{e.preventDefault(),this.state.selectedIndex<this.state.recommendations.length-1&&this.setState(e=>({selectedIndex:e.selectedIndex+1}))}),u(this,"handleClose",e=>{e.preventDefault(),this.setState({recommendations:[]})}),u(this,"handleSubmit",e=>{e.preventDefault(),this.addHashtag(this.state.recommendations[this.state.selectedIndex].query)}),u(this,"callResource",e=>{const{makeCancelablePromise:t}=this.props;t(s.a.create("HashtagTypeaheadResource",{query:e,showPinCount:!0}).callGet(),"typeahead").then(e=>{if(!this.mounted)return;const t=e.resource_response.data;this.setState({recommendations:t.slice(0,h),resourceLoaded:!0})}).catch(({isCanceled:e})=>{e||this.setState({resourceLoaded:!1})})})}componentDidMount(){this.mounted=!0,this.callResource(this.props.query),window.addEventListener("keydown",this.handleKeyDown)}UNSAFE_componentWillReceiveProps(e){e.query!==this.props.query&&""!==e.query&&this.callResource(e.query)}componentWillUnmount(){window.removeEventListener("keydown",this.handleKeyDown),this.mounted=!1}render(){const{recommendations:e,resourceLoaded:t,selectedIndex:n}=this.state,{anchor:a,idealDirection:s}=this.props,c=e.filter(e=>e.query),u=s||"down",h="flyout_"+c.length;return t&&c.length>0?o.a.createElement("div",{className:"HashtagFlyout"},o.a.createElement(d.k,{key:h,anchor:a,idealDirection:u,onDismiss:this.onDismiss,size:"sm"},o.a.createElement("div",{className:"HashtagRecommendations"},c.length>0?c.map((e,t)=>o.a.createElement("div",{className:"HashtagItem",key:e.query},o.a.createElement(d.P,{onTouch:t=>this.addHashtag(e.query),fullWidth:!1},o.a.createElement(d.c,{display:"flex",justifyContent:"between",alignItems:"center",color:t===n?"lightGray":"transparent",padding:1},o.a.createElement(d.c,{flex:"grow"},o.a.createElement(d.K,{inline:!0,size:"md",weight:"bold"},e.query)),o.a.createElement(d.c,{flex:"none"},o.a.createElement(d.K,{inline:!0,size:"sm"},Object(l.b)(i.a.ngettext("{{ count }} pin","{{ count }} pins",Number(e.pin_count),"label for n pins in hashtag flyout","label for n pins in hashtag flyout"),{count:o.a.createElement(r.a,{value:Number(e.pin_count),key:"pinCount"})}))))))):null))):null}})},QoKk:function(e,t,n){var a=n("q1tI"),o=n.n(a),i=(n("w/op"),n("Ye/N")),r=n("rYoy"),s=n("n6mq"),c=n("pLLR");const l=Object(a.lazy)(()=>n.e(8).then(n.t.bind(null,"sQeT",7))),d=(e,t)=>e.getDate()===t.getDate()&&e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear();var u=Object(c.e)((function({onSelectedDate:e,selectedDates:t,requestContext:n}){return o.a.createElement(r.a,null,o.a.createElement(l,{calendarType:"US",locale:n.locale||"",className:"DatePicker",enableHistoryView:!1,onClickDay:n=>{1===t.length&&t[0]<n?e([t[0],n]):e([n])},minDetail:"month",nextLabel:o.a.createElement(s.n,{accessibilityLabel:i.a._("Next month","BoardForm.BoardFormExperimentalDatePicker","accessibility label on arrow to go to next calendar month"),icon:"arrow-forward"}),next2Label:null,prevLabel:o.a.createElement(s.n,{icon:"arrow-back",accessibilityLabel:i.a._("Previous month","BoardForm.BoardFormExperimentalDatePicker","accessibility label on arrow to go to previous calendar month")}),prev2Label:null,tileClassName:({date:e})=>{const n=[],[a,o]=t;return a&&d(e,a)?(n.push("start"),o&&n.push("rangeStart")):o&&d(e,o)?n.push("rangeEnd"):2===t.length&&e>=a&&e<=o&&n.push("inRange"),n},value:t.length?t:new Date,view:"month"}))})),h=n("TiQD");const p=320;t.a=Object(c.e)((function({dates:e,onChange:t,onToggleFlyout:n,requestContext:r}){const c=Object(a.useRef)(null),[l,d]=Object(a.useState)(!1),[m,g]=Object(a.useState)(e||[]),[b,f]=m||[];let v=b&&b.toLocaleDateString(r.locale)||"";if(f){v+=" - "+m[1].toLocaleDateString(r.locale)}const y=()=>{n(),d(!l)};return o.a.createElement(a.Fragment,null,o.a.createElement("div",{style:{position:"relative"},ref:c},o.a.createElement(s.M,{autoComplete:"off",id:"boardEditDate",onChange:()=>{},onFocus:y,onKeyDown:({event:e})=>{"Backspace"===e.key&&(g([]),t([]))},placeholder:i.a._("Select start and end","BoardForm.BoardFormDateField","placeholder for input field to enter board end and start dates"),size:"lg",value:v}),o.a.createElement(s.c,{position:"absolute",top:!0,right:!0,padding:3},o.a.createElement(s.n,{color:"darkGray",icon:"calendar",accessibilityLabel:i.a._("Select date","BoardForm.BoardFormDateField","accessibility label on calendar icon")}))),l&&o.a.createElement(s.r,null,o.a.createElement(s.c,{position:"absolute",top:!0,dangerouslySetInlineStyle:{__style:{zIndex:h.a}}},o.a.createElement(s.k,{anchor:c.current,idealDirection:"down",onDismiss:y,size:"lg",positionRelativeToAnchor:!1},o.a.createElement(s.c,{padding:5,width:p},o.a.createElement(u,{onSelectedDate:e=>{g(e),t(e)},selectedDates:m}))))))}))},UTsl:function(e,t,n){n.r(t);var a=n("xBNU"),o=n.n(a),i=n("eOdZ"),r=n("6tKR"),s=n("mBfy");let c=!1;const l={ensureInit(e,t=s.default,n="en_US"){r.default.load([],`//connect.facebook.net/${n}/sdk.js`,"fb"),r.default.ready("fb",()=>{this._fbCallback(e,t)}),window.fb_init=1},_fbCallback(e,t){const n=window.FB;n&&(c||(n.init({appId:o.a.FB_KEY,status:!0,version:"v2.2"}),FB.Event.subscribe("auth.statusChange",e=>{l.refreshAccessToken(t)}),c=!0,window.fb_init=2),e(n))},logIn(e,t){e&&(e.getUserID()?t(e):e.login(()=>{t(e)}))},refreshAccessToken(e){e.isAuthenticated()&&e.attributes.facebook_id&&!e.isLimitedLogin()&&l.ensureInit(e=>{if(e.getUserID()){const t=e.getAccessToken();if(t){i.a.create("UserSocialNetworkResource",{facebook_token:t}).callUpdate({showError:!1})}}},e)}};t.default=l},VwDf:function(e,t,n){n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return o}));const a=e=>e.toISOString(),o=({currentEventStartDate:e,currentEventEndDate:t,initialEventStartDate:n,initialEventEndDate:o})=>{let i,r;return e&&t?(i=a(e),r=a(t)):t&&(r=a(t)),o&&!t&&(r=""),n&&!e&&(i=""),o&&a(new Date(o))===t&&(r=null),n&&a(new Date(n))===t&&(i=null),{eventEndDate:r,eventStartDate:i}}},XKAG:function(e,t,n){var a=n("ut/Y"),o=n("MMmD"),i=n("7GkX");e.exports=function(e){return function(t,n,r){var s=Object(t);if(!o(t)){var c=a(n,3);t=i(t),n=function(e){return c(s[e],e,s)}}var l=e(t,n,r);return l>-1?s[c?t[l]:l]:void 0}}},ZE2w:function(e,t,n){n.d(t,"c",(function(){return r})),n.d(t,"d",(function(){return s})),n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return l}));var a=n("4dcN"),o=n("eOdZ");const i="collaborator_approve_invite";function r(e,t){return o.a.create("BoardEmailInviteResource",{board_id:e,emails:t}).callCreate()}function s(e,t){return o.a.create("BoardInviteResource",{board_id:e,invited_user_ids:t}).callCreate()}function c(e,t){return n=>{return o.a.create("BoardInviteResource",{board_id:e,invited_user_id:t}).callUpdate().then(()=>{a.a.trackEvent(i,"success")}).catch(()=>a.a.trackEvent(i,"error"))}}function l(e,t,n){return t=>{const{invited_user:a,status:i,board:{id:r}}=e;return o.a.create("accepted"===i?"BoardCollaboratorResource":"BoardInviteResource",{ban:n,board_id:r,field_set_key:"boardEdit",invited_user_id:a.id}).callDelete({showError:!1})}}},ZdPf:function(e,t,n){n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return i})),n.d(t,"d",(function(){return r}));const a={CONDITIONAL:0,EMOTIONAL_DISDRESS_OR_SUICIDE:4},o={ABUSIVE:0,SENSITIVE:1,BRAND_UNSAFE:2};function i(e){return null!=e&&(!!e.notice||!!e.notices&&e.notices.length>0)}function r(e){return!!e&&e.severity===o.ABUSIVE}},c4Fo:function(e,t,n){var a=n("q1tI"),o=n.n(a),i=n("clxp"),r=n("zXAL");function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const c=()=>null;t.a=Object(r.a)(class extends a.Component{constructor(...e){super(...e),s(this,"view",e=>{const{placement_id:t,experience_id:n}=e,{experienceClient:a}=this.props;a.viewExperience(t,n)}),s(this,"complete",e=>{const{placement_id:t,experience_id:n}=e,{experienceClient:a,preventRemoval:o}=this.props;o?a.completeExperience(t,n,o):a.completeExperience(t,n)}),s(this,"dismiss",e=>{const{placement_id:t,experience_id:n}=e,{experienceClient:a,preventRemoval:o}=this.props;o?a.dismissExperience(t,n,o):a.dismissExperience(t,n)})}componentDidMount(){if(this.props.disableAutoView)return;const e=this.getExperience(this.props);e&&this.shouldRenderExperience(e)&&this.view(e)}componentDidUpdate(e,t){if(this.props.disableAutoView)return;const n=this.getExperience(e),a=this.getExperience(this.props);a&&this.shouldRenderExperience(a)&&(n&&n.experience_id===a.experience_id||this.view(a))}getExperience(e){return e.experienceClient.experienceForPlacement}shouldRenderExperience(e){if(e){const{type:t,experience_id:n}=e;if(this.props.experienceIds&&this.props.experienceIds.includes(n))return!0;if(!this.props.experienceIds){if(this.props.type&&this.props.type===t)return!0;if(this.props.transitionType&&this.props.transitionType===t)return!0}}return!1}render(){const{children:e,disableAutoView:t}=this.props,n=this.getExperience(this.props);if(n&&this.shouldRenderExperience(n)&&e){const{placement_id:a,experience_id:r}=n;return o.a.createElement(i.a,{name:`Experience(${a}:${r})`},"function"==typeof e?e({...n,complete:()=>this.complete(n),dismiss:()=>this.dismiss(n),...t?{view:()=>this.view(n)}:{}}):e)}return o.a.createElement(c,null)}})},e0nq:function(e,t,n){function a(e){return{type:"PIN_BETTER_SAVE",payload:e}}function o(e){return{type:"PIN_BETTER_UNSAVE",payload:e}}function i(e){return{type:"PIN_BETTER_SELECT_BOARD_OR_SECTION",payload:e}}function r(e){return{type:"POST_REPIN_MORE_IDEAS_UPSELL_SHOWN",payload:{boardId:e}}}n.d(t,"a",(function(){return a})),n.d(t,"d",(function(){return o})),n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return r}))},e3KR:function(e,t,n){var a=n("q1tI"),o=n.n(a),i=n("/MKj"),r=(n("7vSn"),n("i8i4")),s=n("8cMa"),c=n("n6mq");var l=({isOpen:e,showCollaborativeIcon:t,showPrivateIcon:n,showProtectedIcon:a,showSectionsIcon:i})=>t||n||a||i?o.a.createElement(c.c,{display:"flex",direction:"row",marginRight:5,dangerouslySetInlineStyle:{__style:{paddingLeft:8}},alignItems:"center"},n&&o.a.createElement(s.a,{type:"secret"}),a&&o.a.createElement(s.a,{type:"protected"}),t&&o.a.createElement(s.a,{type:"group"}),i&&o.a.createElement(s.a,{type:"sections"})):null,d=n("JW66"),u=n("Ye/N"),h=n("4cpq");function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const m=52;class g extends a.Component{constructor(...e){super(...e),p(this,"state",{hovered:!1}),p(this,"handleMouseEnter",()=>{this.setState({hovered:!0})}),p(this,"handleMouseLeave",()=>{this.setState({hovered:!1})}),p(this,"handleTouch",()=>{const{board:e,onClick:t}=this.props;t(e)}),p(this,"handleButtonClick",({event:e})=>{const{onButtonClick:t}=this.props;this.handleTouch(),t&&t(),e.stopPropagation()}),p(this,"touchableRef",Object(a.createRef)())}focus(){if(this.touchableRef.current){const e=Object(r.findDOMNode)(this.touchableRef.current);e&&(e.focus,1)&&e.focus()}}render(){const{hovered:e}=this.state,{board:t,buttonText:n,isSectionOpen:a,shouldOpenSections:i,showFlyoutSaveButton:r}=this.props,s=!!t.section_count&&t.section_count>0,p=s?"boardWithSection":"boardWithoutSection",g=t.image_cover_url;return o.a.createElement(h.a,{id:p},o.a.createElement(c.P,{onTouch:this.handleTouch,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,ref:this.touchableRef},o.a.createElement(c.c,{color:e?"lightGray":"white",display:"flex",alignItems:"center",height:m,marginStart:3,marginEnd:3,marginBottom:1,marginTop:1,rounding:3},o.a.createElement(c.c,{flex:"none",marginBottom:1,marginLeft:2,marginRight:3,marginTop:1,overflow:"hidden",width:36,height:36,rounding:2},g&&!i&&o.a.createElement(c.u,{wash:!0,width:36,height:36},o.a.createElement(c.p,{src:g,alt:"",naturalHeight:1,naturalWidth:1,fit:"cover"})),g&&i?o.a.createElement(c.u,{wash:!0,width:36,height:36},o.a.createElement(c.p,{src:g,alt:"",naturalHeight:1,naturalWidth:1,fit:"cover"})):o.a.createElement(c.c,{color:i?"lightGray":"transparent",width:"100%",height:"100%"})),o.a.createElement(c.c,{flex:"grow",paddingY:1,overflow:"hidden",marginStart:1},o.a.createElement(c.K,{truncate:!0,weight:i||!i?"bold":"normal"},t.name)),t&&(!e||e&&s&&!a)?o.a.createElement(c.c,null,o.a.createElement(l,{isOpen:t.isOpen,showCollaborativeIcon:!!t.is_collaborative,showPrivateIcon:t.privacy===d.a.BoardPrivacy.SECRET,showProtectedIcon:t.privacy===d.a.BoardPrivacy.PROTECTED,showSectionsIcon:s&&i})):null,e&&(0===t.section_count||!i)&&r&&o.a.createElement(c.c,{marginEnd:2,flex:"none"},o.a.createElement(c.d,{accessibilityLabel:"save button",color:"red",inline:!0,onClick:this.handleButtonClick,text:n||u.a._("Save","save button","save button")})))))}}function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}p(g,"defaultProps",{shouldOpenSections:!0,showFlyoutSaveButton:!0});const f=52,v=53,y=11;class _ extends a.Component{constructor(...e){super(...e),b(this,"state",{hovered:!1}),b(this,"handleMouseEnter",()=>{this.setState({hovered:!0})}),b(this,"handleMouseLeave",()=>{this.setState({hovered:!1})}),b(this,"handleTouch",()=>{const{board:e,onClick:t,section:n}=this.props;t(n,e)}),b(this,"handleButtonClick",({event:e})=>{const{onButtonClick:t}=this.props;this.handleTouch(),t&&t(),e.stopPropagation()}),b(this,"touchableRef",Object(a.createRef)())}focus(){if(this.touchableRef.current){const e=Object(r.findDOMNode)(this.touchableRef.current);e&&(e.focus,1)&&e.focus()}}render(){const{hovered:e}=this.state,{buttonText:t,section:n,showSectionSaveButton:a}=this.props;return o.a.createElement(c.P,{onTouch:this.handleTouch,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,ref:this.touchableRef},o.a.createElement(c.c,{color:e?"lightGray":"white",display:"flex",alignItems:"center",height:f,marginTop:1,rounding:3,dangerouslySetInlineStyle:{__style:{marginLeft:v,marginRight:y}}},o.a.createElement(c.c,{flex:"grow",paddingY:1,marginStart:4},o.a.createElement(c.K,{truncate:!0},n.title)),e&&a&&o.a.createElement(c.c,{marginEnd:2,flex:"none"},o.a.createElement(c.d,{accessibilityLabel:"save button",color:"red",inline:!0,text:t||u.a._("Save","save button","save button"),onClick:this.handleButtonClick}))))}}b(_,"defaultProps",{showSectionSaveButton:!0});var S=n("zLLH");var w=Object(S.c)({name:"BoardSectionsRepinResource",key:"sectionsResource",options:e=>({board_id:e.board.id})},{allowStale:!1})(e=>{const{board:t,buttonText:n,sectionsResource:a,onClick:i,onButtonClick:r,showSectionSaveButton:s}=e,l=a&&a.data||[];return o.a.createElement(c.c,null,!a.isLoaded&&o.a.createElement(c.c,{display:"flex",alignItems:"center",justifyContent:"center",width:"100%",height:"100%",minHeight:200},o.a.createElement(c.G,{accessibilityLabel:u.a._("loading board picker","accessibility text for loading spinner","accessibility text for loading spinner"),show:!0})),a.isLoaded&&o.a.createElement(c.c,null,l.map(e=>o.a.createElement(_,{board:t,buttonText:n,key:e.id,onButtonClick:r,onClick:i,section:e,showSectionSaveButton:s}))))});function E({isBoardCreate:e,onCreateBoardClick:t}){const[n,i]=Object(a.useState)(!1);return o.a.createElement(c.c,{"data-test-id":"create-board",height:"100%",display:"flex"},o.a.createElement(c.P,{onMouseEnter:()=>i(!0),onMouseLeave:()=>i(!1),onTouch:t,rounding:2},o.a.createElement(c.c,{display:"flex",alignItems:"center",color:n?"lightGray":"white",padding:2,width:"100%",height:"100%"},o.a.createElement(c.c,{marginRight:5,marginLeft:4},o.a.createElement(c.n,{accessibilityLabel:"",size:28,icon:"add-circle",color:"red"})),e?o.a.createElement(c.K,{align:"center",truncate:!0,weight:"bold"},u.a._("Create board")):o.a.createElement(c.K,{align:"center",truncate:!0,weight:"bold"},u.a._("Create section")))))}var C=n("nKlH");const k=52;function I({onClick:e,title:t}){const[n,i]=Object(a.useState)(!1);return o.a.createElement(c.P,{onTouch:()=>{e({title:t})},onMouseEnter:()=>i(!0),onMouseLeave:()=>i(!1)},o.a.createElement(c.c,{color:n?"lightGray":"white",display:"flex",alignItems:"center",height:k,marginStart:3,marginEnd:3,marginBottom:1,rounding:3},o.a.createElement(c.c,{flex:"none",marginBottom:1,marginLeft:2,marginRight:3,marginTop:1,overflow:"hidden",width:36,height:36,rounding:1},o.a.createElement(c.c,{color:"lightGray",width:"100%",height:"100%"})),o.a.createElement(c.c,{flex:"grow",paddingY:1},o.a.createElement(c.K,{truncate:!0,weight:"bold"},t)),n&&o.a.createElement(c.c,{marginEnd:2},o.a.createElement(c.d,{accessibilityLabel:"create button",color:"red",inline:!0,text:u.a._("Create","create button to create a new board","create button to create a new board")}))))}const x=e=>{const{suggestionsResource:t,onClick:n,pinBuilderSuggestions:a}=e,i=a||t&&t.data||[],r=o.a.createElement(o.a.Fragment,null,i.map((e,t)=>o.a.createElement(I,{key:t,title:e.title,onClick:n})));return o.a.createElement(o.a.Fragment,null,i?r:o.a.createElement(c.c,{display:"flex",alignItems:"center",justifyContent:"center",width:"100%",height:"100%",minHeight:200},o.a.createElement(c.G,{accessibilityLabel:u.a._("loading board suggestions","accessibility text for loading spinner","accessibility text for loading spinner"),show:!0})))},B=(Object(S.c)({name:"BoardTitleSuggestionsResource",key:"suggestionsResource",options:({pinId:e})=>({pin_id:e})},{allowStale:!1})(x),x);var O=n("0BOE"),D=n("eUcp"),R=n("qyR9"),T=n("NtFK"),L=n("U4JR"),j=n("fArA");function P(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"b",(function(){return U})),n.d(t,"a",(function(){return H}));const F=128.5,M=439,A=52;class N extends a.Component{constructor(...e){super(...e),P(this,"state",{isSectionOpen:null,selectedBoardId:"",selectedBoardCategory:"",searchQuery:"",searchBoxFocused:!0}),P(this,"getItems",()=>{const{boardResource:e,suggestedBoardsShortListResource:t}=this.props;if(!e||!e.data)return[];const{all_boards:n}=e&&e.data,a=n.map(e=>this.mapBoards(e,"allBoards",0)),o=(t&&t.data||[]).map((e,t)=>this.mapBoards(e,"shortlist",t+1)),{searchQuery:i}=this.state;return i.length>=R.a?[...Object(O.a)(a,i)]:[...a.length>3&&o&&o.length?[{type:"header",title:u.a._("Top board suggestions","Header for top suggesions in board picker","Header for top suggesions in board picker")},...o]:[],{type:"header",title:u.a._("All boards","Header for all boards in board picker","Header for all boards in board picker")},...a,...a.length<=3?[{type:"header",title:u.a._("Suggested board names","Header for suggested boards in board picker","Header for suggested boards in board picker")}]:[]]}),P(this,"mapBoards",(e,t,n)=>{const{setBoardWithSection:a}=this.props,{selectedBoardId:o,selectedBoardCategory:i}=this.state,r=e.id===o&&t===i;return r&&a&&a(e),{...e,category:t,isOpen:r,gridIndex:n}}),P(this,"handleBack",()=>{const{setBoardWithSection:e}=this.props;this.setState({isSectionOpen:!1,selectedBoardId:"",selectedBoardCategory:""}),e&&e(null)}),P(this,"handleSectionClick",(e,t)=>{const{onItemChosen:n}=this.props;Object(L.a)(101,{component:13282,element:36,objectId:t.id,view:91,grid_index:t.gridIndex}),n({boardId:t.id,url:e.slug?`${t.url}${e.slug}/`:t.url,sectionId:e.id,title:e.title||""})}),P(this,"handleBoardWithSectionsClick",e=>{const{selectedBoardId:t,selectedBoardCategory:n}=this.state,a=t===e.id&&n===e.category;this.setState({isSectionOpen:!0,selectedBoardId:a?"":e.id,selectedBoardCategory:a?"":e.category})}),P(this,"handleBoardClick",({board:e,toggleSections:t})=>{const{onItemChosen:n}=this.props;this.setState({searchBoxFocused:!1}),t?this.handleBoardWithSectionsClick({id:e.id,category:e.category}):(Object(L.a)(101,{component:13282,element:36,objectId:e.id,view:91,grid_index:e.gridIndex}),n({boardId:e.id,url:e.url,title:e.name||""}))}),P(this,"handleSearchQueryUpdate",e=>{this.setState(t=>({...t,searchQuery:e}))}),P(this,"boardSectionsHeaderRef",Object(a.createRef)())}componentDidMount(){this.props.boardResource&&this.props.boardResource.isLoaded&&this.setPWTLoadingEnd()}componentDidUpdate(e,t){e.boardResource&&!e.boardResource.isLoaded&&this.props.boardResource&&this.props.boardResource.isLoaded&&this.setPWTLoadingEnd(),this.state.isSectionOpen&&!t.isSectionOpen&&this.boardSectionsHeaderRef.current&&this.boardSectionsHeaderRef.current.focus()}setPWTLoadingEnd(){const e=!this.props.boardResource||!!this.props.boardResource.error;Object(T.h)(16,{error:e})}render(){const{boardResource:e,buttonText:t,customItem:n,onBoardCreate:a,onButtonClick:i,paneWidth:r,showCreateBoardButton:s,showFlyoutSaveButton:l,showSections:d,showSectionSaveButton:p,suggestedBoardsShortListResource:m}=this.props,{isSectionOpen:b,searchBoxFocused:f,searchQuery:v}=this.state;if(!e)return null;const{isLoaded:y,data:_,error:S}=e;let k=[];(y&&!S||m&&m.data&&!m.error)&&(k=this.getItems());const I=k.filter(e=>e&&"allBoards"===e.category).length,x=null===b?"":"BoardsSlideRight",O=y&&_&&_.create_suggestions.map(e=>({title:e}))||[],R=e=>o.a.createElement(o.a.Fragment,null,o.a.createElement(c.j,null),o.a.createElement(c.c,{overflow:"hidden",height:A,dangerouslySetInlineStyle:{__style:{borderBottomRightRadius:8,borderBottomLeftRadius:8}}},o.a.createElement(E,{onCreateBoardClick:()=>a({title:this.state.searchQuery}),isBoardCreate:e})));return o.a.createElement(c.c,{width:"100%",rounding:2,overflow:"hidden",height:M,color:"white",dangerouslySetInlineStyle:{__style:{zIndex:D.b}}},y?null:o.a.createElement(c.c,{display:"flex",alignItems:"center",justifyContent:"center",width:"100%",height:"100%",minHeight:200},o.a.createElement(c.G,{accessibilityLabel:u.a._("loading board picker","accessibility text for loading spinner","accessibility text for loading spinner"),show:!0})),o.a.createElement(c.c,{display:"flex",direction:"row"},y&&o.a.createElement("div",{className:b?"BoardsSlideLeft":x},o.a.createElement(c.c,{position:"relative"},o.a.createElement(c.c,{display:"flex",direction:"row",width:2*r,dangerouslySetInlineStyle:{__style:{zIndex:0}}},o.a.createElement(c.c,{display:"flex",direction:"column",width:r},o.a.createElement(c.c,{padding:3},o.a.createElement(C.a,{accessibilityLabel:u.a._("Search through your boards","search bar placeholder text","search bar placeholder text"),focused:f,id:"pickerSearchField",onChange:({value:e})=>this.handleSearchQueryUpdate(e),placeholder:u.a._("Search","search bar placeholder text","search bar placeholder text"),value:v})),o.a.createElement(c.c,{minHeight:322,maxHeight:322,overflow:"scrollY"},m&&!m.isLoaded?o.a.createElement(h.a,{id:"suggestedBoardsContainer"},o.a.createElement(c.c,{display:"flex",alignItems:"center",justifyContent:"center",width:"100%",height:"100%",minHeight:F},o.a.createElement(c.G,{accessibilityLabel:u.a._("loading board picker","accessibility text for loading spinner","accessibility text for loading spinner"),show:!0}))):null,n,k.map((e,n)=>"header"===e.type?o.a.createElement(c.c,{key:e.title,paddingX:3,paddingY:1,marginTop:n>0?2:1},o.a.createElement(c.K,{size:"md"},e.title)):o.a.createElement(c.c,{key:`${e.category}-${e.id}`},o.a.createElement(g,{board:e,buttonText:t,onClick:e=>{this.handleBoardClick({board:e,toggleSections:d&&!!e.section_count})},onButtonClick:i,shouldOpenSections:d,showFlyoutSaveButton:l}))),I<=3&&o.a.createElement(B,{onClick:a,pinBuilderSuggestions:O})),s&&R(!0)),o.a.createElement(c.c,{display:"flex",direction:"column",width:r},o.a.createElement(c.c,{display:"flex",direction:"row",justifyContent:"center",alignContent:"center",alignItems:"center"},o.a.createElement(c.h,{span:2},o.a.createElement(c.c,{display:"flex",justifyContent:"start",alignContent:"center",alignItems:"center",marginStart:3},o.a.createElement(c.o,{accessibilityLabel:"Back button",icon:"arrow-back",iconColor:"darkGray",onClick:this.handleBack,size:"sm"}))),o.a.createElement(c.h,{span:8},o.a.createElement(c.c,{display:"flex",justifyContent:"center",alignItems:"center",height:52},o.a.createElement(c.K,{weight:"bold"},u.a._("Choose section","Header for section header","Header for section header")))),o.a.createElement(c.h,{span:2},o.a.createElement(c.c,null))),o.a.createElement(c.j,null),o.a.createElement(c.c,{minHeight:334,maxHeight:334,overflow:"scrollY"},k?o.a.createElement(o.a.Fragment,null,k&&k.map((e,n)=>"header"===e.type?null:o.a.createElement(c.c,{key:`${e.category}-${e.id}`},e.isOpen&&o.a.createElement(o.a.Fragment,null,o.a.createElement(g,{board:e,buttonText:t,isSectionOpen:!0,onClick:e=>{this.handleBoardClick({board:e,toggleSections:!1})},onButtonClick:i,shouldOpenSections:!1,showFlyoutSaveButton:l,ref:this.boardSectionsHeaderRef}),o.a.createElement(w,{board:e,buttonText:t,onClick:this.handleSectionClick,onButtonClick:i,showSectionSaveButton:p}))))):null),s&&R(!1)))))))}}P(N,"defaultProps",{paneWidth:320,showCreateBoardButton:!0,showFlyoutSaveButton:!0,showSections:!0,showSectionSaveButton:!0});const U=Object(j.compose)(Object(i.connect)((function(e){const{advertiser:t,viewer:n}=e;return n.isAuth&&t&&t.owner_user_id!==n.id?{advertiser_id:t.id,username:t.owner_user_id}:{advertiser_id:void 0,username:void 0}})),Object(S.c)({name:"BoardPickerBoardsResource",key:"boardResource",options:({advertiser_id:e,username:t})=>({field_set_key:"board_picker",...t?{username:t}:{},...e?{advertiser_id:e,filter:"protected"}:{}})}))(N),H=Object(S.c)({name:"BoardPickerBoardsShortlistResource",key:"suggestedBoardsShortListResource",options:e=>({pin_id:e.pin.id,shortlist_length:3,num_shortlist_suggestions:3})})(N)},eUcp:function(e,t,n){n.d(t,"c",(function(){return a})),n.d(t,"b",(function(){return o})),n.d(t,"f",(function(){return i})),n.d(t,"a",(function(){return r})),n.d(t,"e",(function(){return s})),n.d(t,"d",(function(){return c})),n.d(t,"h",(function(){return l})),n.d(t,"g",(function(){return d}));const a=1,o=2,i=2,r=3,s=3,c=3,l=3,d=100},fEA9:function(e,t,n){n.r(t);var a=n("q1tI"),o=n.n(a),i=n("/MKj"),r=(n("1vym"),n("qWlA")),s=n("TSYQ"),c=n.n(s),l=n("clxp"),d=n("1inl"),u=n("ajUs"),h=n("Ye/N"),p=n("a49R");class m extends a.Component{constructor(...e){var t,n,a;super(...e),a=()=>{const{setActive:e,showOnTopOfModal:t,...n}=this.props;e("flyout",n,t||!1)},(n="renderFlyout")in(t=this)?Object.defineProperty(t,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[n]=a}componentDidMount(){this.renderFlyout()}componentDidUpdate(){this.renderFlyout()}componentWillUnmount(){this.props.setActive()}render(){return null}}const g=e=>a.createElement(p.a.Consumer,null,t=>a.createElement(m,Object.assign({},e,{setActive:t})));g.displayName="MasonryFlyout";var b=g,f=n("3gA6"),v=n("jHGc"),y=n("eOdZ"),_=n("e3KR"),S=n("Wrea"),w=n("fArA"),E=n("0zyx"),C=n("TN0d"),k=n("vvax"),I=n("lm6u"),x=n("EuRG"),B=n("H/Lk"),O=n("WnNx"),D=n("NtFK"),R=n("U4JR"),T=n("NjDU"),L=n("pLLR"),j=n("CvCA"),P=n("e0nq");const F=5e3,M=16,A=({boardId:e,boardUrl:t,postRepinMoreIdeasUpsell:n})=>{if(!t)return!1;const{recentSaves:a,recentUpsell:o}=n;if(o[e])return!1;const i=a.findIndex(t=>t.boardId!==e);return(-1===i?a.length:i)+1>=3};var N=Object(i.connect)(null,(e,t)=>({toastShown:()=>e(Object(P.c)(t.boardId))}))(class extends a.PureComponent{constructor(...e){var t,n,a;super(...e),a=()=>{const{boardId:e}=this.props;Object(R.a)(101,{component:20,element:10805,objectId:e})},(n="handleClick")in(t=this)?Object.defineProperty(t,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[n]=a}componentDidMount(){const{toastShown:e}=this.props;e()}render(){const{boardName:e,boardUrl:t,onHide:n}=this.props;return a.createElement(j.a,{duration:F,onHide:n,text:Object(k.b)(h.a._("Find more ideas for {{ boardName }}"),{boardName:e}).join(""),href:`${t}more_ideas/?ideas_referrer=${M}`,onClick:this.handleClick})}}),U=n("zLLH"),H=n("ZdPf"),G=n("B6Tf"),q=n("nGHF"),z=n("n6mq"),K=n("0nTG");function W(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"PinBetterSave",(function(){return Z}));const Y={CLASSIC:40,LEGO:44},Q=4;function $({savedInfo:e,variant:t}){const n="lego-closeup"===t,a=n?"sm":"md";return o.a.createElement(f.b,{className:"underlineLink",stopPropagation:!0,style:{color:"#333"},to:e.url||""},o.a.createElement(z.c,{marginStart:n?1:0},o.a.createElement(z.K,{color:"darkGray",inline:!0,size:a},Object(k.b)(h.a._("Saved to {{ destination }}","Saved to label for better save","Saved to label for better save"),{destination:o.a.createElement(z.K,{color:"darkGray",key:"pin_auto_save_link",size:a,truncate:!0,weight:"bold"},e.title)}))))}class Z extends o.a.Component{constructor(...e){var t;super(...e),t=this,W(this,"state",{boardWithSection:null,buttonRef:null,createdBoard:null,suggestedBoardTitle:"",showBoardFlyout:!1,showRepinModal:!1,sensitiveContentNotice:null}),W(this,"saveButtonRef",e=>{this.setState({buttonRef:e})}),W(this,"setBoardSaveCompletionPromise",e=>{const{createdBoard:t}=this.state;this._repinCompletionPromise=e,this._repinCompletionPromise.promise.then(e=>{if(!e.board)return;const{board:{id:n,name:a,url:o}}=e,i={boardId:n,title:a,url:o};this.updateSelectedBoardOrSection(i),this.updateSavedState({...i,localPinId:e.id}),t&&Object(H.d)(t.sensitivity)&&Object(H.c)(t.sensitivity)?this.setState({sensitiveContentNotice:t.sensitivity.notice||t.sensitivity.notices[0]}):this.handleRepinHide()})}),W(this,"updateSavedState",e=>{const{location:t,save:n,searchQueryInvalidated:a,onSave:o,pin:{id:i}}=this.props,r=t.query&&t.query.q||Object(E.a)(t.history);n({pinId:i,...e}),r&&a(r),o&&o()}),W(this,"updateSelectedBoardOrSection",e=>{const{selectBoardOrSection:t,pin:{id:n}}=this.props;t({pinId:n,...e})}),W(this,"updateSelectedItem",()=>{const{initialSelection:e,selectedItem:t}=this.props;!t&&e&&this.updateSelectedBoardOrSection(e)}),W(this,"dropdownRef",o.a.createRef()),W(this,"handleItemChosen",e=>{this.updateSelectedBoardOrSection(e),this.hideFlyout(!0),this.save(e)}),W(this,"handleBoardCreate",Object(r.a)(({title:e=""}={})=>{this.hideFlyout(!0),this.setState(t=>({...t,suggestedBoardTitle:e,showRepinModal:!0}));const{onToggleFlyout:t}=this.props;t&&t(!0,!0)})),W(this,"handleBoardCreated",e=>{this.setState({createdBoard:e})}),W(this,"handleRepinHide",()=>{this.setState(e=>({...e,suggestedBoardTitle:"",showRepinModal:!1}));const{onToggleFlyout:e}=this.props;e&&e(!1,!1)}),W(this,"handleBoardDropdownClick",e=>{const{pin:{id:t},viewParameter:n}=this.props;e&&e.preventDefault&&e.preventDefault(),e&&e.stopPropagation&&e.stopPropagation(),this.state.showBoardFlyout?this.hideFlyout(!0):(Object(R.a)(101,{component:13282,element:10960,viewParameter:n,objectId:t}),Object(D.g)(16),this.showFlyout())}),W(this,"handleSaveClick",(async function(e){const{selectedItem:n}=t.props;n?(e&&e.preventDefault&&e.preventDefault(),e&&e.stopPropagation&&e.stopPropagation(),Object(R.a)(101,{component:13282,element:36,objectId:n.boardId,grid_index:Q}),await t.save(n)):t.handleBoardDropdownClick(e)})),W(this,"setBoardWithSection",e=>{this.setState({boardWithSection:e})}),W(this,"handleEditSubmit",({boardId:e,sectionId:t,url:n,title:a})=>{const{pin:{id:o},savedInfo:{localPinId:i}={}}=this.props;this.updateSavedState({pinId:o,localPinId:i,boardId:e,sectionId:t||"",url:n,title:a})}),W(this,"resetPinSavedState",()=>{this.updateSavedState({boardId:"",localPinId:"",sectionId:"",title:"",url:""})}),W(this,"deleteSavedState",()=>{const{unsave:e,onDelete:t,pin:{id:n}}=this.props;e({pinId:n}),t&&t()}),W(this,"save",(async function(e){const{isLimitedLogin:n,mostRecentBoard:a,pin:{id:i},postRepinMoreIdeasUpsell:r,postRepinUpsellDisabled:s,save:c,setMostRecentBoard:l,showRepinAnimation:u,toastManagerContext:h}=t.props;t.updateSavedState(e);try{const{resource_response:{data:n}}=await t.getPinResource(e).callCreate({showError:!1}),d=e.url,{incrementBoardPinCount:p,updateUserPinCount:m,viewerUserId:g}=t.props;!s&&d&&A({boardId:e.boardId,boardUrl:d,postRepinMoreIdeasUpsell:r})&&h.showToast(({onHide:t})=>o.a.createElement(N,{boardId:e.boardId,boardName:e.title,boardUrl:d,onHide:t})),c({pinId:i,...e,localPinId:n.id}),C.b.publish("currentUser","pinCreated",n),C.b.publish(n.board.id,"pinCreated",{pin:n}),p({boardId:e.boardId,sectionId:e.sectionId}),m(g),u(i),a&&e.boardId!==a.id&&l(e.boardId,e.title,e.url)}catch(p){n||d.a.showError(p.message_detail||p.message),t.resetPinSavedState()}})),W(this,"hideFlyout",(e=!1)=>{const{onToggleFlyout:t}=this.props;this.setState({showBoardFlyout:!1}),t&&t(!1,e)})}componentDidMount(){const{onMount:e}=this.props;this.updateSelectedItem(),e&&e()}componentDidUpdate(e){this.updateSelectedItem()}getPinResource(e){const{carousel_data:t,location:n,pin:a}=this.props,o=t&&t.index,i=Object(u.a)(a,n)||`${a.tracking_params}~0`,r={description:a.description||"",link:a.link,title:a.title||"",clientTrackingParams:i,board_id:e.boardId||"",pin_id:a.id||"",image_base64:a.image_base64,is_buyable_pin:!1,is_removable:a.promoted_is_removable,carousel_slot_index:o||0,...e.sectionId?{section:e.sectionId}:{},...Object(K.a)(a)||{}};return y.a.create("RepinResource",r)}showFlyout(){const{onToggleFlyout:e}=this.props;this.setState({showBoardFlyout:!0}),e&&e(!0,!0)}render(){const{boardResource:e,useMasonryFlyout:t,onToggleModal:n,pin:a,renderSavedStatus:i,renderPinSaveTooltip:r,selectedItem:s,savedInfo:d,unselectedText:u,variant:p,viewParameter:m}=this.props,{boardWithSection:g,buttonRef:f,showBoardFlyout:y,showRepinModal:S,sensitiveContentNotice:w,suggestedBoardTitle:E}=this.state,C=t?b:z.k,{carousel_data:k}=a,x="lego-closeup"===p||"lego-pin"===p,B=x?"sm":"md";let O={};"lego-closeup"===p?O={bgColor:"transparent",iconColor:"darkGray",size:"sm"}:"lego-pin"===p?O={bgColor:"white",iconColor:"darkGray",size:"sm"}:"pin"===p&&(O={bgColor:"transparentDarkGray",iconColor:"white",size:"sm"});const D=i&&i({savedInfo:d,variant:p}),R=o.a.createElement(_.a,{boardResource:e,setBoardWithSection:this.setBoardWithSection,onItemChosen:this.handleItemChosen,onBoardCreate:this.handleBoardCreate,pin:a});return o.a.createElement(l.a,{name:"PinBetterSave"},o.a.createElement(z.c,Object.assign({width:"100%"},"lego-closeup"===p?{display:"flex",height:Y.LEGO,color:"lightGray",rounding:4}:{}),d&&d.title?o.a.createElement(z.c,Object.assign({display:"flex",direction:"row",alignItems:"center"},"lego-closeup"===p?{width:"100%",paddingX:2}:{},"lego-pin"===p?{marginLeft:-1,marginRight:-1}:{}),D&&o.a.createElement(z.c,{paddingX:1,"data-test-id":"saved-info",flex:"grow"},D),o.a.createElement(z.c,{paddingX:1,flex:"none",marginLeft:"auto"},o.a.createElement(v.default,{component:0,onDelete:this.deleteSavedState,onSubmit:this.handleEditSubmit,pinId:d.localPinId,onToggleModal:n,viewParameter:m,carouselSlotCurrentIndex:k&&k.index,style:O,useLegoStyles:"lego-pin"===p}))):o.a.createElement(z.c,{alignItems:"center",display:"flex",width:"100%",height:x?Y.LEGO:Y.CLASSIC},o.a.createElement("button",{className:c()("PinBetterSave__Dropdown",{"PinBetterSave__Dropdown--lego":x,"PinBetterSave__Dropdown--lego-pin":"lego-pin"===p,"PinBetterSave__Dropdown--lego-closeup":"lego-closeup"===p,"PinBetterSave__Dropdown--expanded":y&&!x,"PinBetterSave__Dropdown--expandedLego":y&&x}),"data-test-id":"PinBetterSaveDropdown",onClick:this.handleBoardDropdownClick,ref:this.dropdownRef},o.a.createElement(z.c,{paddingX:4,display:"flex",flex:"grow",alignItems:"center"},o.a.createElement(z.c,{flex:"grow",minWidth:0,overflow:"hidden"},s&&s.title?o.a.createElement(z.K,{truncate:!0,__dangerouslyIncreaseLineHeight:!0,size:B},o.a.createElement("span",{className:c()("PinBetterSave__DropdownText",{"PinBetterSave__DropdownText--lego":x})},s.title)):o.a.createElement(z.K,{color:"gray",__dangerouslyIncreaseLineHeight:!0,truncate:!0,size:B},o.a.createElement("span",{className:c()("PinBetterSave__DropdownText",{"PinBetterSave__DropdownText--lego":x})},u))),o.a.createElement(z.c,{marginLeft:2,flex:"none","data-test-id":"boardSelectionDropdown"},o.a.createElement("div",{className:c()("PinBetterSave__DownArrowContainer",{"PinBetterSave__DownArrowContainer--lego":x})},o.a.createElement(z.n,{accessibilityLabel:h.a._("Select a board you want to save to","BetterSave accessibility label to change the board","BetterSave accessibility label to change the board"),color:"darkGray",icon:"arrow-down",size:12}))))),!y&&o.a.createElement(o.a.Fragment,null,o.a.createElement("button",{className:c()("PinBetterSave__Button",{"PinBetterSave__Button--lego":x,"PinBetterSave__Button--lego-pin":"lego-pin"===p}),onClick:this.handleSaveClick,"data-test-id":"PinBetterSaveButton",ref:this.saveButtonRef},o.a.createElement(z.K,{color:"white",size:B,weight:"bold"},h.a._("Save","BetterSave Save label","BetterSave Save label"))),!!r&&!!f&&r(f))),o.a.createElement(I.a,{additionalCreateFields:{is_stl_pin:Object(K.d)(a)},boardWithSection:g,action:"create",onClose:this.handleRepinHide,setCompletionPromise:this.setBoardSaveCompletionPromise,showCreate:!0,shouldShowToast:!0,pin:a},({boardSavedTo:e,dismissModal:t,displaySuccessAnimation:n,handleAbort:a,handleNewBoardAnimationCompletion:i,handleSocialConnectSet:r,handleSaveToBoard:s,newPin:c,updateDescription:l,showSharingUpsell:d,modalTitle:u,setModalTitle:h,pin:p})=>o.a.createElement(G.b,{boardSavedTo:e,isInModal:!0,displaySuccessAnimation:n,dismissModal:t,handleAbort:a,handleNewBoardAnimationCompletion:i,handleSocialConnectSet:r,handleSaveToBoard:s,updateDescription:l,onBoardCreated:this.handleBoardCreated,sensitiveContentNotice:w,pin:p,pwtAuxData:{pin_create_method:"repin"},suggestedBoardTitle:E,boardWithSection:g,shouldRenderContent:S,newPin:c,modalTitle:u,setModalTitle:h,showCreate:!0,showSharingUpsell:d})),y&&"lego-closeup"===p&&o.a.createElement(z.r,null,o.a.createElement(z.k,{anchor:this.dropdownRef.current,idealDirection:"down",onDismiss:this.hideFlyout,positionRelativeToAnchor:!1,size:"lg"},R)),y&&"lego-closeup"!==p&&o.a.createElement(C,{anchor:this.dropdownRef.current,idealDirection:"down",onDismiss:this.hideFlyout,positionRelativeToAnchor:!t,size:"lg"},R)))}}W(Z,"defaultProps",{variant:"pin",renderSavedStatus:({savedInfo:e,variant:t})=>o.a.createElement($,{savedInfo:e,variant:t})});t.default=o.a.memo(Object(w.compose)(L.e,Object(i.connect)(({location:e,mostRecentBoard:t,pins:n,ui:a,viewer:o},{pin:{id:i}})=>{const r=n[i],{postRepinMoreIdeasUpsell:s}=a;return{carousel_data:r&&r.carousel_data,isLimitedLogin:o.isLimitedLogin,savedInfo:r&&r.savedInfo,selectedItem:r&&r.selectedItem,location:e,postRepinMoreIdeasUpsell:s,mostRecentBoard:t,viewerUserId:o.id}},e=>({incrementBoardPinCount:({boardId:t,sectionId:n})=>e(Object(S.d)({boardId:t,sectionId:n,increment:1})),save:t=>e(Object(P.a)(t)),unsave:t=>e(Object(P.d)(t)),selectBoardOrSection:t=>e(Object(P.b)(t)),setMostRecentBoard:(t,n,a)=>e(Object(B.a)(t,n,a)),searchQueryInvalidated:t=>e(Object(x.b)(t)),showRepinAnimation:t=>e(Object(O.b)(t)),updateUserPinCount:t=>e(Object(T.b)({userId:t,increment:1}))})),q.c,Object(U.c)({name:"BoardPickerBoardsResource",key:"boardResource",options:()=>({field_set_key:"board_picker"})}),Object(U.c)({name:"BoardPickerBoardsShortlistResource",key:"suggestedBoardsShortListResource",options:e=>({pin_id:e.pin.id,shortlist_length:2,num_shortlist_suggestions:2,suggestions_only:!0,min_confidence:.5})}))((function(e){const{suggestedBoardsShortListResource:t,initialSelection:n,mostRecentBoard:a}=e;if(n)return o.a.createElement(Z,Object.assign({},e,{postRepinUpsellDisabled:!0,unselectedText:n.title}));const i=t&&t.data&&t.data[0];return o.a.createElement(z.c,{overflow:"hidden"},o.a.createElement(Z,Object.assign({},e,{initialSelection:t&&t.isLoaded&&i&&{boardId:i.id,title:i.name,url:i.url}||t&&t.isLoaded&&!i&&a&&{boardId:a.id,title:a.name,url:a.url}||void 0,unselectedText:t&&t.isLoaded?h.a._("Select","BetterSave label to pick a board from the list","BetterSave label to pick a board from the list"):"..."})))})))},fZ0m:function(e,t,n){const a={get(e){(()=>Promise.resolve().then(n.bind(null,"6tKR")))().then(({default:t})=>{t.load([],"https://apis.google.com/js/client:platform.js","gplus"),t.ready("gplus",()=>{e(window.gapi)})})}};t.a=a},gx0O:function(e,t,n){const a=function(e,t){this.uid=e,this.item=t,this.next=null,this.prev=null},o=function(e){this._maxNumItems=e||10,this._uidToData={},this._numItems=0,this._firstData=null,this._lastData=null};o.prototype.set=function(e,t){let n=this._uidToData[e];n||(n=new a(e,t),this._uidToData[e]=n,this._numItems+=1),this._moveToFront(n),this._numItems>this._maxNumItems&&this._evict()},o.prototype.get=function(e){const t=this._uidToData[e];return t?(this._moveToFront(t),t.item):null},o.prototype.remove=function(e){const t=this._uidToData[e];t&&(delete this._uidToData[e],this._firstData===t&&(this._firstData=t.next),this._lastData===t&&(this._lastData=t.prev),t.prev&&(t.prev.next=t.next),t.next&&(t.next.prev=t.prev),this._numItems-=1)},o.prototype._moveToFront=function(e){this._firstData!==e&&(this._firstData?(this._lastData===e&&(this._lastData=e.prev),e.prev&&(e.prev.next=e.next),e.next&&(e.next.prev=e.prev),this._firstData.prev=e,e.next=this._firstData,e.prev=null,this._firstData=e):(this._firstData=e,this._lastData=e))},o.prototype._evict=function(){delete this._uidToData[this._lastData.uid],this._firstData===this._lastData?(this._firstData=null,this._lastData=null):(this._lastData=this._lastData.prev,this._lastData.next=null),this._numItems-=1},t.a=o},idmN:function(e,t,n){var a=n("ZWtO"),o=n("FZoo"),i=n("4uTw");e.exports=function(e,t,n){for(var r=-1,s=t.length,c={};++r<s;){var l=t[r],d=a(e,l);n(d,l)&&o(c,i(l,e),d)}return c}},"mVx/":function(e,t,n){var a=n("XKAG")(n("JELi"));e.exports=a},mvLR:function(e,t,n){function a(e){let t=!1;return{promise:new Promise((n,a)=>{e.then(e=>t?a({isCanceled:!0}):n(e),e=>a(t?{isCanceled:!0}:e))}),cancel(){t=!0}}}n.d(t,"a",(function(){return a}))},"n+wb":function(e,t,n){var a=n("q1tI"),o=n.n(a),i=n("Ye/N"),r=n("uiRf"),s=n("xdpg"),c=n("n6mq");function l(e){const{body:t,img:n,onClick:o,selected:r,title:s,username:l,valid:d}=e,u=l||t;return a.createElement(c.c,{marginBottom:4},a.createElement(c.P,{onTouch:o},a.createElement(c.c,{display:"flex",alignItems:"center",direction:"row",width:"100%"},n,a.createElement(c.c,{marginLeft:3,flex:"grow",marginRight:2},a.createElement(c.c,{marginBottom:1},a.createElement(c.K,{truncate:!0,weight:"bold"},s)),a.createElement(c.K,{size:"sm",truncate:!0},u)),a.createElement(c.c,{marginLeft:2},((e,t)=>{if(l)return e?a.createElement(c.n,{icon:"check-circle",color:"red",accessibilityLabel:i.a._("Confirmation an invite will be sent","Alt tags on a check box on the board create flow for board invites","Alt tags on a check box on the board create flow for board invites"),size:32}):a.createElement(c.c,{height:32,width:32,rounding:"circle",dangerouslySetInlineStyle:{__style:{border:"solid 1px #B5B5B5"}}});{const n={text:i.a._("Sent","Sent a board collaborator invite","Sent a board collaborator invite"),color:"gray",size:"sm",disabled:!0,inline:!0};return e||(n.text=i.a._("Invite","Add board collaborator invite","Add board collaborator invite"),n.disabled=Boolean(!t)),a.createElement(c.d,n)}})(r,d)))))}var d=n("zLLH"),u=n("ZE2w");function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(e,t,n){const{id:a}=e;return t===n.findIndex(e=>e.id===a)}t.a=Object(d.c)({name:"ShareSuggestionsResource",key:"shareSuggestionsResource"},{allowStale:!1})(class extends a.Component{constructor(...e){super(...e),h(this,"state",{selectedCollaborators:[],typeaheadSuggestions:[],value:""}),h(this,"handleTextFieldChange",({value:e})=>{this.setState({value:e})}),h(this,"handleCollaboratorClick",e=>{const{id:t,type:n}=e;this.isIdSelected[t]=!this.isIdSelected[t];const{selectedCollaborators:a}=this.state,o=a.concat([e]),i="email"===n?u.c:u.d;this.props.onSelectedCollaboratorsChange({id:t,resource:i}),this.setState({selectedCollaborators:o})}),h(this,"handleTypeaheadSuggestionsChange",e=>{this.setState({typeaheadSuggestions:e})}),h(this,"isIdSelected",{})}render(){const{value:e}=this.state,{shareSuggestionsResource:{data:t}}=this.props,n=t||[],d=(""===e?n:this.state.selectedCollaborators.concat(this.state.typeaheadSuggestions).concat({type:"email",id:e,valid:Object(s.g)(e)}).concat(n).filter(p)).map((e,t)=>(function(e,t,n){if("user_share_suggestion"===e.type||"user"===e.type){const o=a.createElement(c.a,{name:e.title||e.full_name,src:e.image_medium_url,size:"md"});return a.createElement(l,{img:o,onClick:()=>n(e),selected:t,title:e.full_name,username:e.username})}if("email"===e.type){const{id:o,valid:r}=e,d=a.createElement(c.c,{rounding:"circle",color:"lightGray",height:40,width:40,display:"flex",justifyContent:"center",alignItems:"center"},a.createElement(c.n,{color:"darkGray",icon:"envelope",size:20,accessibilityLabel:i.a._("Email icon","Email icon on board create modal","Email icon on board create modal")})),u=Object(s.c)(i.a._("Email {{ email }}"),{email:o});let h,p;return t?(h=i.a._("Done!","Text that lets the user know we sent the board invite email","Text that lets the user know we sent the board invite email"),p=()=>void 0):(h=r?i.a._("Click to send!","Text that lets the user know they can successfully send a board invite email","Text that lets the user know they can successfully send a board invite email"):i.a._("Keep typing!","Text that lets a user know the email they are typing is not valid yet","Text that lets a user know the email they are typing is not valid yet"),p=()=>r?n(e):void 0),a.createElement(l,{body:h,img:d,onClick:p,selected:t,title:u,valid:r})}})(e,this.isIdSelected[e.id],this.handleCollaboratorClick)).map((e,t)=>o.a.createElement("li",{key:t},e));return o.a.createElement(c.c,{display:"flex",direction:"column",height:"100%"},o.a.createElement(c.c,{paddingX:3,paddingY:3},o.a.createElement(c.K,null,i.a._("Add collaborators (optional)","Optional field to add collaborators to a board on board create","Optional field to add collaborators to a board on board create"))),o.a.createElement(c.c,{paddingX:3,marginTop:2,marginBottom:4,width:"100%"},o.a.createElement(c.c,{flex:"grow"},o.a.createElement(r.a,{onTypeaheadSuggestionsChange:this.handleTypeaheadSuggestionsChange,resourceName:"ShareSuggestionsTypeaheadResource",value:e},o.a.createElement(c.D,{accessibilityLabel:i.a._("Search for collaborators by name or email"),id:"CollaboratorInviteSearchField",onChange:this.handleTextFieldChange,placeholder:i.a._("Search by name or email"),size:"lg",value:e})))),o.a.createElement(c.c,{paddingX:3,overflow:"scrollY"},o.a.createElement("ul",null,d)))}})},nKlH:function(e,t,n){n.d(t,"a",(function(){return c}));var a=n("q1tI"),o=n.n(a),i=n("i8i4"),r=n("n6mq");function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class c extends a.Component{constructor(...e){super(...e),s(this,"setSearchFieldRef",e=>{this.searchField||(this.searchField=e)}),s(this,"setFocus",()=>{if(this.searchField){const e=Object(i.findDOMNode)(this.searchField);if(e instanceof HTMLElement){const t=e.querySelector("input");t instanceof HTMLInputElement&&t.focus()}}})}componentDidMount(){this.props.focused&&window.requestAnimationFrame(this.setFocus)}componentDidUpdate(){this.props.focused&&this.setFocus()}render(){const{accessibilityLabel:e,id:t,onBlur:n,onChange:a,onFocus:i,placeholder:s,value:c}=this.props;return o.a.createElement(r.D,{accessibilityLabel:e,id:t,onBlur:n,onChange:a,onFocus:i,placeholder:s,ref:this.setSearchFieldRef,size:"lg",value:c})}}},pdBG:function(e,t,n){var a=n("AHhP"),o=n.n(a),i=n("gx0O"),r=n("eOdZ"),s=n("mBfy");const c=function(e){e=e||{},this.tags=e.tags,this.enable_recent_queries=!!e.enable_recent_queries,this.minimum_term_character_length=e.minimum_term_character_length||0,this.bypass_lru_cache=e.bypass_lru_cache;const t={tags:e.tags,pin:e.pin_id},n=e.num_places;n?t.num_places=n:t.count="count"in e?e.count:5,e.exclude_non_followers&&(t.exclude_non_followers=!0),e.field_set_key&&(t.field_set_key=e.field_set_key),e.pin_scope&&(t.pin_scope=e.pin_scope),e.suggestion_type&&(t.suggestion_type=e.suggestion_type);let a="TypeaheadResource";e.resource_name&&(a=e.resource_name),this.searchResource=r.a.create(a,t),this.itemsCache=new i.a};Object.assign(c.prototype,o.a),Object.assign(c.prototype,{search(e,t){let n;if(!e&&"pinners_and_contacts"===this.tags)return this.abortSearch(),this.publishData(e,[],{},t);if(!e&&s.default.isLimitedLogin())return this.abortSearch(),this.publishData(e,[],{},t);if(!e&&this.enable_recent_queries&&s.default&&s.default.isAuthenticated())n="recent_search";else{const n=this.bypass_lru_cache?{}:this.itemsCache.get(e);if(n){const a=n.items;if(a&&a.length){this.abortSearch();const o=n.hint;return void this.publishData(e,a,o,t)}}}e.length>=this.minimum_term_character_length?this.fetch(e,n,t):this.publishData(e,[],{},t)},getResource(){return this.searchResource},abortSearch(){this.getResource().abort()},publishData(e,t,n,a){const o={term:e,items:t,hint:n};this.trigger("data",o),a&&a(o)},setAutocompleteScope(e){this.getResource().set("autocompleteScope",e)},fetch(e,t,n){const a=this.getResource();if(a.isCalling()){const t=a.get("term");if(e===t)return;this.abortSearch()}""!==this.tags&&(a.set("term",e),a.set("tags",t||this.tags),a.resetBookmark(),a.callGet({showError:!1}).then(t=>{const a=t.resource_response.data,o=a.items,i=a.hint||{},r={hint:i,items:o};this.cacheData(e,r),this.publishData(e,o,i,n)},e=>{this.trigger("fetchError",e)}),this.warm=!0)},removeCacheForTerm(e){this.itemsCache.remove(e)},cacheData(e,t){this.itemsCache.set(e,t)},prefetch(){if(this.warm)return;r.a.create("TypeaheadPrepareResource").callGet({showError:!1}),this.warm=!0}}),t.a=c},rSLd:function(e,t,n){n.r(t),n.d(t,"CarouselEllipsis",(function(){return f}));var a=n("q1tI"),o=n.n(a),i=n("/MKj"),r=n("XSD5"),s=n("ZbwW"),c=n("0nTG"),l=n("/5zs"),d=n("U4JR"),u=n("pLLR"),h=n("n6mq"),p=n("fArA");function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const g=()=>{},b=(e,t,n,a,o,i,r,s,l,u)=>{if(!u){const{carousel_slots:u,id:h}=o;Object(d.a)(108,{...l,objectId:t,component:s,view:r,viewParameter:i,eventData:{pinCarouselSlotEventData:{carouselSlotId:u[n]&&Number(u[n].id),carouselDataId:Number(h),carouselSlotIndex:n,toCarouselSlotIndex:a}},...Object(c.a)(e)||{}})}};class f extends o.a.Component{constructor(...e){super(...e),m(this,"state",{isHovered:!1}),m(this,"handleMouseEnter",()=>{this.setState({isHovered:!0})}),m(this,"handleMouseLeave",()=>{this.setState({isHovered:!1})})}render(){const{carouselIndex:e,carouselData:t,changeCarouselSlotIndex:n,handleCarouselSwipe:a,isCloseup:i,pin:r,pinId:s,contextLogData:c,requestContext:d,viewParameter:u,viewType:p,componentType:m,isEditMode:f,closeupImageHovered:v=!1,variant:y}=this.props;if(!t)return null;const{isHovered:_}=this.state,{carousel_slots:S=[],index:w}=t,E=void 0!==e?e:w,C="default"===y,k=!i&&new l.c(d,"web_carousel_pip_improvements").enabled();d.experiments.flush();const I=k?10:C&&i||!i?8:16,x=i&&C||k?2:1,B={__style:{backgroundColor:_?"rgba(0, 0, 0, 0.05)":v?"rgba(0, 0, 0, 0)":"rgba(0, 0, 0, 0.7)"}},O=C?"white":"#555",D=C?"rgba(255, 255, 255, 0.5)":"lightGray",R=[];for(let l=0;l<S.length;l+=1){const e=l===E;R.push(o.a.createElement(h.c,{key:s+l,marginRight:l!==S.length-1?x:0},o.a.createElement(h.P,{fullWidth:!1,rounding:"circle",onTouch:({event:e})=>{f||void 0===n||(e.preventDefault(),e.stopPropagation(),n(String(s),l)),void 0!==a&&a(l),b(r,s,E,l,t,u,p,m,c,f)}},o.a.createElement(h.c,{"data-test-id":"ellipsis-size",height:I,width:I,dangerouslySetInlineStyle:{__style:{backgroundColor:e?O:D}},rounding:"circle"}))))}return o.a.createElement(h.c,Object.assign({"data-test-id":"carousel-ellipsis",display:"flex"},C&&i&&!k?{rounding:"pill",height:44,justifyContent:"center",alignItems:"center",paddingX:4,dangerouslySetInlineStyle:B}:{marginTop:1,marginLeft:f?2:-2,marginBottom:f?1:0,justifyContent:k?"center":"start",alignItems:k?"center":"stretch"},{onMouseEnter:C?this.handleMouseEnter:g,onMouseLeave:C?this.handleMouseLeave:g}),R)}}t.default=Object(p.compose)(Object(i.connect)(({pins:e},{carouselData:t,pinId:n})=>{const a=e[n];return{pin:a,carouselData:t||Object(s.a)(a)}},e=>({changeCarouselSlotIndex:(t,n)=>e(Object(r.a)(t,n))})),u.e)(f)},uVIr:function(e,t,n){function a(e){return{type:"FEED_ITEMS_ADDED",payload:e}}n.d(t,"a",(function(){return a}))},uiRf:function(e,t,n){n.d(t,"a",(function(){return r}));var a=n("q1tI"),o=(n("17x9"),n("pdBG"));function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class r extends a.Component{constructor(...e){super(...e),i(this,"searchCache",Object.create(null)),i(this,"lastSearchedQuery",null),i(this,"search",e=>{this.lastSearchedQuery=e,e in this.searchCache?this.props.onTypeaheadSuggestionsChange(this.searchCache[e],e):this.provider.search(e,({items:t})=>{this.searchCache[e]=t,e===this.lastSearchedQuery&&this.props.onTypeaheadSuggestionsChange(t,e)})})}componentDidMount(){const e=this.props.resourceOptions||{};this.provider=new o.a({resource_name:this.props.resourceName,...e});const{value:t}=this.props;null!=t&&this.props.allowSearchOnMount&&this.search(this.props.value)}UNSAFE_componentWillReceiveProps({value:e}){null!=e&&e!==this.props.value&&this.search(e)}render(){return this.props.children||null}}i(r,"defaultProps",{resourceName:"TypeaheadResource"})},vxan:function(e,t,n){n.d(t,"a",(function(){return r}));var a=n("q1tI"),o=n("mvLR");function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e){var t,n;return n=t=class extends a.Component{constructor(...e){super(...e),i(this,"makeCancelablePromise",(e,t)=>{if(t){const e=this.cancelCallbackMap[t];e&&(e(),delete this.cancelCallbackMap[t])}const{cancel:n,promise:a}=Object(o.a)(e);return t?this.cancelCallbackMap[t]=n:this.cancelCallbacks.push(n),a}),i(this,"cancelCallbacks",[]),i(this,"cancelCallbackMap",{})}componentWillUnmount(){[...Object.keys(this.cancelCallbackMap).map(e=>this.cancelCallbackMap[e]),...this.cancelCallbacks].forEach(e=>e()),this.cancelCallbacks=[],this.cancelCallbackMap={}}render(){return a.createElement(e,Object.assign({},this.props,{makeCancelablePromise:this.makeCancelablePromise}))}},i(t,"displayName",`WithPromiseCancellation(${e.displayName||e.name})`),n}},"w/op":function(e,t,n){},xOLo:function(e,t,n){n.r(t),n.d(t,"CarouselSliders",(function(){return g}));var a=n("q1tI"),o=n.n(a),i=n("/MKj"),r=n("XSD5"),s=n("ZbwW"),c=n("Ye/N"),l=n("0nTG"),d=n("U4JR"),u=n("n6mq");const h={slider:{cursor:"pointer",height:"100%",position:"relative",width:"10%",zIndex:"105",pointerEvents:"auto"}},p=(e,t,n,a,o,i,r,s,c,u)=>{if(!u||!o){const{carousel_slots:u,id:h}=o;Object(d.a)(108,{...c,objectId:t,component:s,view:r,viewParameter:i,eventData:{pinCarouselSlotEventData:{carouselSlotId:u[n]&&Number(u[n].id),carouselDataId:Number(h),carouselSlotIndex:n,toCarouselSlotIndex:a}},...Object(l.a)(e)||{}})}},m=(e,t,n,a,o,i)=>{i||void 0===a||(e.preventDefault(),e.stopPropagation(),a(t,n)),void 0!==o&&o(n)},g=({carouselIndex:e,carouselData:t,changeCarouselSlotIndex:n,handleCarouselSwipe:a,pin:i,pinId:r,contextLogData:s,viewParameter:l,viewType:d,componentType:g,isEditMode:b})=>{if(!t)return null;const{carousel_slots:f,index:v}=t,y=void 0!==e?e:v,_=Math.max(0,y-1),S=Math.min(f.length-1,y+1);return o.a.createElement(u.c,{display:"flex",justifyContent:"between",position:"absolute",left:!0,right:!0,bottom:!0,top:!0},o.a.createElement("div",{"data-test-id":"carousel-slider-left",role:"presentation",onClick:e=>{m(e,r,_,n,a,b),p(i,r,y,_,t,l,d,g,s,b)},onKeyUp:e=>{m(e,r,_,n,a,b),p(i,r,y,_,t,l,d,g,s,b)},style:h.slider},y>0&&o.a.createElement(u.c,{height:"100%",width:"100%",display:"flex",alignItems:"center",justifyContent:"center"},o.a.createElement(u.n,{color:"white",icon:"arrow-back",accessibilityLabel:c.a._("View Previous","Button to advance carousel to the previous image","Button to advance carousel to the previous image")}))),o.a.createElement("div",{"data-test-id":"carousel-slider-right",role:"presentation",onClick:e=>{m(e,r,S,n,a,b),p(i,r,y,S,t,l,d,g,s,b)},onKeyUp:e=>{m(e,r,S,n,a,b),p(i,r,y,S,t,l,d,g,s,b)},style:h.slider},y<f.length-1&&o.a.createElement(u.c,{height:"100%",width:"100%",display:"flex",alignItems:"center",justifyContent:"center"},o.a.createElement(u.n,{color:"white",icon:"arrow-forward",accessibilityLabel:c.a._("View Next","Button to advance carousel to the next image","Button to advance carousel to the next image")}))))};t.default=Object(i.connect)(({pins:e},{carouselData:t,pinId:n})=>{const a=e[n];return{pin:a,carouselData:t||Object(s.a)(a)}},e=>({changeCarouselSlotIndex:(t,n)=>e(Object(r.a)(t,n))}))(g)}}]);
//# sourceMappingURL=pjs-PinBetterSaveCommon-670f6e69249fe2fbf396.mjs.map
