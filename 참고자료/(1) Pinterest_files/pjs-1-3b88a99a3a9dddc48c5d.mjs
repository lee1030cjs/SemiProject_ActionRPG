(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([[1],{"/zJj":function(e,t,n){n.d(t,"c",(function(){return i})),n.d(t,"d",(function(){return r})),n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return a})),n.d(t,"g",(function(){return s})),n.d(t,"f",(function(){return c})),n.d(t,"e",(function(){return d}));const i=1016,r=508,o=40,a=72,s=740,c=60,d={ARTICLE:"https://schema.org/Article",BRAND:"https://schema.org/Brand",PRODUCT:"https://schema.org/Product",RECIPE:"https://schema.org/Recipe",OFFER:"https://schema.org/Offer",OUT_OF_STOCK:"https://schema.org/OutOfStock",PERSON:"https://schema.org/Person"}},"078/":function(e,t,n){n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return r}));const i=["AuthHomefeed","CloseupRelatedProducts","FollowingFeedGrid","RelatedPinGrid","RelatedProductsFeed","SearchItem"],r=["BaseBoardPinGrid"]},"0S8y":function(e,t,n){n.d(t,"a",(function(){return o})),n.d(t,"c",(function(){return a})),n.d(t,"d",(function(){return s})),n.d(t,"b",(function(){return c}));var i=n("fAMq");const r=28;function o(e){const t={},n=e.trim();n.length>0&&(t.full_name=n);const i=n.split(/ (.+)/);return""===i[0]&&i.shift(),i.length>0&&(t.first_name=i[0]||""),i.length>1&&(t.last_name=i[1]||""),t}function a({user:e,days:t=r}){if(!e||!e.createdAt)return!1;const n=new Date(e.createdAt),o=Object(i.h)(-t,n),a=new Date;return!Object(i.g)(a,o)}function s({user:e,days:t=r}){if(!e.resurrectionInfo)return!1;const n=e.resurrectionInfo.resurrectionDate,o=new Date,a=n?new Date(n):o,s=Object(i.c)(a,t);return Object(i.g)(s,o)}function c(e){return e&&e[1000069]&&500417===e[1000069].experience_id}},"3gA6":function(e,t,n){var i=n("q1tI"),r=n.n(i),o=n("/MKj"),a=n("xAAE"),s=n("4dcN"),c=n("ajUs"),d=n("eOdZ"),l=n("gxu6"),u=n("zwad");var h={open(e,t,n,i,r){const o=Math.round(1e3*Math.random())+"",s=Math.round(1e3*Math.random())+"";l.b("offsite_"+o,s);const c={token:o+"-"+s,url:e};t?c.pin=t:n&&(c.csr=n),i&&(c.client_tracking_params=i),r&&(c.aux_data=JSON.stringify(r)),Object(a.a)("/offsite/?"+u.a.getQueryStringFromObject(c),!0)}};var p=n("n02X"),f=n("C0mq"),m=n("fArA"),g=n("a9a9"),y=n("Y8Sn"),v=n("078/");function _(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",(function(){return w}));const b=["blocked","suspicious","porn"],E=(e,t,n,i,r)=>{const o={check_only:i,client_tracking_params:Object(c.a)(e,t),pin_id:e.id,url:n,aux_data:JSON.stringify(r)};return d.a.create("OffsiteLinkResource",o)},O=()=>{window&&window.focus(),document.activeElement&&document.activeElement.blur()};class T extends i.Component{constructor(...e){super(...e),_(this,"state",{spamCheck:null}),_(this,"spamCheckExperimentGroup",null),_(this,"mounted",!1),_(this,"shouldCheckBySurface",()=>{const{location:e,pinId:t="",surface:n}=this.props,i=Boolean(n),r=v.a.includes(n),o=e.pathname.includes(t);return!!(i&&!r||o)}),_(this,"handleSpammyDomainCheck",()=>{const{external:e,location:t,pin:n,to:i}=this.props,r=(e||u.a.isOffsiteUrl(i))&&n&&!Object(y.g)(n)&&this.shouldCheckBySurface()&&i,o=this.mounted;r&&E(n,t,i,!0).callGet({showError:!1}).then(e=>{if(!(e&&e.resource_response&&e.resource_response.error)&&o){const{message:t,redirect_status:n,url:i}=e&&e.resource_response&&e.resource_response.data,r={blocked:b.includes(n),message:t,redirectStatus:n,sanitized_url:i};this.setState({spamCheck:r})}})}),_(this,"handleExternalClickthrough",()=>{const{auxData:e,location:t,pin:n,pinId:i,to:r}=this.props,{spamCheck:o}=this.state;(null==o?void 0:o.blocked)?Object(g.b)(o):h.open(r,i,null,Object(c.a)(n,t),e)}),_(this,"handleClick",e=>{const{auxData:t,external:n,focusOnBody:i,forceOnClick:r,gaCategory:o,history:l,internalNewTab:p,location:f,onClick:m,pin:g,pinId:y,shouldShowAltLinks:v,stopPropagation:_,to:b}=this.props;o&&s.a.trackEvent(o,"click"),_&&e.stopPropagation();const E=n||u.a.isOffsiteUrl(b);(E||!e.metaKey&&!e.ctrlKey||r)&&(e.nativeEvent.preventDefault(),m&&m(e),b&&!v&&(E&&"undefined"!=typeof window&&window.Windows?function({url:e,pinId:t,pin:n,location:i,auxData:r}){const o={check_only:!0,client_tracking_params:n?Object(c.a)(n,i):void 0,pin_id:n?n.id:t,url:e,aux_data:JSON.stringify(r)};d.a.create("OffsiteLinkResource",o).callGet().then(o=>{if(o&&o.resource_response&&!o.resource_response.error){const{resource_response:e}=o,{redirect_status:t,url:n}=e.data;if(!["blocked","suspicious","porn"].includes(t)){const e=new window.Windows.Foundation.Uri(n);return void window.Windows.System.Launcher.launchUriAsync(e)}}if(n){const o=Object(c.a)(n,i);h.open(e,t,null,o,r)}else h.open(e,t)})}({url:b,pinId:y,pin:g,location:f,auxData:t}):E&&g?this.handleExternalClickthrough():E?h.open(b,y):u.a.getUrlClass(b)===u.a.UrlClass.TRUSTED_DIFFERENT_ORIGIN?Object(a.a)(b,!1):p?Object(a.a)(b,!0):l&&(l.push(b),i&&O())))})}componentDidMount(){this.mounted=!0,this.handleSpammyDomainCheck()}componentWillUnmount(){this.mounted=!1}componentDidUpdate(){null===this.state.spamCheck&&this.handleSpammyDomainCheck()}render(){const{category:e,children:t,className:n,elementType:i,external:o,forceRefresh:a,noFollow:s,shouldCaptureClick:c,style:d,target:l,"data-test-id":u,to:h}=this.props,p={className:n,"data-category":e,"data-force-refresh":a,"data-test-id":u,href:h,[`${c?"onClickCapture":"onClick"}`]:this.handleClick,rel:o||s?"nofollow":"",style:d,target:l?"_blank":null,...null!==i?{"data-element-type":i}:{}};return r.a.createElement("a",p,t)}}const w={".HomeButton2":Object(m.compose)(Object(p.a)(".HomeButton2"),f.a)(T)};t.b=Object(m.compose)(Object(o.connect)((function({pins:e},{pinId:t}){return{pin:t&&e&&e[t]}}),()=>({})),f.a)(T)},"51gp":function(e,t,n){var i=n("q1tI"),r=n.n(i),o=n("sEfC"),a=n.n(o),s=n("vYDk");var c=n("BEAQ"),d=n("9pre"),l=n("U4JR"),u=n("n6mq");function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",(function(){return E}));const p=[0,.25,.5,.75,.95,.97],f=[0,.5,.8,1],m={threshold:f},g={rootMargin:"-64px 0px 0px 0px",threshold:d.c},y=1e3,v=Object.freeze({LOADING:0,PLAYING:1,PAUSED:2,STALLING:3});function _(){return(new Date).getTime()}function b(e){return!!e.volume&&e.volume>0}class E extends r.a.Component{constructor(e){super(e),h(this,"handleWindowResize",()=>{if(!this.fullscreen){const e=this.getDimensions(),{height:t,width:n}=this.currentInterval;e.height!==t||e.width!==n?this.startNewInterval(e):(this.currentInterval.windowHeight=e.windowHeight,this.currentInterval.windowWidth=e.windowWidth)}}),h(this,"handlePlayheadDown",({event:e})=>{const{onPlayheadDown:t}=this.props;this.setState({seeking:!0}),t&&t({event:e})}),h(this,"handlePlayheadUp",({event:e})=>{const{onPlayheadUp:t}=this.props;this.setState({seeking:!1}),t&&t({event:e})}),h(this,"handleLoop",()=>{this.videoTime=0}),h(this,"handleTimeChange",e=>{const{seeking:t,ready:n}=this.state;if(!this.currentInterval.videoDuration)return;const i=e.time*y,r=function(e,t,n,i){if(e>t)return null;if(n<=0)return null;for(const r of i){const i=r*n;if(e<=i&&t>i)return r}return null}(this.videoTime,i,this.currentInterval.videoDuration,p);if("number"==typeof r&&this.props.playing&&!t&&n){const e=_();this.logVideoEvent(6906,{...this.currentInterval,startTime:e,endTime:e,videoStartTime:0,videoEndTime:0,quartile:Math.floor(4*r),quartilePercentValue:r})}this.videoTime=i,this.props.onTimeChange&&this.props.onTimeChange(e)}),h(this,"handleDurationChange",e=>{this.currentInterval.videoDuration=e.duration*y,this.props.onDurationChange&&this.props.onDurationChange(e)}),h(this,"handleReady",e=>{const{ready:t}=this.state;t||this.setState({ready:!0}),this.props.onReady&&this.props.onReady(e)}),h(this,"onEnded",e=>{this.logFourthQuartileEvent(),this.props.loop&&(this.startNewInterval(),this.currentInterval.videoStartTime=0),this.props.onEnded&&this.props.onEnded(e)}),h(this,"handleVisibilityChange",(e,t)=>{if(0===e.length)return;const n=e.slice(-1)[0],i=function(e){return function(e,t){for(let n=0;n<t.length;n+=1){const i=t[n],r=t[n+1];if(null==r)return i;if(i<=e&&e<r)return i}return null}(e,f)}(Number.parseFloat(n.intersectionRatio.toFixed(2)));null==i||i===this.currentInterval.viewability||this.fullscreen||(0===i?this.startNewInterval({viewability:i,playbackState:v.PAUSED}):this.startNewInterval({viewability:i}))}),h(this,"onFullscreenChange",({event:e,fullscreen:t})=>{if(t){const{height:e,width:t}=window.screen;this.startNewInterval({height:e,width:t,windowHeight:e,windowWidth:t})}else t||this.startNewInterval(this.getDimensions());this.fullscreen=t,this.props.onFullscreenChange&&this.props.onFullscreenChange({event:e,fullscreen:t})}),h(this,"handleClose",()=>{this.startNewInterval()}),h(this,"handleContextMenu",e=>{e.preventDefault()}),this.state={ready:!1,seeking:!1};const t=_();this.handleWindowResize=a()(this.handleWindowResize,1e3),this.videoWrapperRef=r.a.createRef(),this.currentInterval={videoDuration:0,startTime:t,endTime:t,videoStartTime:0,videoEndTime:0,isAudible:b(e),playbackState:this.getPlaybackState(e,this.state),quartile:-1,quartilePercentValue:0,height:null,width:null,windowHeight:null,windowWidth:null,viewability:null},this.videoTime=0,this.fullscreen=!1}componentDidMount(){this.currentInterval={...this.currentInterval,...this.getDimensions()},window.addEventListener("resize",this.handleWindowResize),window.addEventListener("beforeunload",this.handleClose)}componentDidUpdate(e,t){const n={};b(e)&&!b(this.props)?n.isAudible=!1:!b(e)&&b(this.props)&&(n.isAudible=!0);const i=this.getPlaybackState(this.props,this.state);this.getPlaybackState(e,t)!==i&&(n.playbackState=i),Object.keys(n).length>0&&this.startNewInterval(n)}componentWillUnmount(){window.removeEventListener("resize",this.handleWindowResize),window.removeEventListener("beforeunload",this.handleClose),this.startNewInterval()}getPlaybackState(e,t){return t.ready?e.playing&&!t.seeking?v.PLAYING:v.PAUSED:v.LOADING}getDimensions(){let e,t;if("object"==typeof this.videoWrapperRef&&this.videoWrapperRef.current){const n=this.videoWrapperRef.current;n.clientHeight&&n.clientWidth&&(e=n.clientHeight,t=n.clientWidth)}return{height:e,width:t,windowHeight:window.innerHeight,windowWidth:window.innerWidth}}logVideoEvent(e,t){const{contextLogData:n}=this.props,{height:i,width:r,windowHeight:o,windowWidth:a,viewability:s,...c}=t;if(null!=i&&null!=r&&null!=o&&null!=a&&null!=s){const t={...c,height:i,width:r,windowHeight:o,windowWidth:a,viewability:s};Object(l.a)(e,function(e){const{eventData:{videoEvent:{videoDuration:t,startTime:n,endTime:i,videoStartTime:r,videoEndTime:o,isAudible:a,height:s,width:c,playbackState:d,quartile:l,quartilePercentValue:u,windowHeight:h,windowWidth:p,viewability:f}},...m}=e;return{...m,eventData:{videoEventData:{videoDuration:t,time:n,endTime:i,videoTime:r,endVideoTime:o,isAudible:a,height:s,width:c,playbackState:d,quartile:l,quartilePercentValue:u,windowHeight:h,windowWidth:p,viewability:f}}}}({...n,view:this.fullscreen?108:n.view,eventData:{videoEvent:t}}))}}logFourthQuartileEvent(){const e=_();this.logVideoEvent(6906,{...this.currentInterval,startTime:e,endTime:e,videoStartTime:0,videoEndTime:0,quartile:4,quartilePercentValue:1})}startNewInterval(e){const t=_();this.logVideoEvent(6904,{...this.currentInterval,endTime:t,videoEndTime:this.videoTime}),this.currentInterval={...this.currentInterval,...e,startTime:t,videoStartTime:this.videoTime,endTime:-1,videoEndTime:-1}}render(){const{contextLogData:e,inAdsDesktopVideoExperiment:t,rootMargin:n,...i}=this.props,{seeking:o}=this.state;i.onDurationChange=this.handleDurationChange,i.onReady=this.handleReady,i.onTimeChange=this.handleTimeChange,i.onEnded=this.onEnded,i.onFullscreenChange=this.onFullscreenChange,i.onPlayheadDown=this.handlePlayheadDown,i.onPlayheadUp=this.handlePlayheadUp,i.onLoop=this.handleLoop,i.playing=!o&&this.props.playing;const a=t?g:m;return void 0!==n&&(a.rootMargin=n),r.a.createElement(s.a,{options:a,onVisibilityChange:this.handleVisibilityChange},r.a.createElement("div",{ref:this.videoWrapperRef,onContextMenu:this.handleContextMenu},r.a.createElement(c.a,i)))}}h(E,"defaultProps",u.Q.defaultProps)},"7jH2":function(e,t,n){var i=n("/zJj");var r=({imgSrc:e,isGif:t,pin:n,showCloseupContentRight:r,viewportSize:o})=>{const a=b(Object(O.a)({pin:n})),{image564x:s={}}=g(a)||{},{imageOrig:c={}}=v(a)||{},d=0===Object.keys(s).length?c:s,l=d.height,u=d.width,{image236x:h={}}=m(b(Object(O.a)({pin:n})))||{},p=h.url,f=Math.max(Math.min(u,i.d),60),y=f/u*l;return{alt:n.description,src:t?e:p,naturalHeight:y,naturalWidth:f}},o=n("Nle8");function a(e){return!e.is_promoted}var s=e=>{const t=(e||[]).reduce((e,t)=>t.name?e.concat({name:t.name}):e,[]);return t.length>0?t:null};function c(e){if(e&&e.pin){const t=e.pin.rich_metadata;if(t)return t.products?144:t.article?141:t.recipe?145:139;if(e.pin.story_pin_data)return 157}return 140}var d=n("pOug");var l=Object(d.a)(e=>{const{richMetadata:t}=e,{article:n}=t,{name:i,description:r,authors:o,date_published:a}=n||{};return i?{...e,article:{name:i,description:r,authors:s(o),datePublished:a&&new Date(a)||void 0}}:null});var u=Object(d.a)(e=>{const{attribution:t}=e.pin,{author_url:n,url:i,author_name:r,title:o,provider_name:a,cc_url:s,embed:c}=t||{};return a&&i?{...e,attribution:{providerUrl:i,providerName:a,title:o,authorUrl:n,authorName:r,ccUrl:s,embed:c}}:null});var h=Object(d.a)(e=>{const{categorizedIngredients:t}=e.recipe;return t&&t.length>0?{...e,categorizedIngredients:t}:null});var p=Object(d.a)(e=>{const{display_name:t}=e.richSummary;return t?{...e,displayName:t}:null});const f=e=>t=>{const{images:n}=t,i=n[e],{url:r,width:o,height:a}=i||{};return r&&o&&a?{url:r,width:o,height:a}:null},m=Object(d.a)(e=>{const t=f("236x")(e);return t&&{...e,image236x:t}}),g=Object(d.a)(e=>{const t=f("564x")(e);return t&&{...e,image564x:t}}),y=Object(d.a)(e=>{const t=f("736x")(e);return t&&{...e,image736x:t}});var v=Object(d.a)(e=>{const{images:t}=e,n=t.orig,{url:i,width:r,height:o}=n||{};return i&&r&&o?{...e,imageOrig:{url:i,width:r,height:o}}:null});var _=Object(d.a)(e=>{const{embed:t}=e.pin,{type:n,src:i,subtype:r}=t||{},{attribution:o={}}=u(e)||{},{embed:a={}}=o,{src:s}=a,c=i||s;return c?{...e,embed:{type:n,src:c,subtype:r}}:null});var b=Object(d.a)(e=>{const{pin:t}=e,{images:n}=t,i=Object.keys(n||{}).reduce((e,t)=>{const i=n[t],{url:r,width:o,height:a}=i;return e&&r&&o&&a?{...e,[t]:{url:r,width:o,height:a}}:null},{});return i&&Object.keys(i).length>0?{...e,images:i}:null});var E=Object(d.a)(e=>{const{pin:t}=e,{tracked_link:n,link:i}=t,r=n||i;return r?{...e,link:r}:null}),O=n("O1y+");var T=Object(d.a)(e=>{const{pin:t}=e,{aggregated_pin_data:n}=t,{pin_tags:i}=n||{};return i?{...e,pinTags:i}:null});var w=Object(d.a)(e=>{const{pin:t,richMetadata:n}=e,{buyable_availability:i}=t,{products:r}=n,o=Array.isArray(r)?r.map(e=>{const{name:t,offer_summary:n}=e,{in_stock:r,min_price:o,max_price:a,price:s}=n||{};let c=null;return void 0!==o&&void 0!==a?c=`${o} - ${a}`:void 0!==s&&(c=`${s}`),t?{name:t,outOfStock:!1===i||!1===r,priceText:c}:null}).filter(e=>null!==e):[];return o.length>0?{...e,products:{first:o[0],rest:o.slice(1)}}:null}),D=n("PsyL");const C=e=>{const{h:t,m:n}=e||{},i={hours:t||0,minutes:n||0};return void 0!==t||void 0!==n?{h:t,m:n,time:i,isoDuration:Object(D.a)(i)}:null};var S=Object(d.a)(e=>{const{richMetadata:t}=e,{recipe:n}=t,{name:i,categorized_ingredients:r,diets:o,from_aggregated_data:a,cook_times:s,servings_summary:c}=n||{},{total:d,cook:l,prep:u}=s||{},{summary:h}=c||{},p=C(u),f=C(l),m=C(d);return i?{...e,recipe:{name:i,categorizedIngredients:r,diets:o,fromAggregatedData:a,prepTime:p,cookTime:f,totalTime:m,servingSummary:h}}:null});var I=Object(d.a)(e=>{const{rich_metadata:t}=e.pin;return t?{...e,richMetadata:t}:null});var R=Object(d.a)(e=>{const{rich_summary:t}=e.pin;return t?{...e,richSummary:t}:null});var P=Object(d.a)(e=>{const{title:t}=e.richMetadata;return t?{...e,title:t}:null});var A=Object(d.a)(e=>{const{pin:t,inChangeTitlesExp:n}=e,{carousel_data:i,title:r,closeup_unified_title:o}=t;let a=n?o:r;if(i){const{carousel_slots:e=[],index:t}=i;e[t]&&e[t].title&&(a=e[t].title)}return a?{...e,title:a}:null});var M=Object(d.a)(e=>{const{richMetadata:t}=e,{tutorial:n}=t,{name:i,description:r,from_aggregated_data:o}=n||{};return n&&i?{...e,tutorial:{name:i,description:r,fromAggregatedData:o}}:null});const j=e=>{const{thumbnail:t,url:n,width:i,height:r,duration:o}=e||{};return t&&n&&i&&r&&{thumbnail:t,url:n,width:i,height:r,duration:o}||void 0};var k=Object(d.a)(e=>{const{videos:t}=e.pin,{id:n,video_list:i={}}=t||{},{V_720P:r,V_HLSV4:o,V_HLSV3_MOBILE:a}=i,s=j(o),c=j(a),d=j(r),l=d||s||c;return n&&l?{...e,video:{id:n,hasVideo:l,mp4:d||void 0,hls:s||void 0,hlsv3:c||void 0}}:null});var N=e=>{const{hlsv3:t,hls:n}=e,i=t||n;return!!i&&i.width>i.height},x=(...e)=>{},F=n("VpfY"),L=({viewer:e,pin:t,boardCount:n})=>(!t.content_sensitivity||!t.content_sensitivity.is_sensitive_content)&&(!Object(F.i)({viewer:e,pin:t})&&void 0!==n&&n>=2),H=n("Zygf"),U=e=>!(e&&e.pinner&&e.pinner.blocked_by_me||e&&Object(H.a)(e));n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return o.a})),n.d(t,"c",(function(){return a})),n.d(t,"d",(function(){return c})),n.d(t,"e",(function(){return l})),n.d(t,"f",(function(){return u})),n.d(t,"g",(function(){return h})),n.d(t,"h",(function(){return p})),n.d(t,"j",(function(){return m})),n.d(t,"k",(function(){return g})),n.d(t,"l",(function(){return y})),n.d(t,"m",(function(){return v})),n.d(t,"i",(function(){return _})),n.d(t,"n",(function(){return b})),n.d(t,"o",(function(){return E})),n.d(t,"p",(function(){return O.a})),n.d(t,"q",(function(){return T})),n.d(t,"r",(function(){return w})),n.d(t,"s",(function(){return S})),n.d(t,"t",(function(){return I})),n.d(t,"u",(function(){return R})),n.d(t,"v",(function(){return P})),n.d(t,"w",(function(){return A})),n.d(t,"x",(function(){return M})),n.d(t,"y",(function(){return k})),n.d(t,"z",(function(){return N})),n.d(t,"A",(function(){return x})),n.d(t,"B",(function(){return L})),n.d(t,"C",(function(){return U}))},"9pre":function(e,t,n){n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return o}));const i=5,r="V_HLSV3_MOBILE",o=[0,.01,.02,.03,.04,.05,.06,.07,.08,.09,.1,.11,.12,.13,.14,.15,.16,.17,.18,.19,.2,.21,.22,.23,.24,.25,.26,.27,.28,.29,.3,.31,.32,.33,.34,.35,.36,.37,.38,.39,.4,.41,.42,.43,.44,.45,.46,.47,.48,.49,.5,.51,.52,.53,.54,.55,.56,.57,.58,.59,.6,.61,.62,.63,.64,.65,.66,.67,.68,.69,.7,.71,.72,.73,.74,.75,.76,.77,.78,.79,.8,.81,.82,.83,.84,.85,.86,.87,.88,.89,.9,.91,.92,.93,.94,.95,.96,.97,.98,.99,1]},"B2N+":function(e,t,n){var i=n("q1tI"),r=n.n(i);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class a extends r.a.Component{constructor(...e){super(...e),o(this,"state",{anchorHeight:0,anchorWidth:0,horizontalOffset:0,verticalOffset:0}),o(this,"subjectRef",r.a.createRef()),o(this,"calculateAndSetOffsets",({anchorHeight:e,anchorWidth:t,subjectHeight:n,subjectWidth:i})=>{const r=-(i/2-t/2),o=-(n/2-e/2);this.setState({anchorHeight:e,anchorWidth:t,horizontalOffset:r,verticalOffset:o})}),o(this,"positionSubject",()=>{const e=this.subjectRef.current,{anchor:t}=this.props;if(t&&e){const{height:n,width:i}=t.getBoundingClientRect(),{height:r,width:o}=e.getBoundingClientRect();this.calculateAndSetOffsets({anchorHeight:n,anchorWidth:i,subjectHeight:r,subjectWidth:o})}})}componentDidMount(){this.positionSubject()}componentDidUpdate(e,t){const{anchor:n}=this.props,{height:i,width:r}=n.getBoundingClientRect();(i!==t.anchorHeight||r!==t.anchorWidth)&&this.positionSubject()}render(){const{children:e,zIndex:t}=this.props,{horizontalOffset:n,verticalOffset:i}=this.state;return r.a.createElement("div",{ref:this.subjectRef,style:{left:n,position:"absolute",top:i,zIndex:t}},e)}}var s=n("n6mq");t.a=function(e){const{anchor:t,onTouch:n,paused:i,zIndex:o}=e;return t?r.a.createElement(a,{anchor:t,zIndex:o},r.a.createElement(s.P,{onTouch:({event:e})=>n(e),rounding:"circle",fullWidth:!1},r.a.createElement(s.A,{paused:i}))):null}},BEAQ:function(e,t,n){n.d(t,"b",(function(){return d})),n.d(t,"a",(function(){return l}));var i=n("q1tI"),r=n.n(i),o=n("PioT"),a=n("aFfM"),s=n("n6mq");function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const d=e=>{if(Array.isArray(e)){const t=e.find(e=>"video/m3u8"===e.type);return t?t.src:void 0}return RegExp("m3u8$").test(e)?e:void 0};class l extends r.a.PureComponent{constructor(e){super(e),c(this,"setVideoPlayerRef",e=>{e&&(this.videoPlayerRef=e)}),c(this,"handleOnEnded",({event:e})=>{const{loop:t,onLoop:n,onEnded:i}=this.props;i&&(i({event:e}),this.videoPlayerRef&&this.videoPlayerRef.video&&t&&(this.videoPlayerRef.video.play(),n&&n()))}),c(this,"handleOnReady",({event:e})=>{const{onReady:t}=this.props;let{videoStartTime:n}=this.props;const{useHlsVideo:i}=this.state;null==n&&(n=0),n>0&&this.videoPlayerRef&&this.videoPlayerRef.video&&!i&&(this.videoPlayerRef.video.currentTime=n),t&&t({event:e})});const t=d(e.src);this.state={useHlsVideo:!o.a.isSafari()&&!!t}}render(){const{hlsConfig:e,loop:t,onEnded:n,src:i,videoStartTime:o,onLoop:c,...l}=this.props,{useHlsVideo:u}=this.state,h=d(i),p={...e,startPosition:o||-1},f=!n&&t;return u?r.a.createElement(a.a,Object.assign({},l,{hlsConfig:p,loop:f,onEnded:this.handleOnEnded,setVideoRef:this.setVideoPlayerRef,src:h})):r.a.createElement(s.Q,Object.assign({},l,{loop:f,onEnded:this.handleOnEnded,onReady:this.handleOnReady,ref:this.setVideoPlayerRef,src:h||i}))}}},C0mq:function(e,t,n){n.d(t,"a",(function(){return a}));var i=n("q1tI"),r=n.n(i),o=n("y19s");function a(e){function t(t){const{history:n,location:i}=Object(o.b)();return r.a.createElement(e,Object.assign({},t,{history:n,location:i}))}return t.displayName=`withRouterShim(${e.displayName||e.name||""})`,t}},Ep0g:function(e,t,n){n.d(t,"d",(function(){return o})),n.d(t,"c",(function(){return a})),n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return d}));const i=["AU","CA","GB","IE","NZ","US","FR","DE","AT","IT","ES","NL","BE","PT","CH","NL","BE","PT","CH","SE","NO","DK","FI"],r=["US","GB","IE","NZ","AU","CA","FR","DE","AT","IT","ES","NL","BE","PT","CH","DK","SE","NO","FI"],o=e=>i.includes(e.toUpperCase()),a=e=>r.includes(e.toUpperCase()),s=e=>e.reduce((e,t)=>(e||0)+(t||0),0),c=(e,t,n)=>{const i={numDays:n};return t.forEach(t=>{if(e[t].length>=2*n){const r=s(e[t].slice(0,n)),o=s(e[t].slice(-n));i[t]={total:o,trend:r?(o-r)/r:0}}}),i},d=(e,t,n)=>{const i={numDays:n},r=e[n]||{},o=e[2*n]||{};return t.forEach(e=>{const t=r[e]||0,n=o[e]?o[e]-t:0;i[e]={total:t,trend:n?(t-n)/n:0}}),i}},KFEb:function(e,t,n){n.d(t,"a",(function(){return o})),n.d(t,"c",(function(){return c}));var i=n("qtKf");const r=["search_banner_story","search_articles_story","hashtag_pins_story"],o={AGGREGATED_COMMENTS:"aggregatedComments",BOARD_ACTIVITYITEMS:"boardActivityItems",BOARD_ACTIVITYCOMMENTS:"boardActivityComments",BOARD_PINS:"boardPins",BOARD_SECTIONS:"boardSections",HOMEFEED_MORE_IDEAS_TABS:"homefeedMoreIdeasTabs",PROFILE_BOARDS:"profileBoards",SEARCH_PINS:"searchPins",SECTION_PINS:"sectionPins",UNIFIED_COMMENTS:"unifiedComments",USER_DID_IT_DATA:"userDidItData"},a={AggregatedActivityFeedResource:({options:{aggregated_pin_data_id:e}})=>({type:o.USER_DID_IT_DATA,id:e}),AggregatedCommentFeedResource:({options:{objectId:e}})=>({type:o.AGGREGATED_COMMENTS,id:e}),AggregatedCommentReplyFeedResource:({options:{objectId:e}})=>({type:o.AGGREGATED_COMMENTS,id:e,reversed:!0}),BoardActivityFeedResource:({options:{board_id:e}})=>({type:o.BOARD_ACTIVITYITEMS,id:e}),BoardActivityCommentFeedResource:({options:{activityId:e,parentType:t}})=>({type:o.BOARD_ACTIVITYCOMMENTS,id:e,reversed:"boardactivitycomment"===t}),BoardFeedResource:({options:{board_id:e}})=>({type:o.BOARD_PINS,id:e}),BoardSectionPinsResource:({options:{section_id:e}})=>({type:o.SECTION_PINS,id:e}),BoardSectionsResource:({options:{board_id:e}})=>({type:o.BOARD_SECTIONS,id:e}),BoardsResource:({options:{username:e,sort:t}})=>({type:o.PROFILE_BOARDS,id:Object(i.c)(e,t)}),BaseSearchResource:({options:{auto_correction_disabled:e,scope:t,filters:n,query_pin_sigs:i,query:a,user:s},data:c})=>({type:o.SEARCH_PINS,id:e?`auto-correction-disabled:${t}:${n||""}:${s||""}:${i||""}:${a}`:`${t}:${n||""}:${s||""}:${i||""}:${a}`,items:c&&c.results&&c.results.filter(e=>!(e.story_type&&r.includes(e.story_type)))||[]}),DidItCommentsResource:({options:{objectId:e}})=>({type:o.AGGREGATED_COMMENTS,id:e,reversed:!0}),DidItUserFeedResource:({options:{username:e}})=>({type:o.USER_DID_IT_DATA,id:e}),MoreIdeasTabsResource:({data:e})=>({type:o.HOMEFEED_MORE_IDEAS_TABS,id:"hf",items:e&&e.tabs||[]}),UnifiedCommentsPreviewResource:({options:{aggregated_pin_id:e}})=>({type:o.UNIFIED_COMMENTS,id:e}),UnifiedCommentsResource:({options:{aggregated_pin_id:e}})=>({type:o.UNIFIED_COMMENTS,id:e})},s={aggregatedComments:{},boardActivityItems:{},boardActivityComments:{},boardPins:{},boardSections:{},homefeedMoreIdeasTabs:{},profileBoards:{},searchPins:{},sectionPins:{},unifiedComments:{},userDidItData:{}};function c(e,t,n){const i=[...e],r=i.splice(t,1)[0];return i.splice(n,0,r),i}t.b=(e=s,t)=>{switch(t.type){case"RESOURCE_FETCH_COMPLETE":case"RESOURCE_FETCH_MORE_COMPLETE":{const{payload:n}=t;if(!n.options.redux_normalize_feed)return e;const{type:i,id:r,items:s,reversed:c}=a[n.name](n);let d=(s||n.data||[]).map(e=>((e,t)=>{switch(e.type){case"story":return{id:e.id,type:"story",story_type:e.story_type};case"module":return{id:e.id,type:"module",name:e.name};case"user":return{id:e.id,type:"user"};case"board":return t===o.PROFILE_BOARDS?{id:e.id,type:"board",onProfile:!0,profileGroup:e.archived_by_me_at?"archived":e.privacy||"public"}:{id:e.id,type:"board",onProfile:!1};case"boardactivity":return{id:e.id,type:"boardactivity"};case"boardactivitycomment":return{id:e.id,type:"boardactivitycomment"};case"board_section":return{type:"board_section",id:e.id};case"userdiditdata":return{type:"userdiditdata",id:e.id};case"aggregatedcomment":return{type:"aggregatedcomment",id:e.id};case"board_first_pin_slot":return{type:"board_first_pin_slot",pinId:e.pin_id,id:e.id,image:e.image,description:e.description,saves:e.saves,impressions:e.impressions,link:e.link};case"home_feed_tab":return{type:"home_feed_tab",id:e.id,name:e.name};case"unifiedcommentspreview":return"userdiditdata"===e.unified_comment.type?{type:"userdiditdata",id:e.unified_comment.id}:{type:"aggregatedcomment",id:e.unified_comment.id};default:return{type:"pin",id:e.id}}})(e,i));c&&(d=d.reverse());const l=e[i][r];if(l||"RESOURCE_FETCH_MORE_COMPLETE"!==t.type){const n=l||[];let o=d;return"RESOURCE_FETCH_MORE_COMPLETE"===t.type&&(o=c?d.concat(n):n.concat(d)),{...e,[i]:{...e[i],[r]:o}}}break}case"FEED_ITEM_REORDERED":{const{payload:{feedType:n,feedId:i,itemType:r,targetItemId:a,sourceItemId:s}}=t,d=e[n]||{},l=d[i]||[];let u=-1,h=-1;if([o.BOARD_PINS,o.SECTION_PINS,o.BOARD_SECTIONS,"profileBoards"].includes(n)&&(u=l.findIndex(e=>e.type===r&&e.id===s),h=l.findIndex(e=>e.type===r&&e.id===a)),-1!==u&&-1!==h)return{...e,[n]:{...d,[i]:c(l,u,h)}};break}case"FEED_ITEMS_REMOVED":{const{payload:{feedType:n,feedId:i,inverseSelection:r,itemType:a,itemIds:s=[]}}=t,c=e[n]||{},d=c[i];if(d&&d.length>0&&(n===o.SECTION_PINS||n===o.BOARD_PINS)){const t=d.filter(e=>{const t=s.includes(e.id);return!(e.type===a&&(r&&!t||!r&&t))}),o=!!t.find(e=>"pin"===e.type);return{...e,[n]:{...c,[i]:o?t:[]}}}if(d&&d.length>0&&n===o.BOARD_SECTIONS){const t=d.filter(e=>{const t=s.includes(e.id);return!(e.type===a&&t)});return{...e,[n]:{...c,[i]:t}}}if(d&&d.length>0&&(n===o.BOARD_ACTIVITYITEMS||n===o.AGGREGATED_COMMENTS||n===o.BOARD_ACTIVITYCOMMENTS||n===o.USER_DID_IT_DATA)){const t=d.filter(e=>{const t=s.includes(e.id);return!(e.type===a&&t)});return{...e,[n]:{...c,[i]:t}}}break}case"FEED_ITEMS_ADDED":{const{payload:{feedType:n,feedId:i,itemType:r,itemIds:a=[],prepend:s}}=t,c=e[n]||{},d=c[i];if(d&&(n===o.SECTION_PINS||n===o.BOARD_PINS)){const t=a.map(e=>({id:e,type:r}));let o=0;"story"===(d[0]||{}).type&&(o=1),"story"===(d[1]||{}).type&&(o=2);const s=[...d.slice(0,o),...t,...d.slice(o)];return{...e,[n]:{...c,[i]:s}}}if(d&&n===o.BOARD_SECTIONS){const t=a.reverse().map(e=>({id:e,type:"board_section"})),r=d?[...t,...d]:[...t];return{...e,[n]:{...c,[i]:r}}}if(n===o.BOARD_ACTIVITYITEMS||n===o.AGGREGATED_COMMENTS||n===o.BOARD_ACTIVITYCOMMENTS||n===o.UNIFIED_COMMENTS){const t=a.map(e=>({id:e,type:r})),o=d?[...s?t:d,...s?d:t]:t;return{...e,[n]:{...c,[i]:o}}}if(n===o.USER_DID_IT_DATA){const t=a.map(e=>({id:e,type:r})),o=d?[...t,...d]:t;return{...e,[n]:{...e[n],[i]:o}}}break}case"FEED_INVALIDATE":{const{payload:{feedType:n,feedId:i}}=t,r=e[n]||{};if(r[i])return{...e,[n]:{...r,[i]:null}};break}}return e}},NdXn:function(e,t,n){function i(e){return e.replace(/[_.-](\w|$)/g,(e,t)=>t.toUpperCase())}n.d(t,"a",(function(){return i}))},Nle8:function(e,t,n){n.d(t,"a",(function(){return o}));var i=n("ajUs"),r=n("zpPL");function o(e){const t=r.a.instance;let n;if(t){const r=t.getState();if(r.pins&&e){const t=r.pins[e],o=r.location;t&&(n=Object(i.a)(t,o))}}return n}},"O1y+":function(e,t,n){var i=n("pOug");const r=Object(i.a)(e=>e.pin&&e.pin.id?{...e,id:e.id,aggregatedPinData:e.pin.aggregated_pin_data}:null);t.a=r},PsyL:function(e,t,n){t.a=function({hours:e,minutes:t}){return`PT${e}H${t}`}},RHD0:function(e,t,n){n.d(t,"g",(function(){return s})),n.d(t,"h",(function(){return c})),n.d(t,"a",(function(){return d})),n.d(t,"c",(function(){return u})),n.d(t,"f",(function(){return h})),n.d(t,"b",(function(){return p})),n.d(t,"d",(function(){return f})),n.d(t,"e",(function(){return m}));var i=n("RNo4"),r=n("Ep0g"),o=n("0S8y"),a=n("fAMq");const s=(e,t)=>{return Object.keys(t).filter(n=>{const i=t[String(n)];return(i.pinner||{}).id===e.id&&!i.is_repin}).map(e=>t[e])},c=(e,t)=>{return s(e,t).filter(e=>{if(e.created_at){return Object(a.i)(e.created_at).ms<20*a.a}return!1})},d=Object.freeze({NOT_ANSWERED:0,YES:1,NO:2,NOT_SURE:3}),l=["en","fr","de","es","it","pt","nl","nb","fi","sv","da","nl","pt"],u=e=>{const t=e.toLowerCase();return!!l.find(e=>t.startsWith(e))},h=(e,t)=>!(!e||!e.isAuth)&&Object(r.d)(e.country),p=e=>e.isAuth&&!e.isPartner&&!Object(o.d)({user:e})&&!Object(o.c)({user:e}),f=({requestContext:e,history:t,pinId:n})=>{((e,t)=>{const n=Object(i.a)("/business/convert",{next:t});e.push(n)})(t,(e=>e?`/business/ad_create?pinId=${e}`:"/business/ad_create")(n))},m=e=>{const t=e.trim().split(" ").filter(e=>!!e);return{firstName:t.length>0?t[0]:"",lastName:t.length>1?t.slice(1).join(" "):""}}},SASd:function(e,t,n){var i=n("q1tI"),r=n("9rZX"),o=n.n(r),a=n("TSYQ"),s=n.n(a),c=n("Ye/N"),d=n("D2p8"),l=n("LT60"),u=n("n6mq");function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}o.a.defaultStyles={};t.a=class extends i.Component{constructor(...e){super(...e),h(this,"pauseImpressionsTracking",()=>{d.c.pause()}),h(this,"resumeImpressionsTracking",()=>{d.c.resume()}),h(this,"handleHide",()=>{this.resumeImpressionsTracking(),this.props.onHide&&this.props.onHide()}),h(this,"handleOpen",()=>{this.pauseImpressionsTracking()})}componentDidMount(){this.pauseImpressionsTracking()}componentWillUnmount(){this.resumeImpressionsTracking()}render(){const{allowClickAndDrag:e,className:t,loading:n,noButton:r,onHide:a,type:d,style:h={}}=this.props,p=s()(t,"dangerouslyDisableFocusStyle","Module","ReactModal__Content","inModal",{modalHasClose:!!a},{ConfirmDialog:"confirm"===d},{PushNotificationSettings:"notifications"===d}),f=n?i.createElement(u.G,{accessibilityLabel:c.a._("Loading content","Accessibility label for loading modal content","Accessibility label for loading modal content"),show:!0}):null,m=a&&!r?i.createElement("button",{className:"Button Module borderless cancelButton closeModal inModal show",onClick:this.handleHide,type:"button"},i.createElement(u.n,{icon:"cancel",accessibilityLabel:c.a._("Close modal"),size:20})):null;return i.createElement(l.a,{allowClickAndDrag:e},i.createElement(o.a,{ariaHideApp:!1,className:p,isOpen:!0,onAfterOpen:this.handleOpen,onRequestClose:this.handleHide,shouldCloseOnOverlayClick:!0,style:h},f,this.props.children,m))}}},VpfY:function(e,t,n){n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return d})),n.d(t,"c",(function(){return l})),n.d(t,"e",(function(){return u})),n.d(t,"f",(function(){return h})),n.d(t,"g",(function(){return p})),n.d(t,"h",(function(){return f})),n.d(t,"j",(function(){return m})),n.d(t,"d",(function(){return g})),n.d(t,"k",(function(){return y})),n.d(t,"i",(function(){return v}));var i=n("RHD0"),r=n("7jH2"),o=n("Y8Sn");const a="30d",s="30d_realtime";function c(e){const{third_party_pin_owner:t,link_domain:n,pinner:i,domain:r,native_creator:o}=e;if(o)return o.id;const a=n&&n.official_user;return a?a.id:t?t.id:i&&i.domain_verified&&i.domain_url===r?i.id:null}function d(e){var t,n;return!Object(o.j)(e.videos)&&!Object(o.i)(e)&&0!==Object.keys((null===(t=e.aggregated_pin_data)||void 0===t?void 0:null===(n=t.creator_analytics)||void 0===n?void 0:n[a])||{}).length}function l(e){var t,n;return!Object(o.j)(e.videos)&&!Object(o.i)(e)&&0!==Object.keys((null===(t=e.aggregated_pin_data)||void 0===t?void 0:null===(n=t.creator_analytics)||void 0===n?void 0:n[s])||{}).length}function u(e){var t;return 0!==Object.keys((null===(t=e.creator_analytics)||void 0===t?void 0:t[a])||{}).length}function h(e){var t;return 0!==Object.keys((null===(t=e.creator_analytics)||void 0===t?void 0:t[s])||{}).length}function p(e){var t,n;return!!(null===(t=e.creator_analytics)||void 0===t?void 0:null===(n=t[s])||void 0===n?void 0:n.is_realtime)}function f(e){const t=e.aggregated_pin_data||{};return t.is_shop_the_look||t.is_stela}function m(e){const{native_creator:t,pinner:n,domain:i}=e;return(e.link_domain&&e.link_domain.official_user||!!e.third_party_pin_owner||!!n&&n.domain_verified&&n.domain_url===i)&&!e.is_promoted||t}function g(e,t){const{is_native:n,native_pin_stats:i}=e,o=i||{},a=Object(r.p)({pin:e}),{video:s}=Object(r.y)(a)||{};return m(e)||f(e)||n&&s&&e&&e.link||Object.keys(o).length>0&&!d(e)&&!u(e)||e.promoter&&e.is_promoted&&!t}function y(e){if(!e.story_pin_data_id)return;const{story_pin_data:{metadata:t,pages:n=[]}={}}=e;return{metadata:t,detailsPage:n[1]}}const v=({viewer:e,pin:t})=>Object(i.b)(e)&&t.is_quick_promotable_by_pinner},Y8Sn:function(e,t,n){n.d(t,"j",(function(){return i})),n.d(t,"i",(function(){return r})),n.d(t,"d",(function(){return o})),n.d(t,"f",(function(){return a})),n.d(t,"g",(function(){return s})),n.d(t,"e",(function(){return c})),n.d(t,"h",(function(){return d})),n.d(t,"b",(function(){return l})),n.d(t,"k",(function(){return u})),n.d(t,"a",(function(){return h})),n.d(t,"c",(function(){return p}));const i=e=>!!e&&e.video_list,r=({story_pin_data_id:e})=>!!e,o=(e,t)=>{const n=e||t&&t.embed;return n&&n.src&&!n.type},a=e=>e.rich_summary&&e.rich_summary.products&&e.rich_summary.products.length>0||e.rich_metadata&&e.rich_metadata.products&&e.rich_metadata.products.length>0,s=e=>!!e.promoter&&!e.is_downstream_promotion,c=e=>{const t=e.embed||e.attribution&&e.attribution.embed||null;return t&&"gif"===t.type},d=e=>!!e.video_status&&5!==e.video_status,l=(e,t)=>t?`/pin/${e}/analytics`:`/pin/${e}/`,u=(e,t)=>{const{organicVideosAutoplaying:n,promotedVideosAutoplaying:i}=t,r={...n,...i};return!!r[e]&&!r[e].paused},h=(e,t)=>{const{organicVideosAutoplaying:n,promotedVideosAutoplaying:i}=t,r={...n,...i};for(const o in r){const{paused:t}=r[o];if(o!==e&&!t)return!1}return!0},p=(e,t)=>{const{organicVideosAutoplaying:n,promotedVideosAutoplaying:i}=t,r={...n,...i};return r[e]&&r[e].currentTime}},ZVOf:function(e,t,n){n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return c}));var i=n("eOdZ"),r=n("/X16");function o(e,t){return i.a.create("UserFollowResource",{user_id:e,aux_data:t?{pin_id:t}:void 0})}function a(e,t){return{type:r.a.USER_FOLLOW,payload:{id:e,value:t}}}function s(e,t=null){return n=>{o(e,t).callCreate().catch(()=>n(a(e,!1))),n(a(e,!0))}}function c(e,t=null){return n=>{o(e,t).callDelete().catch(()=>n(a(e,!0))),n(a(e,!1))}}},Zygf:function(e,t,n){function i(e){return Boolean(e.promoted_is_removable)}n.d(t,"a",(function(){return i}))},a9a9:function(e,t,n){var i=n("zpPL");n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return o}));const r=e=>i.a.instance.dispatch(function(e){return{type:"SPAMMY_CLICKTHROUGH_WARNING_SHOW",payload:e}}(e)),o=()=>i.a.instance.dispatch({type:"SPAMMY_CLICKTHROUGH_WARNING_DISMISS"})},aFfM:function(e,t,n){n.d(t,"a",(function(){return g}));var i=n("q1tI"),r=n.n(i),o=n("ulZh"),a=n.n(o),s=n("U4JR"),c=n("n6mq");function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const l=1e3,u=300,h=1e3,p=250,f=(e,t)=>typeof e!=typeof t||(Array.isArray(t)?e.length!==t.length||t.some((t,n)=>!Array.isArray(e)||t.type!==e[n].type||t.src!==e[n].src):t!==e);function m(){return(new Date).getTime()}class g extends r.a.PureComponent{constructor(...e){super(...e),d(this,"state",{canPlayVideo:!1,isManifestParsed:!1}),d(this,"setVideoPlayerRef",e=>{const{setVideoRef:t}=this.props;this.videoPlayerRef=e,t&&t(e),this.videoPlayerRef&&this.videoPlayerRef.video&&this.videoPlayerRef.video.addEventListener("canplay",()=>{this.setState({canPlayVideo:!0})})}),d(this,"currentVideoTime",0),d(this,"hls",null),d(this,"playbackPerformance",{fatalErrorMsg:"",firstLevelFetchTime:0,firstFragmentParsedTime:0,hasFatalError:!1,levelWatchDurationsMs:[],numStalls:0,rebufferingDurationMs:0,videoCreatedTime:0}),d(this,"initializeHls",()=>{this.destroyHls();const{src:e,hlsConfig:t}=this.props,n=new a.a(t);n.loadSource(e),this.videoPlayerRef&&n.attachMedia(this.videoPlayerRef.video),n.on(a.a.Events.MANIFEST_PARSED,()=>{this.setState({isManifestParsed:!0}),this.startVideoWatchTimings()}),n.on(a.a.Events.FRAG_PARSED,(e,t)=>{this.playbackPerformance.firstFragmentParsedTime||(this.playbackPerformance.firstFragmentParsedTime=m())}),n.on(a.a.Events.LEVEL_LOADING,(e,t)=>{this.playbackPerformance.firstLevelFetchTime||(this.playbackPerformance.firstLevelFetchTime=m())}),n.on(a.a.Events.ERROR,(e,t)=>{t.fatal&&(this.playbackPerformance.hasFatalError=!0,this.playbackPerformance.fatalErrorMsg=t.details),t.details===a.a.ErrorDetails.BUFFER_STALLED_ERROR&&(this.playbackPerformance.numStalls+=1,t.buffer&&(this.playbackPerformance.rebufferingDurationMs+=t.buffer*h))}),this.hls=n}),d(this,"destroyHls",()=>{const{hls:e}=this;e&&e.destroy(),window.clearInterval(this.videoTimeIntervalId)}),d(this,"startVideoWatchTimings",()=>{window.clearInterval(this.videoTimeIntervalId),this.videoTimeIntervalId=window.setInterval(()=>{if(!this.hls||this.hls.currentLevel<=0||!this.videoPlayerRef||!this.videoPlayerRef.video)return;const e=this.videoPlayerRef.video.currentTime*h,{levelWatchDurationsMs:t}=this.playbackPerformance;if(t.length){if(this.hls.currentLevel!==t[t.length-1].level){const n=t.length-1;t[n].duration+=this.currentVideoTime-t[n].lastStartSegmentTime,t.push({level:this.hls.currentLevel,lastStartSegmentTime:e,duration:0})}else if(e<this.currentVideoTime||e-this.currentVideoTime>u){const n=t.length-1;t[n].duration+=this.currentVideoTime-t[n].lastStartSegmentTime,t[n].lastStartSegmentTime=e}}else t.push({level:this.hls.currentLevel,lastStartSegmentTime:e,duration:0});this.currentVideoTime=e},p)})}componentDidMount(){this.playbackPerformance.videoCreatedTime=m(),this.initializeHls()}componentDidUpdate(e){const{src:t}=this.props;f(e.src,t)&&this.initializeHls()}componentWillUnmount(){const{firstLevelFetchTime:e,firstFragmentParsedTime:t,hasFatalError:n,levelWatchDurationsMs:i,numStalls:r,rebufferingDurationMs:o,videoCreatedTime:a}=this.playbackPerformance,c=this.videoPlayerRef&&this.videoPlayerRef.video;if(this.hls&&c&&i.length>0){const d=this.hls.levels,u=d[i[0].level],p=c.currentTime*h;i[i.length-1].duration+=p-i[i.length-1].lastStartSegmentTime;const f=i.reduce((e,t)=>{return e+t.level*d[t.level].bitrate*(t.duration||0)/h},0),m=i.reduce((e,t)=>e+(t.duration||0),0);Object(s.a)(3606,{eventData:{videoPerformanceData:{startupTimeMs:t-e,startupLatencyMs:t-a,nativeVideoDurationMs:c.duration*h,startupVariantKbps:u.bitrate/l,startupPlayerWidth:c.clientWidth,startupPlayerHeight:c.clientHeight,startupVariantWatchedDurationMs:i[0].duration,startupVariantWidth:u.width,isCellular:!1,fatalError:n,averageVideoKbps:f/(m/h),overallWatchedDurationMs:m,numberOfStalls:r,rebufferRate:o/m}}})}this.destroyHls()}render(){const{playing:e,hlsConfig:t,setVideoRef:n,src:i,...o}=this.props,{canPlayVideo:a,isManifestParsed:s}=this.state;return r.a.createElement(c.Q,Object.assign({},o,{ref:this.setVideoPlayerRef,playing:s&&a&&e,src:i}))}}},fAMq:function(e,t,n){n.d(t,"a",(function(){return r})),n.d(t,"i",(function(){return d})),n.d(t,"c",(function(){return l})),n.d(t,"h",(function(){return u})),n.d(t,"g",(function(){return h})),n.d(t,"d",(function(){return m})),n.d(t,"f",(function(){return g})),n.d(t,"b",(function(){return y})),n.d(t,"e",(function(){return v}));var i=n("Se/U");const r=6e4,o=60*r,a=24*o,s=30*a,c=365*a,d=e=>{const t=new Date(e)-new Date,n=Math.abs(t);return{year:Math.floor(n/c),month:Math.floor(n%c/s),day:Math.floor(n%s/a),hour:Math.floor(n%a/o),minute:Math.floor(n%o/r),milli:t,ms:n}},l=(e,t)=>{const n=new Date(e);return n.setDate(e.getDate()+t),n},u=(e,t)=>{const n=t.getUTCDate()-e,i=new Date(t);return i.setUTCDate(n),i},h=(e,t)=>{return e.getTime()>t.getTime()},p=e=>/^\d{4}$/.test(e),f=e=>/^\d{2}\/\d{2}\/\d{4}$/.test(e),m=e=>{if(!p(e)&&!f(e))return-1;const t=new Date(e);if(!Object(i.a)(t))return-1;const n=t.toISOString().substr(0,10);return new Date(n).getTime()/1e3},g=(e,t)=>{if(!p(e)&&!f(e))return!1;const n=new Date;if(!Object(i.a)(n))return!1;if(!p(e)){const i=new Date(n.getFullYear()-t,n.getMonth(),n.getDate());return new Date(e)<=i}const r=n.getFullYear()-t-1;return new Date(e).getFullYear()<=r},y=e=>{const t=new Date(e);return new Date(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate())},v=e=>e.getFullYear()+"-"+("0"+(e.getMonth()+1)).slice(-2)+"-"+("0"+e.getDate()).slice(-2)},gC5q:function(e,t,n){var i=n("YO3V"),r=n.n(i);function o(e,t=!1){const n=(t,n)=>e(n);return e=>(function e(t,n=!1){return i=>{if(!r()(i))return n&&Array.isArray(i)?i.map(e(t,n)):i;const o={};return Object.keys(i).forEach(a=>{const s=t(i[a],a);r()(i[a])||n&&Array.isArray(i[a])?o[s]=e(t,n)(i[a]):o[s]=i[a]}),o}})(n,t)(e)}function a(e={},t=[]){return Object.keys(e).reduce((n,i)=>t.includes(i)?n:{...n,[i]:e[i]},{})}n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return a}))},n02X:function(e,t,n){var i=n("q1tI"),r=n.n(i),o=n("i8i4"),a=n("/MKj"),s=n("E+oP"),c=n.n(s),d=n("SASd"),l=n("B2N+"),u=n("n6mq");function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const p={overlay:{padding:0},content:{boxShadow:"none",height:"100%",margin:0,outline:"none",padding:0,width:"100%"}};class f extends i.Component{constructor(e){super(e),h(this,"state",{isPulsing:!this.props.tooltipOnly,isModalOpen:!!this.props.isModal&&!!this.props.tooltipOnly&&!this.props.pulserOnly,positionStyles:{},style:{}}),h(this,"onPulsarClick",e=>{e&&(e.stopPropagation(),e.preventDefault());const t={isPulsing:!1,style:{}},{isModal:n,pulserOnly:i,handleComplete:r,anchor:a}=this.props;if(i)r();else if(n){const e=Object(o.findDOMNode)(a);if(e instanceof HTMLElement){const n=e.getBoundingClientRect();return void this.setState({...t,isModalOpen:!0,positionStyles:{top:n.top,left:n.left,position:"absolute"}})}}this.setState(t)}),h(this,"modalPositioned",!1),e.anchor&&(this.anchorElement=Object(o.findDOMNode)(e.anchor))}UNSAFE_componentWillReceiveProps(e){e.anchor!==this.props.anchor&&(this.anchorElement=Object(o.findDOMNode)(e.anchor))}componentDidUpdate(){this.state.isModalOpen&&this.updateModalPosition()}getPulser(){const{zIndex:e}=this.props;return r.a.createElement(l.a,{anchor:this.anchorElement,onTouch:this.onPulsarClick,zIndex:e})}getFlyout(){const{overflow:e,tooltip:t,handleDismiss:n,handleComplete:i}=this.props;if(t){const{cancelButtonText:o,confirmButtonText:a,mainText:s,idealDirection:c="down"}=t,d=o&&n&&a&&i;return r.a.createElement(u.k,{anchor:this.anchorElement,color:"darkGray",idealDirection:c,onDismiss:n,shouldFocus:!1,size:"md"},r.a.createElement(u.c,{column:12,padding:3},r.a.createElement(u.K,{color:"white",overflow:e,weight:"bold"},s),d?r.a.createElement(u.c,{marginTop:2,display:"flex",alignItems:"center"},r.a.createElement(u.c,{marginEnd:1,xs:{column:6}},r.a.createElement(u.d,{color:"transparent",onClick:n,size:"md",text:String(o)})),r.a.createElement(u.c,{xs:{column:6}},r.a.createElement(u.d,{color:"white",size:"md",text:String(a),onClick:i}))):null))}return r.a.createElement("div",null)}updateModalPosition(){if(this.state.isModalOpen&&!this.modalPositioned){const e=Object(o.findDOMNode)(this.props.anchor);if(e instanceof HTMLElement){const t=e.getBoundingClientRect(),n=window.getComputedStyle(e),i=n.getPropertyValue("border"),r=n.getPropertyValue("margin"),o=parseInt(i.split("px")[0],10),a=parseInt(r.split("px")[0],10),s=!isNaN(o)&&!isNaN(a)&&Math.abs(a)===o?o:0;this.setState({positionStyles:{top:t.top+s,left:t.left+s,position:"absolute"}}),this.modalPositioned=!0}}}renderFlyout(){const{handleComplete:e,children:t,pulserOnly:n}=this.props,{isModalOpen:i,positionStyles:o}=this.state,a=!n;return i?r.a.createElement(d.a,{noButton:!0,onHide:e,style:p},r.a.createElement("div",{style:o},t,this.getFlyout())):a?this.getFlyout():null}render(){return this.props.anchor?r.a.createElement("div",{style:this.state.style},this.state.isPulsing?this.getPulser():this.renderFlyout()):null}}h(f,"defaultProps",{overflow:"breakWord",tooltipOnly:!1,pulserOnly:!1});var m=n("NdXn"),g=n("zXAL"),y=n("gC5q"),v=n("vh5K");function _(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.a=(e,t)=>n=>{const r=function(e,t){return(n,i)=>{if(t)return{experience:t};const r=n.experiences.anchorExperiences[e];return r?{experience:r}:{}}}(e,t),s=function(e,t){var n,r;return r=n=class extends i.Component{constructor(e){super(e),_(this,"getDisplayDataProps",()=>{const{display_data:e}=this.props.experience;if(e.tooltip){const t={...e.tooltip.options,...e.tooltip};e.tooltip=t,delete e.tooltip.options}return Object(y.a)(m.a,!0)(e)}),_(this,"viewTimer",null),_(this,"handleCompleteOnHover",()=>{const{experienceClient:e,experience:t}=this.props;t.display_data&&t.display_data.complete_on_hover&&e.completeExperience(t.placement_id,t.experience_id)}),_(this,"handleCompleteNoClick",e=>{const{experienceClient:t,experience:n,onClick:i}=this.props;e&&e.event&&e.event.stopPropagation(),i&&i(e),t.completeExperience(n.placement_id,n.experience_id)}),_(this,"handleComplete",e=>{const{experienceClient:t,experience:n}=this.props,{wrappedComponentRef:i}=this.state;if(e&&e.event&&e.event.stopPropagation(),i){const e=Object(o.findDOMNode)(i);e instanceof HTMLElement&&e.click()}t.completeExperience(n.placement_id,n.experience_id)}),_(this,"handleDismiss",e=>{e&&e.event&&e.event.stopPropagation();const{experienceClient:t,experience:n}=this.props;t.dismissExperience(n.placement_id,n.experience_id)}),_(this,"handleRefUpdate",e=>{const{wrappedComponentRef:t}=this.state;t&&!!e||this.setState({wrappedComponentRef:e})});const{experience:t}=e;let n=!1;t&&t.display_data&&t.display_data.delay&&(n=!0),this.state={hasModal:t&&t.display_data&&t.display_data.modal,isPresentationDelayed:n,wrappedComponentRef:void 0}}componentDidMount(){const{experience:e,experienceClient:t}=this.props,{isPresentationDelayed:n}=this.state;e&&(n?this.viewTimer=setTimeout(()=>{this.showExperience()},e.display_data.delay):t.viewExperience(e.placement_id,e.experience_id))}UNSAFE_componentWillReceiveProps(e){const{experience:t}=this.props,{experience:n}=e;if(!t&&n){const e={};n.display_data&&n.display_data.delay&&(e.isPresentationDelayed=!0,this.viewTimer=setTimeout(()=>{this.showExperience()},n.display_data.delay)),n.display_data&&n.display_data.modal&&(e.hasModal=!0),c()(e)||this.setState(e)}}componentWillUnmount(){this.viewTimer&&clearTimeout(this.viewTimer)}showExperience(){const{experience:e,experienceClient:t}=this.props;e&&(t.viewExperience(e.placement_id,e.experience_id),this.setState({isPresentationDelayed:!1}))}renderComponentTooltip(e){const{wrappedComponentRef:n}=this.state,{centerTooltip:r,overflow:o,zIndex:a}=this.props;return i.createElement("div",{style:{position:"relative"}},i.createElement(u.P,{onMouseEnter:this.handleCompleteOnHover},i.createElement(t,Object.assign({},this.props,{ref:this.handleRefUpdate,onClick:this.handleCompleteNoClick})),i.createElement(f,Object.assign({},this.getDisplayDataProps(),{anchor:n,centerTooltip:r,handleComplete:this.handleComplete,handleDismiss:this.handleDismiss,isModal:e,overflow:o,zIndex:a}),i.createElement(t,Object.assign({},this.props,{ref:this.handleRefUpdate,onClick:this.handleCompleteNoClick})))))}render(){const{experience:n,isPulsarDisplayed:r}=this.props,{hasModal:o,isPresentationDelayed:a}=this.state;return n&&Object(v.b)(n)===e&&!a&&r?i.createElement(u.c,{position:"relative"},o?this.renderComponentTooltip(!0):this.renderComponentTooltip(!1)):i.createElement(t,this.props)}},_(n,"defaultProps",{isPulsarDisplayed:!0}),r}(e,n);return Object(g.a)(Object(a.connect)(r,null,null,{forwardRef:!0})(s))}},pOug:function(e,t,n){t.a=function(e){return function(t){return null!=t?e(t):null}}},qtKf:function(e,t,n){n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return o}));const i=(e,t)=>`${e}:${t||""}`,r=(e,t)=>e.feeds.profileBoards[i(t.username,t.boardOrder)],o=(e,t)=>t.isOverview||t.inActivityView?"xxWide":t.isOwnProfile&&e.ui.views&&e.ui.views.profileBoardView||"wide"},xjqW:function(e,t,n){function i({id:e,isProduct:t,isPromoted:n,videoDuration:i,viewParameter:r,viewType:o,type:a}){return{type:"REPORT_CONTENT_SHOW",payload:{id:e,isProduct:t,isPromoted:n,videoDuration:i,viewParameter:r,viewType:o,type:a}}}function r(){return{type:"REPORT_CONTENT_DISMISS"}}n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return r}))}}]);
//# sourceMappingURL=pjs-1-3b88a99a3a9dddc48c5d.mjs.map
